(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{344:function(t,n,s){"use strict";s.r(n);var e=s(7),a=Object(e.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"处理代码裁剪"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#处理代码裁剪"}},[t._v("#")]),t._v(" 处理代码裁剪")]),t._v(" "),n("p",[t._v("Unity使用了"),n("a",{attrs:{href:"https://docs.unity3d.com/Manual/ManagedCodeStripping.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("代码裁剪"),n("OutboundLink")],1),t._v("技术来帮助减少il2cpp backend的包体大小。如果未做防裁剪处理，由于AOT主工程里的代码一般不多，大量的C#类型和函数被裁剪，导致热更新中调用这些被裁剪类或函数出现如下异常：")]),t._v(" "),n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-txt"}},[n("code",[t._v("    // 类型缺失错误\n    Unity: TypeLoadException: Could not load type 'Xxx' from assembly 'yyy'\n\n    // 函数缺失错误\n    MissingMethodException: xxxx\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[t._v("Unity已经提供了避免代码裁剪的机制，详细方式见"),n("RouterLink",{attrs:{to:"/hybridclr/code_striping/"}},[t._v("代码裁剪问题")]),t._v("文档。")],1),t._v(" "),n("p",[t._v("hybridclr_unity提供了便捷的命令"),n("code",[t._v("HybridCLR/generate/LinkXml")]),t._v("，一键生成link.xml。")]),t._v(" "),n("p",[t._v("注意如果某个assembly在你的主工程中完全没有引用到，即使link.xml中preserve了这个assembly或它的类及函数，这个防裁剪操作不会生效。\n因此你要确保对于每个要保留的assembly，你在主工程中（例如hybridclr_trial项目的Main模块）至少要引用过这个assembly里的某个类或函数。")])])}),[],!1,null,null,null);n.default=a.exports}}]);