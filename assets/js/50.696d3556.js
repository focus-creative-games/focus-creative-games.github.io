(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{370:function(t,e,a){"use strict";a.r(e);var s=a(7),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"常见错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见错误"}},[t._v("#")]),t._v(" 常见错误")]),t._v(" "),e("p",[t._v("目前提交的版本都经过测试，基本不可能出现编译错误及崩溃或者基础的运行错误。如果查看了常见错误，还未能解决问题，请将hybridclr_unity、hybridclr、il2cpp_plus更新到最新版本，再试一次。")]),t._v(" "),e("p",[t._v("如果仍然没有解决问题，可以加入以下群：")]),t._v(" "),e("ul",[e("li",[t._v("新手1群：428404198。新手使用过程中遇到问题，都可以在群里咨询。")]),t._v(" "),e("li",[e("strong",[t._v("悬赏互助群")]),t._v("：762953653。悬赏提问，快速解决问题。")])]),t._v(" "),e("h2",{attrs:{id:"unity-editor下的错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unity-editor下的错误"}},[t._v("#")]),t._v(" Unity Editor下的错误")]),t._v(" "),e("h3",{attrs:{id:"点击-hybridclr-setting-未能找到hybridclr设置界面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#点击-hybridclr-setting-未能找到hybridclr设置界面"}},[t._v("#")]),t._v(" 点击 "),e("code",[t._v("HybridCLR/Setting")]),t._v("，未能找到HybridCLR设置界面")]),t._v(" "),e("p",[t._v("删除 "),e("code",[t._v("ProjectSettings/HybridCLRSettings.asset")]),t._v("文件即可。如果仍未显示，则重启Unity Editor。")]),t._v(" "),e("h3",{attrs:{id:"installer点击安装出现-git不是内部或外部命令-也不是可运行的程序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installer点击安装出现-git不是内部或外部命令-也不是可运行的程序"}},[t._v("#")]),t._v(" Installer点击安装出现：git不是内部或外部命令，也不是可运行的程序")]),t._v(" "),e("p",[t._v("最常见原因为git未安装（Windows 下安装 "),e("a",{attrs:{href:"https://gitforwindows.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitForWindows"),e("OutboundLink")],1),t._v("。其他平台请自己酌情安装），或者安装git后未重启UnityEditor和UnityHub。如果你确信安装了git，cmd中也确实能运行git，则尝试重启电脑。")]),t._v(" "),e("h3",{attrs:{id:"使用installer安装时发生-directorynotfoundexception-counld-not-find-a-part-of-the-path-xxx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用installer安装时发生-directorynotfoundexception-counld-not-find-a-part-of-the-path-xxx"}},[t._v("#")]),t._v(" 使用Installer安装时发生 DirectoryNotFoundException: Counld not find a part of the path 'xxx'")]),t._v(" "),e("p",[t._v("有几种原因：")]),t._v(" "),e("ul",[e("li",[t._v("如果出错目录不存在，则因为网络或者各种原因，git clone hybridclr或il2cpp_plus仓库失败了。 此时你可以重试几次。")]),t._v(" "),e("li",[t._v("如果出错目录存在，则因为路径长度超过256字符导致。请避免过深的目录。")])]),t._v(" "),e("h3",{attrs:{id:"exception-region-unity-config-start-not-find"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exception-region-unity-config-start-not-find"}},[t._v("#")]),t._v(" Exception. region:UNITY_CONFIG start not find")]),t._v(" "),e("p",[t._v("hybridclr_unity版本过低。请升级最新版本。")]),t._v(" "),e("h3",{attrs:{id:"exception-region-place-holder-start-not-find"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exception-region-place-holder-start-not-find"}},[t._v("#")]),t._v(" Exception. region:PLACE_HOLDER start not find")]),t._v(" "),e("p",[t._v("hybridclr_unity为较新版本，但hybridclr代码太旧导致。")]),t._v(" "),e("p",[t._v("要求你的 hybridclr及il2cpp_plus必须是main分支，并且更新到最新。")]),t._v(" "),e("h3",{attrs:{id:"exception-region-xxxxxx-start-not-find"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exception-region-xxxxxx-start-not-find"}},[t._v("#")]),t._v(" Exception. region:XXXXXX start not find")]),t._v(" "),e("p",[t._v("hybridclr_unity 与 hybridclr及il2cpp_plus版本不匹配导致。")]),t._v(" "),e("p",[t._v("要求相同版本分支，并且同时更到最新（或者相匹配的版本，但大多数人很难知道哪个是相匹配的版本）。")]),t._v(" "),e("h3",{attrs:{id:"运行-hybridclr-generate-xxx-时发生-exception-resolve-assembly-yyyassembly-fail"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行-hybridclr-generate-xxx-时发生-exception-resolve-assembly-yyyassembly-fail"}},[t._v("#")]),t._v(" 运行 "),e("code",[t._v("HybridCLR/generate/xxx")]),t._v(" 时发生 "),e("code",[t._v("Exception: resolve assembly: yyyAssembly fail")])]),t._v(" "),e("p",[t._v("如果 yyyAssembly为"),e("code",[t._v("netstandard")]),t._v("，则你需要将Build Settings中Api Compatible Level切为 .Net 4.x或.Net Framework。")]),t._v(" "),e("p",[t._v("否则是因为这个生成依赖于裁剪后的aot dll，而此时aot dll还未生成。有几种原因导致这个结果：")]),t._v(" "),e("ul",[e("li",[t._v("你从未在主工程中使用过跟该dll相关代码，导致就算link.xml中保留了，仍然整个被裁剪。解决办法是在主工程中随便写段代码引用该dll中的某个类或函数。")]),t._v(" "),e("li",[t._v("Unity2021版本，打包iOS平台，使用低于2.0.1版本hybridclr_unity，同时未修改 UnityEditor.CoreModule.dll文件，导致未获得裁剪后的dll。解决办法是升级hybridclr_unity到2.0.1及更高版本或者按照文档"),e("RouterLink",{attrs:{to:"/hybridclr/modify_unity_dll/"}},[t._v("修改Unity编辑器相关dll")]),t._v("修改UnityEditor.CoreModule.dll。")],1),t._v(" "),e("li",[t._v("你开启了 collectAssetReferenceTypes 选项，它会导致依赖aot dll来生成link.xml，形成死循环。解决办法是 关闭它或者先手动build一次项目。")]),t._v(" "),e("li",[t._v("其他原因。万能的解决办法是手动build一次项目生成aot dll。")])]),t._v(" "),e("p",[t._v("详细请看 "),e("RouterLink",{attrs:{to:"/hybridclr/build_pipeline/"}},[t._v("HybridCLR打包工作流")]),t._v("中\n生成桥接函数 这一节的文档。")],1),t._v(" "),e("h3",{attrs:{id:"运行-hybridclr-generate-xxx-时发生-nullreferenceexception-hybridclr-editor-abi-typecreatorbase-createtypeinfo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行-hybridclr-generate-xxx-时发生-nullreferenceexception-hybridclr-editor-abi-typecreatorbase-createtypeinfo"}},[t._v("#")]),t._v(" 运行 "),e("code",[t._v("HybridCLR/generate/xxx")]),t._v(" 时发生 "),e("code",[t._v("NullReferenceException. HybridCLR.Editor.ABI.TypeCreatorBase.CreateTypeInfo ...")])]),t._v(" "),e("p",[t._v("如果你的hybridclr_unity package版本低于 1.1.6,则因为你的项目中存在 mscorlib.dll、System.Memory.dll、UnityEngine.dll等跟系统dll重名的冲突dll，导致解析dll时错误地读取了这些dll，进而发生错误。")]),t._v(" "),e("p",[t._v("如果版本 >= 1.1.6, 由于生成桥接函数需要依赖裁减后的AOT dll，而你的AOT dll是旧的，导致热更新代码中依赖的类型在AOT dll中因为卸载而缺失了。因此你需要先 "),e("code",[t._v("generate/linkxml")]),t._v("，再build或者导出工程以生成裁剪后的aot dll，再运行你当前的 "),e("code",[t._v("generate/xxx")]),t._v(" 命令。 详细请看 "),e("RouterLink",{attrs:{to:"/hybridclr/build_pipeline/"}},[t._v("HybridCLR打包工作流")]),t._v("中\n生成桥接函数 这一节的文档。")],1),t._v(" "),e("h3",{attrs:{id:"运行-hybridclr-generate-xxx-时发生-dhe-start-not-found"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行-hybridclr-generate-xxx-时发生-dhe-start-not-found"}},[t._v("#")]),t._v(" 运行 "),e("code",[t._v("HybridCLR/generate/xxx")]),t._v(" 时发生 "),e("code",[t._v("DHE start not found")])]),t._v(" "),e("p",[t._v("mian分支已经移除了DHE相关的代码，相应的package版本1.1.6也移除了DHE相关生成。这个错误是因为你package版本低于1.1.6，但install了最新"),e("code",[t._v("hybridclr+il2cpp_plus")]),t._v("代码导致。")]),t._v(" "),e("p",[t._v("解决办法是升级package到1.1.6及更高版本。或者将package回退到1.0分支的版本，同时install 1.0分支相关的"),e("code",[t._v("hybridclr+il2cpp_plus")]),t._v("代码。")]),t._v(" "),e("h3",{attrs:{id:"打包ios版本时未生成-assembliespostil2cppstrip-目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包ios版本时未生成-assembliespostil2cppstrip-目录"}},[t._v("#")]),t._v(" 打包iOS版本时未生成 AssembliesPostIl2CppStrip 目录")]),t._v(" "),e("p",[t._v("Unity 2021版本打包"),e("code",[t._v("iOS平台")]),t._v("时，由于Unity Editor未提供公开接口可以复制出target为iOS时的裁剪后的AOT dll，故必须使用修改后的UnityEditor.CoreModule.dll覆盖Unity自带的相应文件。")]),t._v(" "),e("p",[t._v("详见 "),e("RouterLink",{attrs:{to:"/hybridclr/install/"}},[t._v("安装HybridCLR")]),t._v(" 及 "),e("RouterLink",{attrs:{to:"/hybridclr/modify_unity_dll/"}},[t._v("修改Unity编辑器相关dll")]),t._v("。")],1),t._v(" "),e("h3",{attrs:{id:"buildfailedexceptoin-build-path-contains-a-project-prevously-built-without-the-create-visual-studio-solution"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#buildfailedexceptoin-build-path-contains-a-project-prevously-built-without-the-create-visual-studio-solution"}},[t._v("#")]),t._v(' BuildFailedExceptoin: Build path contains a project prevously built without the "Create Visual Studio Solution"')]),t._v(" "),e("p",[t._v("运行 "),e("code",[t._v("generate/all")]),t._v("或者"),e("code",[t._v("generate/AOTDlls")]),t._v("时，会尝试进行导出工程以获得裁剪后的aot dll。如果你的项目之前打包时关闭了 "),e("code",[t._v("Create Visual Studio Solution")]),t._v(" 选项，则Unity Editor自身原因，一定概率下会出现这个错误。")]),t._v(" "),e("p",[t._v("解决办法是清空 Library和Temp下的 il2cpp 相关缓存目录，或者简单粗暴删除这两个目录。")]),t._v(" "),e("p",[t._v("如果还是遇到这个问题，你完全可以自己手动build一次工程来生成aot dll，然后跳过 "),e("code",[t._v("generate/AOTDlls")]),t._v("这一步。")]),t._v(" "),e("h3",{attrs:{id:"project-settings里面没有-hybridclr-settings"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#project-settings里面没有-hybridclr-settings"}},[t._v("#")]),t._v(" Project Settings里面没有 HybridCLR Settings")]),t._v(" "),e("p",[t._v("HybridclrSettings.asset 文件因为版本更迭的原因，配置无法兼容导致加载出错。")]),t._v(" "),e("p",[t._v("解决办法为 删除 "),e("code",[t._v("ProjectSettings/HybriclrSettings.assets")]),t._v(" 文件。")]),t._v(" "),e("h2",{attrs:{id:"打包时发生错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包时发生错误"}},[t._v("#")]),t._v(" 打包时发生错误")]),t._v(" "),e("h3",{attrs:{id:"currently-selected-scripting-backend-il2cpp-is-not-installed"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#currently-selected-scripting-backend-il2cpp-is-not-installed"}},[t._v("#")]),t._v(" Currently selected scripting backend (IL2CPP) is not installed")]),t._v(" "),e("p",[t._v("请在Unity Hub安装il2cpp模块。操作方式为：")]),t._v(" "),e("ul",[e("li",[t._v("切到UnityHub左侧的 Installers 标签页")]),t._v(" "),e("li",[t._v("你在当前使用的Unity版本上 "),e("code",[t._v("右键 -> Add Modules")]),t._v("，选中当前平台的IL2CPP组件，例如Win平台选 "),e("code",[t._v("Windows Build Support(Il2CPP)")])]),t._v(" "),e("li",[t._v("安装")]),t._v(" "),e("li",[t._v("重新打开Unity Editor")])]),t._v(" "),e("h3",{attrs:{id:"exception-c-code-bulider-is-unable-to-build-c-code-inorder-to-build-c-code-for-windows-destop-you-must-have-one-of-these-installed-xxxxx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exception-c-code-bulider-is-unable-to-build-c-code-inorder-to-build-c-code-for-windows-destop-you-must-have-one-of-these-installed-xxxxx"}},[t._v("#")]),t._v(" `Exception: C++ code bulider is unable to build C+ code. Inorder to build C++ code for Windows Destop, You must have one of these installed. xxxxx")]),t._v(" "),e("p",[t._v("你没有安装 vs 及 win 10 sdk。请安装vs，并且在 Visutal Studio Installer中安装 "),e("code",[t._v("使用c++的游戏开发")]),t._v(" 这个组件。 win 10 sdk选最新的即可。")]),t._v(" "),e("h3",{attrs:{id:"遇到undefined-symbols-for-architecture-arm64-il2cppcodegenwritebarrier-void-void-referenced-from"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到undefined-symbols-for-architecture-arm64-il2cppcodegenwritebarrier-void-void-referenced-from"}},[t._v("#")]),t._v(' 遇到Undefined symbols for architecture arm64:"Il2CppCodeGenWriteBarrier(void**, void*)", referenced from:...')]),t._v(" "),e("p",[t._v("取消PlayerSetting中"),e("code",[t._v("Increasemental GC")]),t._v("选项。")]),t._v(" "),e("h3",{attrs:{id:"遇到-undefined-symbols-for-architecture-arm64-objc-msgsend-initwithname-referenced-from-il2cpp-os-timezoneinfo-gettimezonedataforid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到-undefined-symbols-for-architecture-arm64-objc-msgsend-initwithname-referenced-from-il2cpp-os-timezoneinfo-gettimezonedataforid"}},[t._v("#")]),t._v(' 遇到 Undefined symbols for architecture arm64:  "_objc_msgSend$initWithName:", referenced from:      il2cpp::os::TimeZoneInfo::GetTimeZoneDataForID')]),t._v(" "),e("p",[t._v("xcode版本太旧导致。更新到较新版本。")]),t._v(" "),e("h3",{attrs:{id:"打包ios时出现-undefined-symbols-runtimeapi-loadmetadataforaotassembly-或-huatuoapi-loadmetadataforaotassembly"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包ios时出现-undefined-symbols-runtimeapi-loadmetadataforaotassembly-或-huatuoapi-loadmetadataforaotassembly"}},[t._v("#")]),t._v(" 打包iOS时出现 Undefined symbols： RuntimeApi_LoadMetadataForAOTAssembly 或 HuatuoApi_LoadMetadataForAOTAssembly")]),t._v(" "),e("p",[t._v("因为 你使用的是原始libil2cpp.a或者过时的libil2cpp.a。请根据 "),e("RouterLink",{attrs:{to:"/hybridclr/build_ios_libil2cpp/"}},[t._v("build iOS libil2cpp.a")]),t._v(" 文档编译最新的。然后替换xcode项目中的libil2cpp.a文件")],1),t._v(" "),e("h3",{attrs:{id:"building-library-bee-artifacts-xxxx-failed-with-output-fatalerror-in-unitiy-cil-linker-mono-cecil-assemblyresolutionexception-failed-to-resolve-assembly-xxx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#building-library-bee-artifacts-xxxx-failed-with-output-fatalerror-in-unitiy-cil-linker-mono-cecil-assemblyresolutionexception-failed-to-resolve-assembly-xxx"}},[t._v("#")]),t._v(" Building Library/Bee/artifacts/xxxx failed with output: Fatalerror in Unitiy CIL Linker Mono.Cecil.AssemblyResolutionException: Failed to resolve assembly:'xxx'")]),t._v(" "),e("p",[t._v("你失误地在主工程里引用 'xxx' 这个热更新dll。 如果你找不到到底哪儿引用的，可以尝试先删掉 'xxx' 这个热更新模块，根据编译错误来定位。")]),t._v(" "),e("h3",{attrs:{id:"webgl平台打包时遇到-undefine-symbol-send-file-之类的错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webgl平台打包时遇到-undefine-symbol-send-file-之类的错误"}},[t._v("#")]),t._v(" WebGL平台打包时遇到 undefine symbol: send file 之类的错误")]),t._v(" "),e("p",[t._v("这个错误跟HybridCLR无关。 这是因为WebGL对很多函数有限制，比如说send file符号丢失是因为不能调用IO相关函数。")]),t._v(" "),e("p",[t._v("遇到问题请自己剔除那些WebGL平台不支持函数。具体自己阅读Unity文档。")]),t._v(" "),e("h3",{attrs:{id:"win-下-打包时遇到-xxxx-il2cpp-libil2cpp-utils-il2cpphashmap-h-71-error-c2039-hash-compare-is-not-a-member-of-stdext"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#win-下-打包时遇到-xxxx-il2cpp-libil2cpp-utils-il2cpphashmap-h-71-error-c2039-hash-compare-is-not-a-member-of-stdext"}},[t._v("#")]),t._v(" Win 下 打包时遇到 xxxx\\il2cpp\\libil2cpp\\utils\\Il2CppHashMap.h(71): error C2039: 'hash_compare': is not a member of 'stdext'")]),t._v(" "),e("p",[t._v("这是.net 7发布后最新版本vs改动打破了一些向后兼容性引起。你可以回退2022的旧版本或者使用2019之类的版本。")]),t._v(" "),e("p",[t._v("一种不需要回退vs版本的解决办法是修改 "),e("code",[t._v("HybridCLRData/LocalIl2CppData-{platform}/il2cpp/external/google/sparsehash/internal/sparseconfig.h")]),t._v("，新增 "),e("code",[t._v("#define _SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS")]),t._v(" 即可。可参照下图修改。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/img/hybridclr/stdext_error.jpg",alt:"stdext_error"}})]),t._v(" "),e("p",[t._v("其他解决办法参见"),e("a",{attrs:{href:"https://forum.unity.com/threads/workaround-for-building-with-il2cpp-with-visual-studio-2022-17-4.1355570/",target:"_blank",rel:"noopener noreferrer"}},[t._v("链接"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"fatal-error-icalls-mscorlib-system-monotype-h-file-not-found-include-icalls-mscorlib-system-monotype-h"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fatal-error-icalls-mscorlib-system-monotype-h-file-not-found-include-icalls-mscorlib-system-monotype-h"}},[t._v("#")]),t._v(" fatal error: 'icalls/mscorlib/System/MonoType.h' file not found #include \"icalls/mscorlib/System/MonoType.h\"")]),t._v(" "),e("p",[t._v("hybridclr依赖版本宏来同时支持2019-2021的il2cpp。hybridclr代码中版本宏默认是2020版本，如果你使用的不是2020，则会因为版本宏不正确而发生编译错误。你必须将hybridclr_unity更新了0.10.0或更高版本，再运行  "),e("code",[t._v("HybridCLR/generate/il2cppdef")]),t._v(" 来生成正确的版本宏。")]),t._v(" "),e("h3",{attrs:{id:"internal-build-system-error-buildprogram-exited-with-code-2147024894"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#internal-build-system-error-buildprogram-exited-with-code-2147024894"}},[t._v("#")]),t._v(" Internal build system error. BuildProgram exited with code -2147024894.")]),t._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Internal build system error. BuildProgram exited with code -2147024894.\nSystem.IO.FileNotFoundException: Could not load file or assembly 'Unity.IL2CPP.Bee.BuildLogic.WindowsDesktop, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'. \nFile name: 'Unity.IL2CPP.Bee.BuildLogic.WindowsDesktop, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("这是因为你Installer中安装后切换了Unity项目的版本，导致Build Tool不匹配导致。解决办法为在"),e("code",[t._v("HybridCLR/Installer...")]),t._v("中重新安装一次即可。")]),t._v(" "),e("h3",{attrs:{id:"打包时出现-directorynotfoundexception-xxxx-library-bee-artifacts-yyyy-managedstripted-错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包时出现-directorynotfoundexception-xxxx-library-bee-artifacts-yyyy-managedstripted-错误"}},[t._v("#")]),t._v(" 打包时出现 DirectoryNotFoundException: xxxx\\Library\\Bee\\artifacts\\yyyy\\ManagedStripted 错误")]),t._v(" "),e("p",[t._v("你错误地设置 Scripting BackEngine 为 mono导致的。有时候你尽管之前已经切到il2cpp了，但切换平台时仍然可能被Editor重置为mono。解决办法为切换到il2cpp即可。")]),t._v(" "),e("h3",{attrs:{id:"打包webgl平台时出现-directorynotfoundexception-xxx-hybridclrdata-localil2cppdata-yyy-il2cpp-il2cpp-deps-错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包webgl平台时出现-directorynotfoundexception-xxx-hybridclrdata-localil2cppdata-yyy-il2cpp-il2cpp-deps-错误"}},[t._v("#")]),t._v(" 打包WebGL平台时出现 DirectoryNotFoundException: xxx\\HybridCLRData\\LocalIl2CppData-{yyy}\\il2cpp\\il2cpp-deps  错误")]),t._v(" "),e("p",[t._v("WebGL必须使用全局安装，即 HybridCLRSettings中useGlobal为true。 切记\n每次"),e("code",[t._v("Generate/xxx")]),t._v("之后必须重新将"),e("code",[t._v("{project}/HyridCLRData/LocalIl2CppData-{platform}/il2cpp/libil2cpp")]),t._v("目录复制到Editor安装目录，再打包。否则有可能会出现 Scripting Missing或者桥接函数缺失之类的错误。")]),t._v(" "),e("h3",{attrs:{id:"打包时出现-gc-set-mark-stck-empty-函数找不到或者签名不匹配的错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包时出现-gc-set-mark-stck-empty-函数找不到或者签名不匹配的错误"}},[t._v("#")]),t._v(" 打包时出现 GC_set_mark_stck_empty 函数找不到或者签名不匹配的错误")]),t._v(" "),e("p",[t._v("这是自Unity2021.3.20起修改了这个函数签名引发的问题。更新到hybridclr_unity 2.0.10+ 版本，重新install即可解决。")]),t._v(" "),e("h3",{attrs:{id:"打包webgl平台出现-build-js-undefined-symbol-runtimeapi-loadmetadataforaotassembly-referenced-by-top-level-compiled-c-c-code"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包webgl平台出现-build-js-undefined-symbol-runtimeapi-loadmetadataforaotassembly-referenced-by-top-level-compiled-c-c-code"}},[t._v("#")]),t._v(" 打包WebGL平台出现 "),e("code",[t._v("build.js: undefined symbol: RuntimeApi_LoadMetadataForAOTAssembly (referenced by top-level compiled C/C++ code)")])]),t._v(" "),e("p",[t._v("WebGL使用全局安装，你没有将本地"),e("code",[t._v("{project}/HyridCLRData/LocalIl2CppData-{platform}/il2cpp/libil2cpp")]),t._v("替换Editor安装目录的原始libil2cpp，导致缺失了函数。解决办法是：")]),t._v(" "),e("ul",[e("li",[t._v("运行"),e("code",[t._v("HybridCLR/Generate/Il2cppDef")]),t._v("生成正确的版本宏")]),t._v(" "),e("li",[t._v("复制 "),e("code",[t._v("{project}/HyridCLRData/LocalIl2CppData-{platform}/il2cpp/libil2cpp")]),t._v(" 替换Editor安装目录的原始libil2cpp。注意必须是替换目录，而不是合并目录，这个可能会导致多了一些文件而编译出错。你也可以使用创建软链接的方式，详细请看"),e("RouterLink",{attrs:{to:"/hybridclr/install/"}},[t._v("安装HybridCLR")]),t._v("中关于全局安装的文档。")],1)]),t._v(" "),e("h3",{attrs:{id:"打包webgl平台点击generate-all发生错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包webgl平台点击generate-all发生错误"}},[t._v("#")]),t._v(" 打包WebGL平台点击"),e("code",[t._v("Generate/All")]),t._v("发生错误")]),t._v(" "),e("p",[t._v("有两个原因：")]),t._v(" "),e("ul",[e("li",[t._v("没有替换全局安装位置的libil2cpp或者创建其软链接")]),t._v(" "),e("li",[t._v("你使用了hybridclr_unity 2.1.0或更高版本，在替换全局libil2cpp前没有先运行一次"),e("code",[t._v("HybridCLR/Generate/Il2cppDef")]),t._v("，导致没有正确生成版本宏，进而引发编译错误。")])]),t._v(" "),e("h3",{attrs:{id:"打包出现-error-not-support-unity-version"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包出现-error-not-support-unity-version"}},[t._v("#")]),t._v(" 打包出现 "),e("code",[t._v('#error: "not support unity version"')])]),t._v(" "),e("p",[t._v("有几种原因：")]),t._v(" "),e("ul",[e("li",[t._v("你使用了 低于2019或者高于2021的版本，这些版本目前未被支持")]),t._v(" "),e("li",[t._v("你打包前未运行"),e("code",[t._v("HybridCLR/Generate/All")]),t._v("或者"),e("code",[t._v("HybridCLR/Generate/Il2CppDef")]),t._v("，导致未生成Unity版本宏")])]),t._v(" "),e("h3",{attrs:{id:"打包时出现-could-not-find-a-part-of-path-xxxx-hybridclr-generated-unityversion-h"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包时出现-could-not-find-a-part-of-path-xxxx-hybridclr-generated-unityversion-h"}},[t._v("#")]),t._v(' 打包时出现 \'could not find a part of path "xxxx/hybridclr/generated/UnityVersion.h"')]),t._v(" "),e("p",[t._v("你更新 hybridclr_unity包后未重新install，导致本地lil2cpp目录代码过旧。")]),t._v(" "),e("h3",{attrs:{id:"打包里发现-undefined-symbols-for-architecture-arm64-il2cpp-utils-debugger-xxxxx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包里发现-undefined-symbols-for-architecture-arm64-il2cpp-utils-debugger-xxxxx"}},[t._v("#")]),t._v(' 打包里发现 "Undefined symbols for architecture arm64: "il2cpp::utils::Debugger::xxxxx"')]),t._v(" "),e("p",[t._v("原因是 build_libil2cpp.sh打包出的 libil2cpp.a是 release模式的，与development模式的工程一起编译时会出现编译错误。")]),t._v(" "),e("p",[t._v("解决办法是去掉development build选项，或者说自己修改 build_libil2cpp.sh，打包出 debug模式的libil2cpp.a")]),t._v(" "),e("h3",{attrs:{id:"打包时出现编译错误-通用处理办法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包时出现编译错误-通用处理办法"}},[t._v("#")]),t._v(" 打包时出现编译错误，通用处理办法")]),t._v(" "),e("p",[t._v("很大程度是你的package 和 hybridclr c++代码版本不匹配导致的。 你需要：")]),t._v(" "),e("ul",[e("li",[t._v("hybridclr_unity 更新到最新")]),t._v(" "),e("li",[e("code",[t._v("HybridCLR/installer...")]),t._v(" 里安装最新版本")]),t._v(" "),e("li",[e("code",[t._v("HybridCLR/generate/all")]),t._v(" 生成所有")]),t._v(" "),e("li",[t._v("打包")])]),t._v(" "),e("h2",{attrs:{id:"运行时错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行时错误"}},[t._v("#")]),t._v(" 运行时错误")]),t._v(" "),e("h3",{attrs:{id:"entrypointnotfoundexception-unable-to-find-entry-point-named-runtimeapi-loadmetadataforaotassembly-in-gameassembly"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#entrypointnotfoundexception-unable-to-find-entry-point-named-runtimeapi-loadmetadataforaotassembly-in-gameassembly"}},[t._v("#")]),t._v(" EntryPointNotFoundException. Unable to find entry point named 'RuntimeApi_LoadMetadataForAOTAssembly' in 'GameAssembly`")]),t._v(" "),e("p",[t._v("你当前的scripting backend为mono，请切换到il2cpp。")]),t._v(" "),e("h3",{attrs:{id:"a-scripted-object-probably-xxx-has-a-different-serialization-layout-when-loading-did-you-ifdef-unity-editor-a-section-of-your-serialized-properties-in-any-of-your-scripts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a-scripted-object-probably-xxx-has-a-different-serialization-layout-when-loading-did-you-ifdef-unity-editor-a-section-of-your-serialized-properties-in-any-of-your-scripts"}},[t._v("#")]),t._v(" A scripted object (probably XXX?) has a different serialization layout when loading. Did you #ifdef UNITY_EDITOR a section of your serialized properties in any of your scripts?")]),t._v(" "),e("p",[t._v("主工程的AOT资源中引用了热更新脚本会导致这个错误。例如Resources下的资源引用了热更新脚本。")]),t._v(" "),e("h3",{attrs:{id:"挂载在资源上的脚本出现-script-missing-错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#挂载在资源上的脚本出现-script-missing-错误"}},[t._v("#")]),t._v(" 挂载在资源上的脚本出现 Script Missing 错误")]),t._v(" "),e("p",[t._v("有几种原因：")]),t._v(" "),e("ul",[e("li",[t._v("如果是iOS平台，有可能因为你在热更新dll列表变化后未"),e("code",[t._v("Generate/all")]),t._v("并且重新编译和替换libil2cpp.a文件。")]),t._v(" "),e("li",[t._v("如果你使用Unity 2021及以上版本，并且WebGL平台，需要hybridclr_unity版本 >= 2.0.9")]),t._v(" "),e("li",[t._v("如果是其他版本及平台，由于Unity的资源管理的实现机制，资源必须打包为AssetBundle才能正常恢复热更新脚本，放到Resource下不行。详情请看 "),e("RouterLink",{attrs:{to:"/hybridclr/monobehaviour/"}},[t._v("MonoBehaviour工作流")]),t._v("。")],1),t._v(" "),e("li",[t._v("如果你安装了最新的main分支的hybridclr，则要求hybridclr_unity package版本 >= 1.1.17")])]),t._v(" "),e("h3",{attrs:{id:"遇到-this-icall-is-not-supported-by-il2cpp-at-system-appdomain-load"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到-this-icall-is-not-supported-by-il2cpp-at-system-appdomain-load"}},[t._v("#")]),t._v(' 遇到  "This icall is not supported by il2cpp at System.AppDomain.Load"')]),t._v(" "),e("p",[t._v("有两种原因")]),t._v(" "),e("ol",[e("li",[t._v("如果非ios平台，则因为未安装HybridCLR。请参照"),e("RouterLink",{attrs:{to:"/hybridclr/install/"}},[t._v("安装HybridCLR")]),t._v("文档操作。")],1),t._v(" "),e("li",[t._v("如果ios平台，因为ios平台并不从源码编译libil2cpp，而是使预先编译好的libil2cpp.a，你需要替换xcode工程中的libil2cpp.a为HybridCLR的编译版本。编译方式请看"),e("RouterLink",{attrs:{to:"/hybridclr/build_ios_libil2cpp/"}},[t._v("build libil2cpp.a for iOS")])],1)]),t._v(" "),e("h3",{attrs:{id:"unsupported-internal-call-for-il2cpp-xxxx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unsupported-internal-call-for-il2cpp-xxxx"}},[t._v("#")]),t._v(" unsupported internal call for il2cpp. xxxx")]),t._v(" "),e("p",[t._v("调用了一个Mono中存在，但在il2cpp未实现的函数。请修改代码，不要使用这些类和函数。")]),t._v(" "),e("h3",{attrs:{id:"遇到async-调用editor和打包后执行不一致的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到async-调用editor和打包后执行不一致的问题"}},[t._v("#")]),t._v(" 遇到Async 调用Editor和打包后执行不一致的问题")]),t._v(" "),e("p",[t._v("如果代码在async里抛了异常，又没有捕获异常，会导致悄无声息失败，目前万一在async里因为裁剪或者aot泛型原因出错，会出现这种没有任何错误提示的情况。从而导致出现行为不一致。")]),t._v(" "),e("p",[t._v("解决方案：捕获async异常，然后解决对应异常。")]),t._v(" "),e("h3",{attrs:{id:"遇到-unity-typeloadexception-could-not-load-type-xxxtype-from-assembly-yyyassembly"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到-unity-typeloadexception-could-not-load-type-xxxtype-from-assembly-yyyassembly"}},[t._v("#")]),t._v(" 遇到 Unity: TypeLoadException: Could not load type 'XxxType' from assembly 'yyyAssembly'")]),t._v(" "),e("p",[t._v("分几情况：")]),t._v(" "),e("h4",{attrs:{id:"情况1-yyyassembly-是-netstandard"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#情况1-yyyassembly-是-netstandard"}},[t._v("#")]),t._v(" 情况1：yyyAssembly 是 netstandard")]),t._v(" "),e("p",[t._v("这是因为你Player Settings里 "),e("code",[t._v("api compatible level")]),t._v(" 设置为 .net standard。")]),t._v(" "),e("p",[t._v("目前支持.net standard 2.0和.net 4.x，但即使主工程打包用.net standard，热更新dll打包"),e("strong",[t._v("必须用.net 4.x")]),t._v("。原因是unity使用.net standard打包时，会自动剥除.net standard的依赖，直接依赖最终的dll，导致主工程的dll列表中实际上不存在net standard这个dll，进而导致热更新dll加载时，找不到来自netstandard的对象。")]),t._v(" "),e("p",[t._v("解决办法为打包和编译热更新都用.net 4.x或者打包用.net standard 2.0但编译热更新部分时api compatible level切换为.net 4.x(2021 起改名为 .net framework)。")]),t._v(" "),e("h4",{attrs:{id:"情况2-yyyassembly是-其他aot-assembly"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#情况2-yyyassembly是-其他aot-assembly"}},[t._v("#")]),t._v(" 情况2：yyyAssembly是 其他AOT assembly")]),t._v(" "),e("p",[t._v("这是unity代码裁剪引起的函数丢失，你使用常规的避免unity代码裁剪的方式处理即可。")]),t._v(" "),e("p",[t._v("按照Unity防裁剪原理，你在link.xml中添加对丢失代码类的引用即可，但这种事情费时费力。")]),t._v(" "),e("p",[t._v("HybridCLR提供了快捷的自动生成工具，运行菜单命令 "),e("code",[t._v("HybridCLR/Genrate/LinkXml")]),t._v(" 根据热更新dll生成 link.xml。")]),t._v(" "),e("p",[e("strong",[t._v("注意")]),t._v("，如果你发现在link.xml确实preserve了这个类，但仍然出现这种类型缺失的错误，这是Unity自身引起的。Unity要求必须在代码里引用过dll里的任意类，才会保留这个dll，link中的那些配置才会生效。因此需要你手动在代码里引用缺失的这个类所在的dll里的任意一个类即可。")]),t._v(" "),e("h4",{attrs:{id:"情况3-yyyassembly是热更新assembly"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#情况3-yyyassembly是热更新assembly"}},[t._v("#")]),t._v(" 情况3：yyyAssembly是热更新assembly")]),t._v(" "),e("p",[t._v("这是因为你没有按照依赖顺序加载热更新dll。例如，如果A依赖于B，那你应该先加载B，再加载A。")]),t._v(" "),e("h3",{attrs:{id:"遇到-missingmethodexception-xxx-错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到-missingmethodexception-xxx-错误"}},[t._v("#")]),t._v(" 遇到  MissingMethodException xxx 错误")]),t._v(" "),e("p",[t._v("区分两种情况：")]),t._v(" "),e("h4",{attrs:{id:"情况1-missingmethodexception-aot-generic-method-isn-t-instantiated-in-aot-module-xxx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#情况1-missingmethodexception-aot-generic-method-isn-t-instantiated-in-aot-module-xxx"}},[t._v("#")]),t._v(" 情况1： MissingMethodException: AOT generic method isn't instantiated in aot module xxx")]),t._v(" "),e("p",[t._v("有几个原因：")]),t._v(" "),e("ul",[e("li",[t._v("这是因为AOT泛型函数实例化缺失引起的")]),t._v(" "),e("li",[t._v("使用了Unity 2021并且 "),e("code",[t._v("Il2Cpp Code Generation")]),t._v(" 选项为 "),e("code",[t._v("faster runtime")]),t._v("，导致生成的代码为完全泛型模式，所有泛型函数签名均发生变化。如果没有补充元数据，调用即使已经在AOT中实例化的泛型函数，仍然会出现这个错误。")]),t._v(" "),e("li",[t._v("微信小游戏转换工具，默认会将IL2CPP Code Generation设置为Faster(Smaller) builds模式，如果未补充元数据，会导致无法访问AOT泛型函数。")])]),t._v(" "),e("p",[t._v("原因1的解决办法为：")]),t._v(" "),e("ul",[e("li",[t._v("错误日志告诉你缺失哪个AOT函数实例化，你就在主工程里加上对这个函数的调用，使得il2cpp在打包时能生成这个泛型函数的代码。 主工程里任意地方加个这个泛型AOT函数调用都可以，目前一般集中加到 RefTypes.cs 这个文件里。")]),t._v(" "),e("li",[t._v("使用补充元数据技术")])]),t._v(" "),e("p",[t._v("原因2的解决办法为：")]),t._v(" "),e("ul",[e("li",[t._v("使用补充元数据技术")])]),t._v(" "),e("p",[t._v("原因3的解决办法：")]),t._v(" "),e("ul",[e("li",[t._v("使用补充元数据技术")]),t._v(" "),e("li",[t._v("自己改微信工具源码，将BuildSettings中 "),e("code",[t._v("IL2CPP Code Generation")]),t._v(" 设置为 "),e("code",[t._v("Faster")]),t._v("。")])]),t._v(" "),e("p",[t._v("具体操作请看"),e("RouterLink",{attrs:{to:"/hybridclr/aot_generic/"}},[t._v("AOT泛型原理介绍")]),t._v(" 文档。")],1),t._v(" "),e("h4",{attrs:{id:"情况2-错误日志中未出现aot-generic-method的字眼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#情况2-错误日志中未出现aot-generic-method的字眼"}},[t._v("#")]),t._v(" 情况2： 错误日志中未出现AOT generic method的字眼")]),t._v(" "),e("p",[t._v("这是unity代码裁剪引起的函数丢失，你使用常规的避免unity代码裁剪的方式处理即可。")]),t._v(" "),e("p",[t._v("按照Unity防裁剪原理，你在link.xml中添加对丢失代码类的引用即可，但这种事情费时费力。")]),t._v(" "),e("p",[t._v("HybridCLR提供了快捷的自动生成工具，运行菜单命令 "),e("code",[t._v("HybridCLR/Genrate/LinkXml")]),t._v(" 根据热更新dll生成 link.xml")]),t._v(" "),e("h3",{attrs:{id:"遇到-executionengineexception-image-readtypefromresolutionscope-readtypefromresolutionscope-typeref-fail"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到-executionengineexception-image-readtypefromresolutionscope-readtypefromresolutionscope-typeref-fail"}},[t._v("#")]),t._v(" 遇到'ExecutionEngineException: Image::ReadTypeFromResolutionScope ReadTypeFromResolutionScope.TYPEREF fail'")]),t._v(" "),e("p",[t._v("由裁剪引起，裁剪的是类的内部类。处理方式同上。")]),t._v(" "),e("h3",{attrs:{id:"遇到-executionengineexception-metadata-type-not-match"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到-executionengineexception-metadata-type-not-match"}},[t._v("#")]),t._v(" 遇到 ExecutionEngineException: metadata type not match")]),t._v(" "),e("p",[t._v("在 LoadMetadataForAOTAssembly 方法中，载入的dll，使用了裁剪之前的版本。应该使用裁剪之后的，具体使用可以参照hybridclr_trial项目。在BuildProcessor中，生成裁剪后的dll后，将dll拷贝到暂存目录。")]),t._v(" "),e("h3",{attrs:{id:"遇到executionengineexception-not-support-extern-method-xxxx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到executionengineexception-not-support-extern-method-xxxx"}},[t._v("#")]),t._v(" 遇到ExecutionEngineException: not support extern method: xxxx")]),t._v(" "),e("p",[t._v("有两种原因：")]),t._v(" "),e("ul",[e("li",[t._v("在热更新中定义了extern函数，这暂时不支持。解决办法是将extern函数移到AOT部分。")]),t._v(" "),e("li",[t._v("使用了SuperSet元数据格式，但补充元数据aot dll太旧，导致AOT中的泛型在补充元数据dll中找不到。解决办法是更新最新的AOT dll。")])]),t._v(" "),e("h3",{attrs:{id:"遇到executionengineexception-method-body-is-null-xxx-yyyy"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到executionengineexception-method-body-is-null-xxx-yyyy"}},[t._v("#")]),t._v(" 遇到ExecutionEngineException:method body is null. xxx::yyyy")]),t._v(" "),e("p",[t._v("原因同上。")]),t._v(" "),e("h3",{attrs:{id:"遇到-executionengineexception-getmanaged2nativemethodpointer-not-support-xxxx-函数名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到-executionengineexception-getmanaged2nativemethodpointer-not-support-xxxx-函数名"}},[t._v("#")]),t._v(" 遇到 ExecutionEngineException: GetManaged2NativeMethodPointer not support. xxxx 函数名")]),t._v(" "),e("p",[t._v("缺失 interpreter -> aot 方向的桥接函数。请先确认你的 hybridclr是最新代码， hybridclr_unity package也是最新版本，\n并且已经生成最新的桥接函数。原理请参考 "),e("RouterLink",{attrs:{to:"/hybridclr/method_bridge/"}},[t._v("桥接函数")]),t._v(" 。")],1),t._v(" "),e("p",[t._v("如果是iOS平台，则很大可能因为你没有生成最新的libil2cpp.a。")]),t._v(" "),e("p",[t._v("如果还有问题，请在群里反馈给管理员 技术支持。")]),t._v(" "),e("h3",{attrs:{id:"遇到-executionengineexception-notsupportnative2managed"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到-executionengineexception-notsupportnative2managed"}},[t._v("#")]),t._v(" 遇到'ExecutionEngineException: NotSupportNative2Managed'")]),t._v(" "),e("p",[t._v("缺失 aot -> interpreter 方向的桥接函数。请先确认你的 hybridclr是最新代码， hybridclr_unity package也是最新版本，\n并且已经生成最新的桥接函数。原理请参考 "),e("RouterLink",{attrs:{to:"/hybridclr/method_bridge/"}},[t._v("桥接函数")]),t._v(" 。")],1),t._v(" "),e("p",[t._v("如果还有问题，请在群里反馈给管理员 技术支持。")]),t._v(" "),e("h3",{attrs:{id:"executionengineexception-attempting-to-call-method-xxxx-for-which-no-ahead-of-time-aot-code-was-generated"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#executionengineexception-attempting-to-call-method-xxxx-for-which-no-ahead-of-time-aot-code-was-generated"}},[t._v("#")]),t._v(" ExecutionEngineException: Attempting to call method 'xxxx' for which no ahead of time (AOT) code was generated.")]),t._v(" "),e("p",[t._v("为出错的函数所在的dll补充元数据即可。")]),t._v(" "),e("h3",{attrs:{id:"methodaccessexception-错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#methodaccessexception-错误"}},[t._v("#")]),t._v(" MethodAccessException 错误")]),t._v(" "),e("p",[t._v("你失误开启了增量式GC导致对象内存覆盖。请在player settings里关闭增量式gc")]),t._v(" "),e("h3",{attrs:{id:"getreversepinvokewrapper-fail-exceed-max-wrapper-num-of-method"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getreversepinvokewrapper-fail-exceed-max-wrapper-num-of-method"}},[t._v("#")]),t._v(" GetReversePInvokeWrapper fail. exceed max wrapper num of method")]),t._v(" "),e("p",[t._v("Wrapper函数不足。你需要为热更新中的添加了MonoPInvokeCallback特性的函数预留Wrapper函数，详见"),e("RouterLink",{attrs:{to:"/hybridclr/monopinvokecallback/"}},[t._v("MonoPInvokeCallback支持")])],1),t._v(" "),e("h3",{attrs:{id:"使用addressable进行热更新时-加载资源出现-unityengine-addressableassets-invlidkeyexception-exception-of-type-unityengine-addressableassets-invalidkeyexception-was-thrown-no-asset-found-with-for-key-xxxx-异常"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用addressable进行热更新时-加载资源出现-unityengine-addressableassets-invlidkeyexception-exception-of-type-unityengine-addressableassets-invalidkeyexception-was-thrown-no-asset-found-with-for-key-xxxx-异常"}},[t._v("#")]),t._v(" 使用addressable进行热更新时，加载资源出现 UnityEngine.AddressableAssets.InvlidKeyException: Exception of type 'UnityEngine.AddressableAssets.InvalidKeyException' was thrown. No Asset found with for key 'xxxx' 异常")]),t._v(" "),e("p",[t._v("原因是addressable默认加载时会初始化资源中的所有类型，而此时热更新dll还未加载，找不到相应热更新类型。")]),t._v(" "),e("p",[t._v("解决办法有如下几种：")]),t._v(" "),e("ul",[e("li",[t._v("使用LoadAsset<System.Object>接口加载后再强转")]),t._v(" "),e("li",[t._v("是关闭自动加载，然后手动加载热更新dll，再接着自动加载资源。参见视频"),e("a",{attrs:{href:"https://www.bilibili.com/video/BV1aP4y1o7xi/",target:"_blank",rel:"noopener noreferrer"}},[t._v("踩坑实战:将HybridCLR导入自己的项目并实现热更新"),e("OutboundLink")],1),t._v(" 1:02:30起的内容。")])]),t._v(" "),e("h3",{attrs:{id:"gameobject-getcomponent-string-name-接口无法获得组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gameobject-getcomponent-string-name-接口无法获得组件"}},[t._v("#")]),t._v(" GameObject.GetComponent(string name) 接口无法获得组件")]),t._v(" "),e("p",[t._v("这是已知bug，跟unity的代码实现有关，只有挂载在热更新资源上热更新脚本才会有这个问题，通过代码中AddComponent添加的热更新脚本是可以用这个方法查找到。请改用 "),e("code",[t._v("GameObject.GetComponent<T>()")]),t._v(" 或 "),e("code",[t._v("GameObject.GetComponent(typeof(T))")])]),t._v(" "),e("h3",{attrs:{id:"使用-unity-netcode-runtime-后出现-notsupportnative2managed-桥接函数缺失异常"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-unity-netcode-runtime-后出现-notsupportnative2managed-桥接函数缺失异常"}},[t._v("#")]),t._v(" 使用 Unity.netcode.runtime 后出现 NotSupportNative2Managed 桥接函数缺失异常")]),t._v(" "),e("p",[t._v("原因是 在Unity.netcode.runtime.dll中 NetworkManager.RpcReceiveHandler 是internal， 定义如下")]),t._v(" "),e("div",{staticClass:"language-csharp line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-csharp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("internal")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delegate")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("RpcReceiveHandler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NetworkBehaviour")]),t._v(" behaviour"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FastBufferReader")]),t._v(" reader"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("__RpcParams")]),t._v(" parameters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("导致生成工具没有为它生成桥接函数。但Unity又非常trick地在打包时为 标记了 "),e("code",[t._v("[ClientRpc]")]),t._v(" 和 "),e("code",[t._v("[ServerRpc]")]),t._v(" 的函数生成 RpcReceiveHandler\n处理函数，并且引用了 internal 的RpcReceiveHandler类！居然没报错。 导致出现桥接函数缺失的问题。")]),t._v(" "),e("p",[t._v("原始代码如下。")]),t._v(" "),e("div",{staticClass:"language-csharp line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-csharp"}},[e("code",[t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NetworkPlayer")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token type-list"}},[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NetworkBehaviour")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" msgFromHost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" msgFromClient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token attribute"}},[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClientRpc")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SendMsgClientRpc")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" msgFromHost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        NetworkPlayer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msgFromHost "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msgFromHost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token attribute"}},[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerRpc")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SendMsgServerRpc")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" msgFromClient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        NetworkPlayer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msgFromClient "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msgFromClient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br")])]),e("p",[t._v("打包时生成的代码添加了几个函数，如下。")]),t._v(" "),e("div",{staticClass:"language-csharp line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-csharp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NetworkPlayer")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token type-list"}},[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NetworkBehaviour")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" msgFromHost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" msgFromClient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token attribute"}},[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClientRpc")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SendMsgClientRpc")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" msgFromHost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token attribute"}},[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerRpc")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SendMsgServerRpc")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" msgFromClient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("NetworkPlayer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// NetworkManager.__rpc_func_table 在自己的代码里是无法访问的！因为它是internal")]),t._v("\n      NetworkManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__rpc_func_table"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3066788814u")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __rpc_handler_3066788814"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      NetworkManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__rpc_func_table"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("901396020u")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __rpc_handler_901396020"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("__rpc_handler_3066788814")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NetworkBehaviour")]),t._v(" target"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FastBufferReader")]),t._v(" reader"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("__RpcParams")]),t._v(" rpcParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("__rpc_handler_901396020")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NetworkBehaviour")]),t._v(" target"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FastBufferReader")]),t._v(" reader"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("__RpcParams")]),t._v(" rpcParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("internal")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("__getTypeName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NetworkPlayer"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br"),e("span",{staticClass:"line-number"},[t._v("27")]),e("br"),e("span",{staticClass:"line-number"},[t._v("28")]),e("br"),e("span",{staticClass:"line-number"},[t._v("29")]),e("br"),e("span",{staticClass:"line-number"},[t._v("30")]),e("br"),e("span",{staticClass:"line-number"},[t._v("31")]),e("br"),e("span",{staticClass:"line-number"},[t._v("32")]),e("br"),e("span",{staticClass:"line-number"},[t._v("33")]),e("br"),e("span",{staticClass:"line-number"},[t._v("34")]),e("br"),e("span",{staticClass:"line-number"},[t._v("35")]),e("br"),e("span",{staticClass:"line-number"},[t._v("36")]),e("br"),e("span",{staticClass:"line-number"},[t._v("37")]),e("br"),e("span",{staticClass:"line-number"},[t._v("38")]),e("br"),e("span",{staticClass:"line-number"},[t._v("39")]),e("br"),e("span",{staticClass:"line-number"},[t._v("40")]),e("br"),e("span",{staticClass:"line-number"},[t._v("41")]),e("br")])]),e("p",[t._v("解决办法为你在AOT工程里也定义一个相同签名的delegate。")]),t._v(" "),e("div",{staticClass:"language-csharp line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-csharp"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 由于 __RpcParams也是internal的，我们这儿自己重新定义了一个一样的类型")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("__RpcParams")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token preprocessor property"}},[t._v("#"),e("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("pragma")]),t._v(" warning restore IDE1006 ")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// restore naming rule violation check")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerRpcParams")]),t._v(" Server"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClientRpcParams")]),t._v(" Client"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delegate")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyRpcReceiveHandler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NetworkBehaviour")]),t._v(" behaviour"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FastBufferReader")]),t._v(" reader"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("__RpcParams")]),t._v(" parameters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);