(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{464:function(t,a,e){"use strict";e.r(a);var s=e(7),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"localization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#localization"}},[t._v("#")]),t._v(" localization")]),t._v(" "),a("p",[t._v("Multiple localization mechanisms are supported to deal with different occasions respectively, and they can be used at the same time.")]),t._v(" "),a("h2",{attrs:{id:"static-text-value-localization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#static-text-value-localization"}},[t._v("#")]),t._v(" Static text value localization")]),t._v(" "),a("p",[t._v("For text values that need to be localized, the localization conversion has been completed when the configuration is exported, which is suitable for different packages or different configurations in different regions. Static text value localization is achieved through the following aspects:")]),t._v(" "),a("ul",[a("li",[t._v("Use the text type to identify strings that need to be localized. The text type consists of two fields, key and value.")]),t._v(" "),a("li",[t._v("Use the localization mapping table to provide mappings from text to other languages")]),t._v(" "),a("li",[t._v("The text that has not been localized is output to a file separately, so that it is convenient to know which text values have not completed the localization mapping")])]),t._v(" "),a("h3",{attrs:{id:"example-table-that-needs-localization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-table-that-needs-localization"}},[t._v("#")]),t._v(" Example table that needs localization")]),t._v(" "),a("table",{attrs:{border:"1"}},[a("tr",{attrs:{align:"center"}},[a("td",[t._v("##var")]),t._v(" "),a("td",[t._v("id")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("name")]),t._v(" "),a("td",[t._v("desc")]),t._v(" "),a("td",[t._v("count")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td",[t._v("##type")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("text")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("int")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("1")]),t._v(" "),a("td",[t._v("/demo/key1")]),a("td",[t._v("Apple")]),t._v(" "),a("td",[t._v("This is an apple")]),t._v(" "),a("td",[t._v("100")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("2")]),t._v(" "),a("td",[t._v("/demo/key2")]),a("td",[t._v("banana")]),t._v(" "),a("td",[t._v("This is a banana")]),t._v(" "),a("td",[t._v("100")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("3")]),t._v(" "),a("td",[t._v("/demo/key3")]),a("td",[t._v("Watermelon")]),t._v(" "),a("td",[t._v("This is a watermelon")]),t._v(" "),a("td",[t._v("100")])])]),t._v(" "),a("h3",{attrs:{id:"text-value-mapping-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#text-value-mapping-file"}},[t._v("#")]),t._v(" Text value mapping file")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("##var")]),t._v(" "),a("th",[t._v("key")]),t._v(" "),a("th",[t._v("origin_text")]),t._v(" "),a("th",[t._v("text_tw")]),t._v(" "),a("th",[t._v("text_en")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("##type")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("string")])]),t._v(" "),a("tr",[a("td",[t._v("##")]),t._v(" "),a("td",[t._v("Localization key")]),t._v(" "),a("td",[t._v("Original value")]),t._v(" "),a("td",[t._v("Traditional value")]),t._v(" "),a("td",[t._v("English")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("/demo/key1")]),t._v(" "),a("td",[t._v("apple")]),t._v(" "),a("td",[t._v("apple")]),t._v(" "),a("td",[t._v("apple")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("/demo/key2")]),t._v(" "),a("td",[t._v("banana")]),t._v(" "),a("td",[t._v("banana")]),t._v(" "),a("td",[t._v("banana")])])])]),t._v(" "),a("h2",{attrs:{id:"luban-client-commands"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#luban-client-commands"}},[t._v("#")]),t._v(" Luban.Client commands")]),t._v(" "),a("p",[t._v("There are three parameters related to static text value localization")]),t._v(" "),a("ul",[a("li",[t._v("l10n:input_text_files localization mapping files")]),t._v(" "),a("li",[t._v("l10n:text_field_name The target field name of the mapping. Because it is possible that multiple languages are in the same mapping table (such as text_tw and text_en)")]),t._v(" "),a("li",[t._v("l10n:output_not_translated_text_file The text of the text value localization mapping has not been completed")])]),t._v(" "),a("p",[t._v("The following is an example script")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("%GEN_CLIENT% "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-h")]),t._v(" %LUBAN_SERVER_IP% "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-j")]),t._v(" cfg --^\n "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" %DEFINE_FILE%^\n "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--input_data_dir")]),t._v(" %CONF_ROOT%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Datas ^\n "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--output_code_dir")]),t._v(" Gen ^\n "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--output_data_dir")]),t._v(" config_data ^\n "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--gen_types")]),t._v(" data_json ^\n "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" all  ^\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--l10n:input_text_files")]),t._v(" l10n/cn/TextTable_CN.xlsx ^\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--l10n:text_field_name")]),t._v(" text_en ^\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--l10n:output_not_translated_text_file")]),t._v(" NotLocalized_CN.txt\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("h2",{attrs:{id:"example-output"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-output"}},[t._v("#")]),t._v(" Example output")]),t._v(" "),a("p",[t._v("The content of the exported json file is")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"key"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo/key1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apple"')]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"desc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is an apple"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"key"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo/key2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"banana"')]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"desc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is a banana"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"key"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo/key3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Watermelon"')]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"desc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is a watermelon"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br")])]),a("p",[t._v("In the example /demo/key3 is not provided in the localization mapping table because output_l10n_not_translated_text_file specifies the list of unmapped localized text values.")]),t._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/demo/key3|This is a watermelon\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"dynamic-localization-of-text-values"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-localization-of-text-values"}},[t._v("#")]),t._v(" Dynamic localization of text values")]),t._v(" "),a("p",[t._v("Dynamically switch the text type field to the target language at runtime, and the program does not need to query in the localization mapping table according to the id, which simplifies the use. Note that currently only the text type field in the bean is supported, such as list and text are not yet supported. Dynamic localization of text values is supported through:")]),t._v(" "),a("ul",[a("li",[t._v("Identifies the field as text type")]),t._v(" "),a("li",[t._v("Provide localization mapping function of (string key, string origin_value) => (string target_value)")]),t._v(" "),a("li",[t._v("Call the cfg.Tables.TranslateText function at runtime to switch all text type values in the configuration to the target language with one click")]),t._v(" "),a("li",[t._v("A string {field}_l10n_text field is additionally generated for the text type field. You can take this field to the localization mapping table to query its text value in other languages at runtime")])]),t._v(" "),a("p",[t._v("The implementation of the localization mapping function is relatively simple, the core is how to make the text value localization mapping configuration? Users can either use a custom localization mapping table, or use a common luban configuration table to provide text value mapping configuration, as shown in the following figure:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("##var")]),t._v(" "),a("th",[t._v("key")]),t._v(" "),a("th",[t._v("origin_text")]),t._v(" "),a("th",[t._v("text_tw")]),t._v(" "),a("th",[t._v("text_en")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("##type")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("string")])]),t._v(" "),a("tr",[a("td",[t._v("##")]),t._v(" "),a("td",[t._v("Localization key")]),t._v(" "),a("td",[t._v("Original value")]),t._v(" "),a("td",[t._v("Traditional value")]),t._v(" "),a("td",[t._v("English")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("/demo/key1")]),t._v(" "),a("td",[t._v("apple")]),t._v(" "),a("td",[t._v("apple")]),t._v(" "),a("td",[t._v("apple")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("/demo/key2")]),t._v(" "),a("td",[t._v("banana")]),t._v(" "),a("td",[t._v("banana")]),t._v(" "),a("td",[t._v("banana")])])])]),t._v(" "),a("p",[t._v("Switching to different target languages is achieved by providing different mapping functions, for example")]),t._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// for switching to en")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("TextMapper_en")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" originText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TbTextMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetOrDefault")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?.")]),t._v("TextEn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("??")]),t._v(" originText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// for switching to tw")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("TextMapper_tw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" originText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TbTextMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetOrDefault")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?.")]),t._v("TextTw "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("??")]),t._v(" originText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SwitchLanguages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("cfg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Tables")]),t._v(" tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Switch all text fields to en")]),t._v("\n   tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("TranslateText")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TextMapper_en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Switch all text fields to tw")]),t._v("\n   tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("TranslateText")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TextMapper_tw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// When the current language is tw, switch is not used,")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get the English text corresponding to the desc field of prop 1001")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")])]),t._v(" desc_en "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TbTextMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TbItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1001")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Desc_l10n_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TextEn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br")])]),a("h2",{attrs:{id:"multi-branch-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#multi-branch-data"}},[t._v("#")]),t._v(" multi-branch data")]),t._v(" "),a("p",[t._v("Luban supports the data mode of main+patches. On the basis of the main version data, a patch data is provided, and the final target data is generated after merging and processing.")]),t._v(" "),a("p",[t._v("Take the gen_apply_patch_CN.bat script in the luban_examples/Projects/L10N directory as an example, the command line is as follows.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v(" %GEN_CLIENT% -h %LUBAN_SERVER_IP% -j cfg --^\n -d %CONF_ROOT%\\Defines\\__root__.xml ^\n --input_data_dir %CONF_ROOT%\\Datas ^\n --output_code_dir Gen ^\n --output_data_dir config_data ^\n --gen_types data_lua ^\n -s all  ^\n --l10n:patch cn ^\n --l10n:patch_input_data_dir l10n/cn\n")])])]),a("p",[t._v("Indicates that the patch name to be generated is cn, the root directory of the branch data is l10n/cn, and there are two xlsx files in the directory: Patch_CN_1.xlsx and Patch_CN_2.xlsx, and merge the data in these two files into DesignerConfigs/Datas/ l10n directory Patch.xlsx file, and generate lua format data.")]),t._v(" "),a("p",[t._v("Patch.xlsx content is")]),t._v(" "),a("table",{attrs:{border:"1"}},[a("tr",{attrs:{align:"center"}},[a("td",[t._v("##")]),t._v(" "),a("td",[t._v("id")]),t._v(" "),a("td",[t._v("value")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td",[t._v("##")]),t._v(" "),a("td"),t._v(" "),a("td")]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("11")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("12")]),t._v(" "),a("td",[t._v("2")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("13")]),t._v(" "),a("td",[t._v("2")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("14")]),t._v(" "),a("td",[t._v("4")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("15")]),t._v(" "),a("td",[t._v("5")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("16")]),t._v(" "),a("td",[t._v("6")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("17")]),t._v(" "),a("td",[t._v("7")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("18")]),t._v(" "),a("td",[t._v("8")])])]),t._v(" "),a("p",[t._v("The content of Patch_CN_1.xlsx is")]),t._v(" "),a("table",{attrs:{border:"1"}},[a("tr",{attrs:{align:"center"}},[a("td",[t._v("##")]),t._v(" "),a("td",[t._v("id")]),t._v(" "),a("td",[t._v("value")]),t._v(" "),a("td")]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td",[t._v("##")]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td",[t._v("Comments")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("11")]),t._v(" "),a("td",[t._v("1001")]),t._v(" "),a("td",[t._v("Overwrite the original value 1")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("12")]),t._v(" "),a("td",[t._v("1002")]),t._v(" "),a("td",[t._v("Overwrite the original value 2")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("20")]),t._v(" "),a("td",[t._v("20")]),t._v(" "),a("td",[t._v("Add 20")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("21")]),t._v(" "),a("td",[t._v("21")]),t._v(" "),a("td",[t._v("Add 21")])])]),t._v(" "),a("p",[t._v("The content of Patch_CN_2.xlsx is")]),t._v(" "),a("table",{attrs:{border:"1"}},[a("tr",{attrs:{align:"center"}},[a("td",[t._v("##")]),t._v(" "),a("td",[t._v("id")]),t._v(" "),a("td",[t._v("value")]),t._v(" "),a("td")]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td",[t._v("##")]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td",[t._v("Comments")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("30")]),t._v(" "),a("td",[t._v("300")]),t._v(" "),a("td",[t._v("Add 30")])]),t._v(" "),a("tr",{attrs:{align:"center"}},[a("td"),t._v(" "),a("td",[t._v("31")]),t._v(" "),a("td",[t._v("310")]),t._v(" "),a("td",[t._v("Add 31")])])]),t._v(" "),a("p",[t._v("The generated lua format data is")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("return\n{\n[11] = {id=11,value=1001,},\n[12] = {id=12,value=1002,},\n[13] = {id=13,value=3,},\n[14] = {id=14,value=4,},\n[15] = {id=15,value=5,},\n[16] = {id=16,value=6,},\n[17] = {id=17,value=7,},\n[18] = {id=18,value=8,},\n[20] = {id=20,value=20,},\n[21] = {id=21,value=21,},\n[30] = {id=30,value=300,},\n[31] = {id=31,value=310,},\n}\n")])])]),a("p",[t._v("So far, the data merging is completed. The patch function is suitable for minor data changes, and is suitable for making overseas multi-regional configurations with different detailed configurations. There is no need to copy the main version data, and then modify the final data on it, which greatly optimizes the localization of production. Configured workflow.")]),t._v(" "),a("h2",{attrs:{id:"time-localization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#time-localization"}},[t._v("#")]),t._v(" Time localization")]),t._v(" "),a("p",[t._v("After specifying the localized time zone, the datetime type data will generate the UTC time at the corresponding moment according to the target time zone, which is convenient for the program to use.")]),t._v(" "),a("p",[t._v("Specify the time zone through the parameters of Luban.Client:")]),t._v(" "),a("p",[t._v("-t, --l10n_timezone {timezone}")]),t._v(" "),a("p",[t._v('The time zone is the time zone name under linux or win, for example: -t "Asia/Shanghai" or -t "China Standard Time" specifies that the target time zone is Asia Shanghai (that is, Beijing time)')])])}),[],!1,null,null,null);a.default=n.exports}}]);