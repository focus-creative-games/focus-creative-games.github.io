(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{443:function(e,t,a){"use strict";a.r(t);var s=a(7),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"start-up"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#start-up"}},[e._v("#")]),e._v(" Start Up")]),e._v(" "),t("blockquote",[t("p",[e._v("Thanks to "),t("a",{attrs:{href:"https://space.bilibili.com/1916310",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("宝鱼偷偷摸鱼")]),t("OutboundLink")],1),e._v(" contributed video tutorial:"),t("a",{attrs:{href:"https://www.bilibili.com/video/BV1xS4y1M7Aj",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("【01】新手上路")]),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://www.bilibili.com/video/BV1m44y1j747",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("【02】定义配置结构")]),t("OutboundLink")],1),e._v(" "),t("br"),e._v("\nThanks to "),t("a",{attrs:{href:"https://github.com/LiuOcean",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("L")]),t("OutboundLink")],1),e._v(" open source  "),t("a",{attrs:{href:"https://github.com/LiuOcean/Luban_Unity_GUI",target:"_blank",rel:"noopener noreferrer"}},[e._v("Luban Unity tool"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[e._v("#")]),e._v(" Install")]),e._v(" "),t("ol",[t("li",[e._v("Install "),t("a",{attrs:{href:"https://dotnet.microsoft.com/download/dotnet/6.0",target:"_blank",rel:"noopener noreferrer"}},[e._v("dotnet sdk 6.0"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("Download "),t("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples",target:"_blank",rel:"noopener noreferrer"}},[e._v("luban_examples project"),t("OutboundLink")],1),e._v("\nThe project contains test configurations, the latest "),t("a",{attrs:{href:"https://github.com/focus-creative-games/luban/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("Luban Release"),t("OutboundLink")],1),e._v(", and a large number of example projects. For convenience, the files mentioned later refer to the files in this project by default.")])]),e._v(" "),t("h2",{attrs:{id:"configuration-and-code-generation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration-and-code-generation"}},[e._v("#")]),e._v(" Configuration and code generation")]),e._v(" "),t("p",[e._v("The configuration is generated using the example MiniTemplate, which can be manipulated directly in the folder, or copied to a new directory. If the path is changed, please note that the path of the script file using the luban tool in this example is "),t("code",[e._v("..\\Tools\\Luban.ClientServer\\Luban.ClientServer.dll")]),e._v(", which may need to be changed to the path you use.")]),e._v(" "),t("p",[e._v("The directory and file description are as follows, and it can be generated normally by executing the gen script.")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("luban_examples\\MiniTemplate\n│  .cache.meta                     # luban cache file\n│  gen.bat                         # bat generate script\n│  gen.sh                          # sh generate script\n│\n├─Datas                            # Data source directory\n│      item.xlsx                   # excel data source file\n│      __beans__.xlsx              # bean definition file, you can use xml definition instead\n│      __enums__.xlsx              # enum definition file, you can use xml definition instead\n│      __tables__.xlsx             # table definition file, you can use xml definition instead\n│\n├─Gen                              # Generated code directory\n├─output_json                      # generated json file directory\n└─Defines\n        __root__.xml               # luban root file\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br")])]),t("p",[e._v("The example here generates a json configuration file and a corresponding cs configuration code file. When using it, just construct a loader method and pass it into the constructor of Tables.")]),e._v(" "),t("h3",{attrs:{id:"configuration-example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration-example"}},[e._v("#")]),e._v(" Configuration example")]),e._v(" "),t("p",[e._v("The following is a brief explanation of the file configuration format with a new table. The content of the file is as follows:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("##var")]),e._v(" "),t("th",[e._v("id")]),e._v(" "),t("th",[e._v("name")]),e._v(" "),t("th",[e._v("desc")]),e._v(" "),t("th",[e._v("count")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("##type")]),e._v(" "),t("td",[e._v("int")]),e._v(" "),t("td",[e._v("string")]),e._v(" "),t("td",[e._v("string")]),e._v(" "),t("td",[e._v("int")])]),e._v(" "),t("tr",[t("td",[e._v("##")]),e._v(" "),t("td",[e._v("id")]),e._v(" "),t("td",[e._v("Name")]),e._v(" "),t("td",[e._v("Description")]),e._v(" "),t("td",[e._v("Number")])]),e._v(" "),t("tr",[t("td"),e._v(" "),t("td",[e._v("1001")]),e._v(" "),t("td",[e._v("item1")]),e._v(" "),t("td",[e._v("desc1")]),e._v(" "),t("td",[e._v("10")])]),e._v(" "),t("tr",[t("td"),e._v(" "),t("td",[e._v("1002")]),e._v(" "),t("td",[e._v("item2")]),e._v(" "),t("td",[e._v("desc2")]),e._v(" "),t("td",[e._v("10")])])])]),e._v(" "),t("ul",[t("li",[e._v("Row 1 is the main field row and contains table field definitions. Cell A1 must start with ##. Indicates that this is a valid data table.\n"),t("ul",[t("li",[e._v("Row 2 is the type row, cell 1 must be ##type.")]),e._v(" "),t("li",[e._v("Line 3 is a comment line. To ... beginning. There can be 0-N comment lines, and they can appear anywhere")]),e._v(" "),t("li",[e._v("From line 4 onwards are data lines.")])])])]),e._v(" "),t("p",[e._v("Add a table statement to "),t("strong",[e._v("tables")]),e._v(".xlsx in the Datas directory, and the creation of the reward table is now complete! As shown below:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("##var")]),e._v(" "),t("th",[e._v("full_name")]),e._v(" "),t("th",[e._v("value_type")]),e._v(" "),t("th",[e._v("define_from_file")]),e._v(" "),t("th",[e._v("input")]),e._v(" "),t("th",[e._v("...")])])]),e._v(" "),t("tbody",[t("tr",[t("td"),e._v(" "),t("td",[e._v("demo.TbReward")]),e._v(" "),t("td",[e._v("Reward")]),e._v(" "),t("td",[e._v("true")]),e._v(" "),t("td",[e._v("reward.xlsx")]),e._v(" "),t("td")])])]),e._v(" "),t("p",[t("strong",[e._v("For lines with names like ##var or ##type, you can adjust the position of the line at will.")]),e._v(" "),t("strong",[e._v("But Note")]),e._v(" If the first line is a comment line, ##comment must be used instead of ##. Otherwise, it will take the first line as the field name line and make an error (this is for compatibility, the first line was forced to be the field name line in the early days, and only the beginning with ## is allowed).")]),e._v(" "),t("h2",{attrs:{id:"generate-code-and-data-and-use-it-in-the-program"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#generate-code-and-data-and-use-it-in-the-program"}},[e._v("#")]),e._v(" Generate code and data and use it in the program")]),e._v(" "),t("p",[e._v("There are several common requirements, select the appropriate document below according to your requirements")]),e._v(" "),t("ul",[t("li",[e._v("unity + c# + json")]),e._v(" "),t("li",[e._v("unity + puerts + json")]),e._v(" "),t("li",[e._v("UE4 + c++ + binary")]),e._v(" "),t("li",[e._v("UE4 + blueprint c++ + binary")]),e._v(" "),t("li",[e._v("UE4 + blueprint c++ + json")]),e._v(" "),t("li",[e._v("Export json from excel, load it with your own handwritten code or use it for other purposes")]),e._v(" "),t("li",[e._v("other demands")])]),e._v(" "),t("h3",{attrs:{id:"unity-c-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unity-c-json"}},[e._v("#")]),e._v(" unity + c# + json")]),e._v(" "),t("p",[e._v("An example reference project is "),t("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_json",target:"_blank",rel:"noopener noreferrer"}},[e._v("Csharp_Unity_Json"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Project preparation.")]),e._v(" "),t("p",[e._v("Copy the Assets\\LubanLib directory in the sample project to your Unity project (you can freely organize the location), "),t("strong",[e._v("===At the same time, enable the unsafe option in Unity’s PlayerSettings===")]),e._v(" (If your project requires not to enable unsafe, please Ask for help in the group), try to compile the project at this time, theoretically it should be able to compile successfully.")])]),e._v(" "),t("li",[t("p",[e._v("Run the build command (you can refer to the gen_code_json.bat of the sample project)")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("dotnet %Luban.ClientServer.dll%\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-j")]),e._v(" cfg ^\n-- ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--define_file")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("__root__.xml 定义文件的路径"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--input_data_dir")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to configuration data root directory "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Datas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--output_code_dir")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to generated code file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--output_data_dir")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to exported data file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--service")]),e._v(" all ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--gen_types")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"code_cs_unity_json,data_json"')]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br")])]),t("p",[e._v("One of them")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("%Luban.ClientServer.dll% points to luban_examples/Tools/Luban.ClientServer/Luban.ClientServer.dll")])]),e._v(" "),t("li",[t("p",[e._v("--define_file parameter is the path of MyConfigs/Defines/__root__.xml")])]),e._v(" "),t("li",[t("p",[e._v("--input_data_dir parameter is the path of MyConfigs/Datas")])]),e._v(" "),t("li",[t("p",[e._v("--output_code_dir parameter is the path where the generated code files are stored. It is recommended to point to a certain level of subdirectory under the Assets directory of unity")])]),e._v(" "),t("li",[t("p",[e._v("--output_data_dir parameter is the storage path of the generated data files. It is recommended to point to the same level directory as Assets.")]),e._v(" "),t("p",[e._v("For detailed command documentation, please see "),t("RouterLink",{attrs:{to:"/en/luban/command_tools/"}},[e._v("command_tools")]),e._v(".")],1),e._v(" "),t("p",[e._v("If everything is fine, a series of logs will be generated, and the final line is == succ == .")]),e._v(" "),t("p",[e._v("like this")])])])])]),e._v(" "),t("div",{staticClass:"center-container"},[t("p",[t("img",{attrs:{src:"/img/luban/install/install_07.png",alt:"生成结果"}})])]),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("If everything goes well. The generated code files will be in the directory specified by the –output_code_dir parameter, and the generated configuration data will be in the directory specified by the –output_data_dir parameter. Make sure that the directory pointed to by –output_code_dir is under the Assets directory, and enable unsafe in **PlayerSetting**, and the compilation should be successful at this time.\n")])])]),t("ul",[t("li",[t("p",[e._v("load configuration")]),e._v(" "),t("p",[e._v("Only one line of code can complete the loading tool for all configuration tables")]),e._v(" "),t("div",{staticClass:"language-csharp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-csharp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("var")])]),e._v(" tables "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token constructor-invocation class-name"}},[e._v("cfg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Tables")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("file "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" \n        JSON"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Parse")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("File"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ReadAllText")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("gameConfDir "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" file "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('".json"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])])]),e._v(" "),t("li",[t("p",[e._v("Use the loaded configuration table")]),e._v(" "),t("p",[e._v("cfg.Tables contains an instance field for all configuration tables. After loading cfg.Tables, you only need to use tables.<table name> to get the table instance, and then you can do various operations. For example, we want to get the prop with id = 10000. code show as below")]),e._v(" "),t("div",{staticClass:"language-csharp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-csharp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("cfg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("item"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Item")]),e._v(" itemInfo "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" tables"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("TbItem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("10000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nConsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("WriteLine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"id:{0} name:{1} desc:{2}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" \n    itemInfo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" itemInfo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" itemInfo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Desc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("You may notice that when defining Item in item.xml, the first letters of the field names id, name, and desc are capitalized. This is because the tool will automatically convert the field name of the corresponding code style according to the output language, that is, boo_bar will be converted to a name like BooBar. This is why it is recommended to use the xx_yy_zz style uniformly when configuring field definitions.")])]),e._v(" "),t("li",[t("p",[e._v("This completes the configuration loading and use!")])])]),e._v(" "),t("h3",{attrs:{id:"unity-puerts-project-generates-ts-code-and-generates-json-data"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unity-puerts-project-generates-ts-code-and-generates-json-data"}},[e._v("#")]),e._v(" unity + puerts project generates ts code and generates json data")]),e._v(" "),t("p",[e._v("The reference project is "),t("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects/TypeScript_Unity_Puerts_Json",target:"_blank",rel:"noopener noreferrer"}},[e._v("TypeScript_Unity_Puerts_Json"),t("OutboundLink")],1)]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Create and run the build command (you can refer to the gen_code_json.bat of the sample project)")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("dotnet %Luban.ClientServer.dll%\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-j")]),e._v(" cfg ^\n-- ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--define_file")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to __root__.xml definition file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--input_data_dir")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to configuration data root directory "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Datas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--output_code_dir")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to generated code file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--output_data_dir")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path to exported data file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--service")]),e._v(" all ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--gen_types")]),e._v(" code_typescript_json,data_json ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--typescript:use_puerts_bytebuf")]),e._v(" ^\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--typescript:embed_bright_types")]),e._v(" \n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br")])]),t("p",[e._v("one of them")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("%Luban.ClientServer.dll% points to luban_examples/Tools/Luban.ClientServer/Luban.ClientServer.dll")])]),e._v(" "),t("li",[t("p",[e._v("--define_file parameter is the path of MyConfigs/Defines/__root__.xml")])]),e._v(" "),t("li",[t("p",[e._v("--input_data_dir parameter is the path of MyConfigs/Datas")])]),e._v(" "),t("li",[t("p",[e._v("The --output_code_dir parameter is the path where the generated code files are stored. It is recommended to point to a certain level of subdirectory under the Assets directory of unity")])]),e._v(" "),t("li",[t("p",[e._v("The --output_data_dir parameter is the storage path of the generated data files. It is recommended to point to the same level directory as Assets.")]),e._v(" "),t("p",[e._v("For detailed command documentation, please see "),t("RouterLink",{attrs:{to:"/en/luban/command_tools/"}},[e._v("command_tools")]),e._v(".")],1),e._v(" "),t("p",[e._v("If everything is fine, a series of logs will be generated, and the final line is == succ == .")])])])]),e._v(" "),t("li",[t("p",[e._v("load configuration")]),e._v(" "),t("p",[e._v("Provide a Loader for cfg.Tables, and return a loaded JSON object according to the table name. Only a small amount of code can complete the loading tool for all configuration tables.")]),e._v(" "),t("div",{staticClass:"language-typescript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-typescript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("let")]),e._v(" tables "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("cfg")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Tables")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("f "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("let")]),e._v(" data "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" JsHelpers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ReadAllText")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("UnityEngine"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Application"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("dataPath "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"GameData/"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" f "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('".json"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[e._v("JSON")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("parse")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])])]),e._v(" "),t("li",[t("p",[e._v("Use the loaded configuration table")]),e._v(" "),t("p",[e._v("cfg.Tables contains an instance field for all configuration tables. After loading cfg.Tables, you only need to use tables.<table name> to get the table instance, and then you can do various operations. For example, we want to get the prop with id = 10000. code show as below")]),e._v(" "),t("div",{staticClass:"language-typescript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-typescript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("console")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("tables"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("TbGlobalConfig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("bagCapacity"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("console")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("tables"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("TbItem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])])]),e._v(" "),t("li",[t("p",[e._v("This completes the configuration loading and use!")])])]),e._v(" "),t("h3",{attrs:{id:"ue4-project-c-non-blueprint-code-binary-data"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ue4-project-c-non-blueprint-code-binary-data"}},[e._v("#")]),e._v(" UE4 project, c++ (non-blueprint) code, binary data")]),e._v(" "),t("p",[e._v("The reference project for the benchmark is "),t("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Cpp_Unreal_bin",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cpp_Unreal_bin"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v('Since the generated code depends on some header files, you need to copy Source\\Cpp_Unreal\\Private\\bright from this project to a suitable location for your project. You must ensure that the bright directory is within the include directory path, such as #include "bright/serialization/ByteBuf.h" in the generated code to find this file.')]),e._v(" "),t("p",[e._v('Then the command line parameter takes --gen_types "code_cpp_bin,data_bin"')]),e._v(" "),t("h3",{attrs:{id:"export-json-data-from-excel-load-and-use-it-with-handwritten-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#export-json-data-from-excel-load-and-use-it-with-handwritten-code"}},[e._v("#")]),e._v(" export json data from excel, load and use it with handwritten code")]),e._v(" "),t("p",[e._v("The example is gen_data_json2.bat under "),t("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_json",target:"_blank",rel:"noopener noreferrer"}},[e._v("GenerateDatas project"),t("OutboundLink")],1),e._v("\n(Note that it is not gen_data_json.bat, because '--gen_types data_json' in gen_data_json.bat, the generated json data is a list of records, rather than organized in the form of key-value, which may not meet your requirements).")]),e._v(" "),t("p",[e._v("The script is as follows:")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("dotnet %Luban.ClientServer.dll%\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-j")]),e._v(" cfg ^\n -- ^\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--define_file")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("__root__.xml path to definition file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--input_data_dir")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("Configure the path of the data root directory "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Datas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--output_data_dir")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("The path to the exported data file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ^\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--service")]),e._v(" all ^\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--gen_types")]),e._v(" data_json2\n\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br")])]),t("p",[e._v("One of them")]),e._v(" "),t("ul",[t("li",[e._v("%Luban.ClientServer.dll% points to luban_examples/Tools/Luban.ClientServer/Luban.ClientServer.dll")]),e._v(" "),t("li",[e._v("--define_file parameter is the path of MyConfigs/Defines/__root__.xml")]),e._v(" "),t("li",[e._v("--input_data_dir parameter is the path of MyConfigs/Datas")]),e._v(" "),t("li",[e._v("The --output_data_dir parameter is the storage path of the generated data files. It is recommended to point to the same level directory as Assets.")])]),e._v(" "),t("p",[e._v("Run the script at this point. Should be able to execute successfully. The generated data is in the directory specified by the --output_data_dir parameter")]),e._v(" "),t("h2",{attrs:{id:"other-item-types"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#other-item-types"}},[e._v("#")]),e._v(" Other item types")]),e._v(" "),t("p",[e._v("Between different projects, only the preparation work and --gen_types are different, please find your project from "),t("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example Project"),t("OutboundLink")],1),e._v(" For matching items, refer to gen_xxx.bat in the corresponding directory.")]),e._v(" "),t("p",[e._v("The generated code generally depends on some tool classes, please copy these codes from the corresponding project to your own project.")]),e._v(" "),t("p",[e._v("For more information, please refer to "),t("RouterLink",{attrs:{to:"/en/luban/generate_code_data/"}},[e._v("Code and Data Generation")]),e._v(" this document.")],1)])}),[],!1,null,null,null);t.default=n.exports}}]);