---
title: MonoPInvokeCallback支持
date: 2022-05-25 11:50:18
permalink: /hybridclr/monopinvokecallback/
categories:
    - HybridCLR
tags:
    -
author:
    name: walon
    link: https://github.com/pirunxi
---


# MonoPInvokeCallbackAttribute支持

HybridCLR对 `MonoPInvokeCallbackAttribute` 的支持跟原生一模一样。由于每个标注 `MonoPInvokeCallbackAttribute` 的函数有一个唯一对应的c++函数，而AOT限制导致不可能运行时新增函数，因此要提前预留足够多的Wrapper c++函数，用于与 `MonoPInvokeCallbackAttribute`函数绑定。

这些wrapper函数在 `hybridclr/metadata/ReversePInvokeMethodStub.cpp` 文件中。

[hybridclr_unity](/hybridclr/hybridclr_unity/) 已经提供了脚本帮助自动生成这些wrapper函数。在HybridCLRGlobalSettings.asset里配置`ReversePInvokeWrapperCount`字段，再运行菜单命令`HybridCLR/Generate/ReversePInvokeWrapper` 即可。
