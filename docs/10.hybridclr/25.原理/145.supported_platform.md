---
title: 跨平台支持
date: 2022-05-25 11:50:18
permalink: /hybridclr/supported_platform/
categories:
  - HybridCLR
  - platform
tags:
  - 
author: 
  name: walon
  link: https://github.com/focus-creative-games
---

# 跨平台支持

目前支持 Win(X64、X86)、Android(Arm64、Armv7)、macOS(X86、X64、Arm64)、iOS(Arm64)、WebGL、NS 64(任天堂)

## Win

## macOS

## Android

## iOS

## NS 64 (任天堂)

## WebGL

更详细的安装请看[安装HybridCLR](/hybridclr/install/)的全局安装部分文档。

WebGL这个平台比较特殊，不支持本地安装，因此需要`HybridCLR Settings`里设置`useGlobalIl2cpp=true`。

如果你的hybridclr_unity版本 >= 2.1.0，**第一次**覆盖libil2cpp前，请先运行`HybridCLR/Generate/Il2cppDef`（只此一次，后面不再需要，除非你切换了项目Unity版本）以生成正确的版本宏，再覆盖原始的libil2cpp目录。**低版本不需要执行此操作**。

有两种安装方式：
- 将本地目录`{project}/HyridCLRData/LocalIl2CppData-{platform}/il2cpp/libil2cpp`替换Editor安装目录中的libil2cpp目录，并且在每次`Generate/xxx`之后重新将`{project}/HyridCLRData/LocalIl2CppData-{platform}/il2cpp/libil2cpp`目录复制到Editor安装目录。
- 创建安装目录的libil2cpp目录到本地目录`{project}/HyridCLRData/LocalIl2CppData-{platform}/il2cpp/libil2cpp`的符号链接。


WebGL目前打包问题较多，已知有几个

- 不能调用IO相关函数，因此你不能在link.xml中preserve整个 mscorlib或者preserve相关类和函数，也不能在代码中调用相关函数 。开发者如果发现编译出错，根据错误信息剔除一些不被支持的库，重试一次。强烈推荐先在未安装HybridCLR的情况下打包测试通过后，再接入HybridCLR，避免无法区分到底是WebGL还是HybridCLR引发的问题。

## 微信小游戏平台

问题及支持程度与WebGL平台基本相同。

不过注意：微信小游戏转换工具，默认会将IL2CPP Code Generation设置为Faster(Smaller) builds模式，如果未补充元数据，会导致无法访问AOT泛型函数。由于 Faster(smaller) 模式会严重伤害泛型函数的执行性能，即使使用补充元数据，也强烈推荐自己改微信工具源码，将BuildSettings中 `IL2CPP Code Generation` 设置为 `Faster`。
