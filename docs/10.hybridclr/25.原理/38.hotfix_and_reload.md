---
title: Differential Hybrid Execution
date: 2022-05-25 11:50:18
permalink: /hybridclr/hotfix_and_reload/
categories:
    - HybridCLR
tags:
    -
author:
    name: walon
    link: https://github.com/pirunxi
---

# 热重载技术

支持两类热重载技术，只提供**商业化版本**，具体请见[商业化服务](/hybridclr/price/)。

## Hotfix 技术

Hotfix技术用于运行时动态修复AOT或者热更新程序集的代码。

- 【优点】可以动态修复AOT或HotUpdate Assembly，几乎没有额外性能开销
- 【优点】修复立马生效，不需要退出进程
- 【优点】可以多次修复
- 【优点】对业务代码基本无侵入
- 【缺点】要求无类型变更，只是修改函数内容
- 【缺点】无法卸载旧Assembly占用的内存，有一定内存浪费

## HotReload 技术

HotReload技术用于卸载或者重新加载一个dll，适用于小游戏合集类型的游戏。

- 【优点】支持动态重新加载全新的AOT或热更新Assembly，代码可以任意变更
- 【优点】重新加载的Assembly代码可以任意变化甚至完全不同
- 【优点】卸载大部分内存，但有少量残留（如类型静态成员字段占据的内存）
- 【缺点】要求业务代码有清理逻辑，主动清除旧对象（核心是确保不会再调用旧代码），并且退出所有在执行的旧逻辑
- 【缺点】要求重载后在旧Assembly中存在同名类的MonoBehaviour中的被Unity引擎特殊处理函数如Awake之类不发生增删（但函数体可以变化）
