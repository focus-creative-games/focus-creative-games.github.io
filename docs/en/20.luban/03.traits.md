---
title: Features
date: 2022-05-25 11:14:58
permalink: /luban/traits/
categories:
  - luban
tags:
  - 
author: 
  name: walon
  link: https://github.com/pirunxi
---
# Features

## Complete type system

* Basic built-in types
  * bool,byte,short,fshort,int,fint,long,flong,float,double,string,text,bytes
  * vector2, vector3,vector4
  * datetime
* nullable type
  * bool?,byte?,short?,fshort?,int?,fint?,long?,flong?,float?,double?
  * vector2?,vector3?,vector4?
  * datetime?
  * &lt;emun&gt;?
  * < bean>?
  * &lt;polymorphic bean&gt;?
* Custom enumeration enum and corresponding nullable types
* custom constant const
* Custom structure bean
* polymorphic bean

Supports the definition of an infinite hierarchy of OOP type inheritance systems (such as parent class Shape, subclass Circle, Rectangle), which is extremely concise when expressing complex configurations, and is more friendly to programs and planning.

* Support container type array. value can be a built-in type or a custom type
* Support container type list. value can be a built-in type or a custom type
* The container type set is supported. value can only be built-in type or enum type, bean type is not supported
* Support container type map. The key can only be a built-in type or an enum type, not a bean type. value can be a built-in type or a custom type

## Support enhanced excel format

* Use true, false to represent bool variables.
* Use enumeration names and aliases to represent enumeration constants. For example, use white, green and red to represent the quality instead of magic numbers like 1, 2, and 3
* Support constant replacement for integers. For example, if the item id of the upgrade pill is 1122, all places where the upgrade pill id is filled can be expressed by filling in the upgrade pill. Reduce filling errors
* Support nullable variables. Use null to represent empty data.
* Support datetime data type. The time format standards are as follows, and finally converted to utc time for program processing
   * yyyy-MM-dd HH:mm:ss
   * yyyy-MM-dd HH: mm
   * yyyy-MM-dd HH
   * yyyy-MM-dd
* Support for splitting cells with sep. Fill in multiple data in one cell.
* Support for multiple rows of data. For example, there is a complex subsection list field in the chapter configuration. Support multiple lines to fill in this list data.
* Support multi-level headers, which is convenient for corresponding to some deeper data. Such as a.b.c.
* Supports polymorphic aliases, making it easy to fill in polymorphic data. For example Circle,5 or Rectangle,3,4
* **Support to fill in any complex configuration in excel relatively concisely**.
   * List of supported structures. For example, list,Equip (including int id, string name, float attr) such a complex structure list data can be filled in as 1,abasfa,0.5|2,xxxyy;0.9.
   * Support for polymorphic structures. For example, cfg.Shape is a polymorphic type, including Circle(float radius) and Rectangle(float width, float size). Can be filled as circle,5 or rectangle,3,5.
   * Supports the combination of unlimited levels of complex structures
     * For example, list,Convex(int id, Vector3[] vertexs) is a list of polygons, and Convext itself contains a list of vertices, which can be configured as 1_1.2,2.3,3.4_3.1,3.2,3.3|2_2.2,2.3. 3.3.
     * For example list,Shape is a list of shapes. Circle,10;Rectange,5,6;Circle,4 can be configured like this
 
## Multiple raw file formats support

In a complex project, there is always a part of data (10-20%) that is not suitable for excel editing (such as skills, AI, copies, etc.), and these data are generally edited and exported through a dedicated editor. The problem encountered is that this kind of configuration data cannot be processed uniformly with the excel data, resulting in multiple configuration data loading schemes in the game, and the program needs to spend a lot of time to process the loading of these data. In addition, these complex data cannot use the mechanism of excel export table tools such as data inspection and group export and localization. Luban can handle various data sources such as excel family, xml, json, lua, directory, etc., export data and generate code in a unified manner, all data sources can use mechanisms such as data inspection, group export, etc., and the program is completely freed from complex configuration processing .

* Support excel family files. csv and xls, xlsx and other formats
* Support reading from a cell book in the specified excel.
* Support json. Each json file is read as a record
* Support lua. Each lua file is read as a record
* Support xml. Each xml file is read as a record
* Support directories. All files in the recursive directory, each file is read as a record. Different types of files are allowed to be mixed, for example, there can be json, lua, xml, excel and other formats in the directory at the same time.
* Each table allows multiple data sources to be specified, and all combinations of the above can be used.
   * Many to one. For example, you can configure different tables with different tabs in an excel. For example, both the equipment upgrade table and the advanced table are in the equipment table.xlsx
   * One-to-many. For example, the task table can come from multiple tables such as task 1.xlsx, task 2.xlsx and so on.
   * Many to many. It can also be a combination of the above, but it is rare in practice)

## Multiple export data formats support

  **The export format is decoupled from the original data**. No matter the source data is excel, lua, xml, json or a mixture of them, it will be exported in a **unified format**, which greatly simplifies the complexity of generating code. The following export formats are currently supported:

* binary format. Similar to pb format. Smallest footprint and fastest loading.
* json format.
* lua format.
* It is also easy to extend other formats. (It only takes 200 lines of code to export the previous data formats)

## Support table and field level grouping

   Supports custom grouping types. It not only supports the selective export of some tables by group, but also supports the selective export of some fields in the table. For example, export the data they use for the front and back ends separately.

## support data tags

Supports three tags: yes, no, and test. Each row of data can be labeled. For example, if the label is "No", it means that this row of data will not be exported. If "test", only export if test export. For example, some test data will be configured during internal development, but you do not want to export them when publishing to the outside world.

## Powerful data verification capability

* Complete data built-in constraint checking
* ref check. Checklist citation legality. For example, the dropId in the Monster table must be a legal key of the TbDrop table.
* path check. Check resource reference legality. For example, the icon of the Monster table must be a legal icon resource. It is extremely useful to prevent planning errors, and it is no longer necessary to discover resource configuration errors at runtime.
* range check. Check the value range.
* Extended custom checks. Advanced inspection with custom code. The local inspection can be completed before the configuration is submitted, avoiding the discovery of errors at runtime, and greatly reducing the iteration cost.

## Multiple data table modes

* one format, that is, the singleton table mode
* map format, that is, the common key-value table mode. Any type that meets the value requirements of set can be used as a key

## Localization support

* Support **localized time**. The datetime in the configuration will be converted to the correct utc time according to the specified timezone and localtime, which is convenient for program processing
* Support for **static localization**. The text type in the configuration has been converted to the correct localized string when exporting
* Support for **Dynamic Localization**. The text type in the configuration can be switched to some localized string at runtime
* Support `main + patches` differential multi-version configuration. Based on a main version configuration plus change configurations, the final configuration is formed. Useful when making nuanced multi-region versions.

## Code editor support

   Emmylua announcements are supported. The generated lua contains announcements information in emmylua format. With emmylua, it has a good ability to configure code prompts.

## Resource export support

   The res resource tag is supported. You can export all resource lists (icon, ui, assetbundle, etc.) referenced in the configuration with one click

## Code Modularization

Generate modular code. for example
* c# cfg.item.ItemInfo
* c++ cfg::item::ItemInfo
* lua item.ItemInfo
* go item_ItemInfo

## The generation is extremely fast, and large projects can also be exported in seconds

   Using the client/server mode, using the server's powerful hardware (large memory + multi-threading), and cooperating with the cache mechanism (if the data and definitions are not modified, the previously generated results will be returned directly), even if the data scale is relatively large in the middle and later stages of the project. It can generate all data in about 1 second (traditionally more than 10 seconds) and complete data verification. Considering that planning and programming often use generation tools, little adds up, and it can save a lot of development time.

## Data Modularization

Planning can easily organize the data directory and structure according to the needs without affecting the logical table.

## Support mainstream game development languages

* c++ (11+)
* c# (.net framework 2+. dotnet core 2+)
* java (1.6+)
* go (1.10+)
* lua (5.1+)
* js 和 typescript (3.0+)
* python (2.7+ 及 3.0+)
* rust
* gdscript

## Support mainstream engines and platforms

* unity + c#
* unity + tolua,xlua
* unity + ILRuntime
* unreal + c++
* unreal + unlua
* unreal + sluaunreal
* unreal + puerts
* cocos2d-x + lua
* cocos2d-x + js
* godot + gdscript
* WeChat Mini Program Platform
* Other small program platforms based on js
* All other engines and platforms that support lua
* All other engines and platforms that support js
