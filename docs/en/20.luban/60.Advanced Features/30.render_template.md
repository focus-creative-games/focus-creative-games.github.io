---
title: Template
date: 2022-05-25 11:14:58
permalink: /luban/advanced/render_template/
categories:
  - luban
  - advanced
tags:
  - 
author: 
  name: walon
  link: https://github.com/pirunxi
---
# template

Supports code templates and data templates, and can flexibly customize the generated code and data.

## code template

Use scriban template files to customize the export data format. For example, the template of the cfg.Tables class that generates the cs language bin data format is as follows.

```text
using Bright.Serialization;

{{
    name = x.name
    namespace = x.namespace
    tables = x.tables
}}
namespace {{namespace}}
{
public sealed class {{name}}
{
    {{~for table in tables ~}}
        {{~if table.comment != '' ~}}
            /// <summary>
            /// {{table.comment}}
            /// </summary>
        {{~end~}}
        public {{table.full_name}} {{table.name}} {get; }
    {{~end~}}

    public {{name}}(System.Func<string, ByteBuf> loader)
    {
        var tables = new System.Collections.Generic.Dictionary<string, object>();
        {{~for table in tables ~}}
            {{table.name}} = new {{table.full_name}}(loader("{{table.output_data_file}}")); 
            tables.Add("{{table.full_name}}", {{table.name}});
        {{~end~}}

        {{~for table in tables ~}}
            {{table.name}}.Resolve(tables); 
        {{~end~}}
    }

    public void TranslateText(System.Func<string, string, string> translator)
    {
        {{~for table in tables ~}}
            {{table.name}}.TranslateText(translator); 
        {{~end~}}
    }
}
}
```

### Data template

Use scriban template files to customize the export data format. For example, the custom lua data template is as follows:

```text
// {{table.name}}
{{for d in datas}}
    // {{d.impl_type.full_name}}
    {{~i = 0~}}
        {{~for f in d.fields~}}
            {{~if f ~}}
            // {{d.impl_type.hierarchy_export_fields[i].name}} = {{f.value}}
            {{~end~}}
        {{~i = i + 1~}}
    {{~end~}}
{{end}}
```

Output Data

```text
// TbItem
 // item.Item
  // id = 1
  // name = 钻石
  // major_type = 1
  // minor_type = 101
  // max_pile_num = 9999999
  // quality = 0
  // icon = /Game/UI/UIText/UI_TestIcon_3.UI_TestIcon_3
  
 // item.Item
  // id = 2
  // name = 金币
  // major_type = 1
  // minor_type = 102
  // max_pile_num = 9999999
  // quality = 0
  // icon = /Game/UI/UIText/UI_TestIcon_1.UI_TestIcon_1
```
