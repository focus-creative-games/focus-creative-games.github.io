---
title: FAQ
date: 2022-05-25 11:14:58
permalink: /luban/faq/
categories:
  - luban
tags:
  - 
author: 
  name: Code Philosophy
  link: https:://code-philosophy.com
---
# FAQ

## I run the build script in the sample project under the Projects directory of the luban_examples project, why does it prompt me to connect fail and fail?

The generation script of the sample project uses luban.client, which uses cloud generation by default, and it needs to connect to the remote luban.server to complete the generation. There are two ways to solve

- Run run_luban_server.bat or run_luban_server.sh in the luban_examples project directory. and then run the build script
- Replace Luban.Client/Luban.Client in the script with Luban.ClientServer/Luban.ClientServer. Because Luban.ClientServer contains both Client and Server
, can be generated independently.

```shell
@@Replace
set GEN_CLIENT=%WORKSPACE%\Tools\Luban.Client\Luban.Client.exe
@@with
set GEN_CLIENT=%WORKSPACE%\Tools\Luban.ClientServer\Luban.ClientServer.exe
```

For details, see [luban command line tools](/en/luban/command_tools/)

## How to specify the primary key

The index field of the table specifies the list of primary keys. For details, please refer to the relevant documents about the mode and index of the table in [Configuration Related Definitions](/en/luban/define/).

The map and list tables support the concept of primary key. If the mode and index are not specified, the mode=map mode is automatically set, and the first field of the bean is recorded as the primary key.

Assuming that the records in the TbTest table are of type Test, and you want to use the my_index field of Test as the key, then:

- If the table is defined in xml, specify the primary key field name in the index attribute of the table, as follows:

```xml
<table name="TbTest" value="Test" index="my_index"/>
```

- If the table is defined in table.xlsx, specify the primary key name in the index column, as follows

|##var|full_name|value_type|define_from_excel|input|index|...|
|-|-|-|-|-|-|-|
||TbTest|Test|true|equip.xlsx|my_index|

## Does it support multiple primary keys?

support. When table mode=list, joint multi-primary key mode and independent multi-primary key mode are supported. For detailed documents, please refer to the related documents about the table mode in [Configuration Related Definitions](/luban/define/#table's mode detailed introduction).

## Support exporting different tables and different fields by client and server?

Support. [Configuration-related definitions](/luban/define/#group export-group)
Related documents about classification definition and group export.

## Which source data file types are supported

- excel family. csv, xls, xlm, xlsx, xlsm, etc. csv supports various encodings, and luban will intelligently guess its encoding, whether you use gbk, utf-8 or other encodings, it can be processed correctly.
- json
- xml
- lua
- yaml

## Can the data of the configuration table come from multiple files?

Yes. See source details [configuration related definitions](/en/luban/define/#table-input-data) documentation on table.input in .

## Can multiple tables be placed in the same excel file?

Yes. See source details [configuration related definitions](/en/luban/define/#table-input-data) documentation on table.input in .

## When the data file is an xlsx file, will luban read the first sheet or all sheets?

Read all sheets, but ignore those sheets whose A1 cell content does not start with ##.

## Planning wants to have a non-data sheet in xlsx, how to do it

As long as the A1 cell of the sheet does not start with ##.

## want to comment out a column, how to do it

Leave the column name empty, or something like #xxxx, \_\_xxxx.

## Want to comment out a certain line of records, how to do it

Just fill the first cell of the line with ##.

## Some configurations are only used for internal testing during the development period, and are not exported when they are officially released. How to do this?

Luban supports the concept of data tags. The first column of excel is tag.

- Ignore this line when tag is ##
- When the tag is xxx, if --export_exclude_tags xxx is used in the Luban.Client command line, the record will not be exported

## I want to save a record for each json, but there are too many files, it is very troublesome to specify in the input, how to solve it?

Use a catalog data source. Put all json files in a directory (it can be a directory tree), and set input to this directory. luban will automatically traverse the entire directory tree, treating each file as
A record is read in. For details, see [Other data sources-json](/en/luban/data_source/##Data-source-file). 

## Can a json file contain multiple records?

Can. But it must be specified in the form of *@xxx.json in the data source. For details, see [Other data sources-json](/en/luban/data_source/##Data-source-file). 

## Can a record come from some deep field in a json file?

Can. There are two situations:

- To read a record from a field, specify it in the form of a.b.c@xx.json
- read the list of records from the field, specify in the form of *a.b.c@xx.json

For details, see [Other data sources-json](/luban/data_source/#Data source file)

## Can I put the data of multiple tables into one json file like xlsx?

Can. Similar to the excel data source, as long as each table is specified in the form of field@xx.json or *field@xx.json.
For details, see [Other data sources-json](/luban/data_source/#Data source file)

## Does it support asynchronous loading of configuration tables?

Not directly supported. But you can achieve asynchronous loading by custom template.

See [code and data template](/en/luban/advanced/template/), and the corresponding asynchronous loading example project [csharp_async_load](https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_CustomTemplate_AsyncLoad)

## Does it support custom code or data generation?

Support. See [data and code template](/en/luban/advanced/template/)

## How to export the definition and data of protobuf

See [Code and Data Generation](/en/luban/generate_code_data/)

## How to export msgpack data

See [Code and Data Generation](/en/luban/generate_code_data/)

## How to export the definition and data of flatbuffers

See [Code and Data Generation](/en/luban/generate_code_data/)

## After generation, the local directory will generate a .cache.meta, what is the purpose of this file?

.cache.meta contains information (path, md5 code, length, modification timestamp) of all files involved in the interaction with Luban.Server. Used to optimize build performance.

Since the working model of Luban.Client and Luban.Server is a cloud generation model, after Luban.Client initiates a generation request to the server, the server does not directly read the configuration file required for generation, but first obtains
The meta information (path, md5) of these files, if there is a file with the same md5 in the memory cache, it will be read directly, and the file data will not be read from the client, which greatly improves the performance of incremental generation.

After the server is generated, it will also send the generated file metadata list to the client, including (path, md5) these metadata information. If these files do not exist locally, download the download, if they already exist, check
Whether there is any change, at this time Luban.Client will not directly read the local file and calculate md5, but first check whether there is corresponding file md5 information in .cache.meta, if the length of the local file and the modification timestamp
If it is the same as that in .cache.meta, it is considered that .cache.meta contains the correct md5 value, and then compare this value with the md5 of the result generated by the server. Only if it is different, will it be re-downloaded.

## Can I reference existing enums and structs? For example, you want to use UnityEngine.AudioType and UnityEngine.Color in the generated code

Yes, enumerations and structures of external types are supported, but currently only the C# language is supported. For detailed documentation, see the external type related documentation in [Configuration Definition Introduction](/en/luban/define/).
