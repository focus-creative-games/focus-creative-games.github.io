---
title: Common Errors
date: 2022-08-23 09:00:00
permalink: /hybridclr/common_errors/
categories:
  - HybridCLR
  - errors
tags:
  - 
author: 
  name: walon
  link: https://github.com/pirunxi
---

# Common Errors

Not all errors are included here, you can go to [Forum](https://forum.focus-creative-games.com/topics) for more information.

## Errors under Unity Editor

### Installer clicks to install and appears: git is not recognized as an internal or external command, nor is it a runnable program

Git needs to be installed. Install [GitForWindows](https://gitforwindows.org/) under Windows. Please install as appropriate for other platforms.

## An error occurred while packaging


### Currently selected scripting backend (IL2CPP) is not installed

Please install the il2cpp module in Unity Hub. The mode of operation is:

- Switch to the Installers tab on the left side of UnityHub
- On the version of Unity you are currently using `Right-click -> Add Modules`, select the IL2CPP component of the current platform, for example, select `Windows Build Support(Il2CPP)` for the Win platform
- Install
- Reopen the Unity Editor

### `Exception: C++ code bulider is unable to build C+ code. Inorder to build C++ code for Windows Destop, You must have one of these installed. xxxxx

You don't have vs and win 10 sdk installed. Please install vs, and install the `game development using c++` component in the Visual Studio Installer. Just choose the latest win 10 sdk.

## Problems when packaging

### Encountered Undefined symbols for architecture arm64: "Il2CppCodeGenWriteBarrier(void**, void*)", referenced from:...

Cancel `Increasemental GC` option in PlayerSetting.

### Undefined symbols appear when packaging iOS: RuntimeApi_LoadMetadataForAOTAssembly or HuatuoApi_LoadMetadataForAOTAssembly

Because you are using the original libil2cpp.a or the outdated libil2cpp.a. Please compile the latest one according to [build iOS libil2cpp.a](/en/hybridclr/build_ios_libil2cpp/) documentation. Then replace the libil2cpp.a file in the xcode project

## Building Library/Bee/artifacts/xxxx failed with output: Fatalerror in Unitiy CIL Linker Mono.Cecil.AssemblyResolutionException: Failed to resolve assembly:'xxx'

You mistakenly referenced the 'xxx' hot update dll in the main project. If you can't find where it is referenced, you can try to delete the hot update module 'xxx' first, and locate it according to the compilation error.

## Errors such as undefine symbol: send file encountered when packaging the WebGL platform

This error has nothing to do with HybridCLR. This is because WebGL has restrictions on many functions. For example, the send file symbol is lost because IO-related functions cannot be called.

If you encounter problems, please eliminate those functions that the WebGL platform does not support. Specifically read the Unity documentation yourself.

## HybridCLR encountered `err LNK 2019 xxxx. public: static il2cpp::utils::Debugger::Init` when packaging

For details, please see the forum [link](https://forum.focus-creative-games.com/topics/41)

## Runtime errors

### A scripted object (probably XXX?) has a different serialization layout when loading. Did you #ifdef UNITY_EDITOR a section of your serialized properties in any of your scripts?


The dll cannot be copied directly from ScriptAssemblies, because it may contain incorrect macro switches, resulting in reference to Editor or other codes, so it must be compiled with scripts. For details, please refer to the scripts related to the menu `HybridCLR/CompileDll/*`.

In addition, the hot update script referenced in the AOT resource in the main project may also cause this error, for example, the resource under Resources references the hot update script.

### The script mounted on the resource has a Script Missing error

Due to the implementation mechanism of Unity's resource management, resources must be packaged as AssetBundle to restore the hot update script normally, and they cannot be placed under Resource.

For details, please see [MonoBehaviour workflow](/en/hybridclr/monobehaviour/)

### Encountered "This icall is not supported by il2cpp at System.AppDomain.Load"

there are two reasons

1. If the platform is not ios, it is because HybridCLR is not installed. Please refer to [Install HybridCLR](/en/hybridclr/install/) document.
2. If the ios platform, because the ios platform does not compile libil2cpp from the source code, but uses the pre-compiled libil2cpp.a, you need to replace the libil2cpp.a in the xcode project with the compiled version of HybridCLR. See [build libil2cpp.a for iOS](/en/hybridclr/build_ios_libil2cpp/) for compilation method

### unsupported internal call for il2cpp.xxxx

A function that exists in Mono but is not implemented in il2cpp is called. Please modify the code and do not use these classes and functions.

### Encountered the problem of inconsistency between Async calling Editor and packaging

If the code throws an exception in async and does not catch the exception, it will cause a silent failure. At present, in case of an error in async due to clipping or aot generics, there will be no error prompt. This results in inconsistent behavior.

Solution: catch async exceptions, and then resolve the corresponding exceptions.

### Encountered Unity: TypeLoadException: Could not load type 'XxxType' from assembly 'yyyAssembly'

There are two situations:

#### Case 1: yyyAssembly is netstandard

This is because `api compatible level` in your Player Settings is set to .net standard.

Currently supports .net standard 2.0 and .net 4.x, but even if the main project is packaged with .net standard, hot update dll must be packaged with .net 4.x**. The reason is that when Unity uses .net standard to package, it will automatically strip the dependencies of .net standard and directly depend on the final dll, resulting in the fact that the dll of net standard does not exist in the dll list of the main project, which in turn causes the hot update dll to load. Object from netstandard could not be found.

The solution is to use .net 4.x for packaging and compiling hot updates, or use .net standard 2.0 for packaging, but switch the api compatible level to .net 4.x when compiling the hot update part (renamed to .net framework from 2021).

#### Case 2: yyyAssembly is other assembly

This is the function loss caused by unity code clipping, you can use the conventional way to avoid unity code clipping.

According to the Unity anti-clipping principle, you can add a reference to the missing code class in link.xml, but this kind of thing is time-consuming and laborious.

HybridCLR provides a quick automatic generation tool, run the menu command `HybridCLR/Genrate/LinkXml` to generate link.xml according to the hot update dll.


### Encountered MissingMethodException xxx error

Two cases are distinguished:

#### Case 1: MissingMethodException: AOT generic method isn't instantiated in aot module xxx

This is caused by the lack of instantiation of AOT generic functions.

There are two solutions:

- The error log tells you which AOT function instantiation is missing, and you add a call to this function in the main project, so that il2cpp can generate the code of this generic function when packaging. You can add this generic AOT function call anywhere in the main project. Currently, it is generally added to the RefTypes.cs file.
- Use of complementary metadata techniques

For specific operations, please refer to the [AOT Generic Principles Introduction](/en/hybridclr/aot_generic/) document.


#### Situation 2: The word AOT generic method does not appear in the error log

This is the function loss caused by unity code clipping, you can use the conventional way to avoid unity code clipping.

According to the Unity anti-clipping principle, you can add a reference to the missing code class in link.xml, but this kind of thing is time-consuming and laborious.

HybridCLR provides a quick automatic generation tool, run the menu command `HybridCLR/Genrate/LinkXml` to generate link.xml according to the hot update dll

### Encountered 'ExecutionEngineException: Image::ReadTypeFromResolutionScope ReadTypeFromResolutionScope.TYPEREF fail'

Caused by clipping, which clips the inner class of the class. The processing method is the same as above.

### Encountered ExecutionEngineException: metadata type not match

In the LoadMetadataForAOTAssembly method, the loaded dll uses the version before clipping. The cropped one should be used. For specific usage, please refer to the hybridclr_trial project. In BuildProcessor, after generating the tailored dll, copy the dll to the temporary storage directory.

### Encountered ExecutionEngineException: xxx method body is null. not support external method...

It is easy to encounter this error when connecting to the SDK. This is because the definition of external functions in hot updates is not supported and needs to be placed in the AOT part.

The extern function in the AOT can be called normally in the hot update code, but the extern function in the interpretation part cannot be called.

### Encountered ExecutionEngineException: GetManaged2NativeMethodPointer not support. xxxx function name

Missing bridge function for interpreter -> aot direction. Please make sure that your hybridclr is the latest code, and the hybridclr_unity package is also the latest version,
And the latest bridge function has been generated. Please refer to [bridge function](/en/hybridclr/method_bridge/) for the principle.

If there are still problems, please report to walon in the group.

### Encountered 'ExecutionEngineException: NotSupportNative2Managed'

Missing bridge function for aot -> interpreter direction. Please make sure that your hybridclr is the latest code, and the hybridclr_unity package is also the latest version,
And the latest bridge function has been generated. Please refer to [bridge function](/en/hybridclr/method_bridge/) for the principle.

If there are still problems, please report to walon in the group.

### MethodAccessException error

You mistakenly enabled incremental GC, causing object memory to be overwritten. Please turn off incremental gc in player settings.

### When using addressable for hot update, a KetNotFound exception occurs when loading resources

The reason is that when addressable is loaded by default, all types in the resource will be initialized, but at this time the hot update dll has not been loaded, and the corresponding hot update type cannot be found.

The solution is to turn off automatic loading, then manually load the hot update dll, and then automatically load resources.

### GameObject.GetComponent(string name) interface cannot get component

This is a known bug, which is related to the code implementation of unity. This problem occurs only when the hot update script is mounted on the hot update resource. The hot update script added through AddComponent in the code can be found by this method. Please use `GameObject.GetComponent<T>()` or `GameObject.GetComponent(typeof(T))` instead.
