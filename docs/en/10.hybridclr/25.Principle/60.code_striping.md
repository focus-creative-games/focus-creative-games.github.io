---
title: Code clipping problem
date: 2022-05-25 11:50:18
permalink: /hybridclr/code_striping/
categories:
    - HybridCLR
tags:
    -
author:
    name: walon
    link: https://github.com/pirunxi
---

# Code clipping problem

Unity uses [Code Stripping](https://docs.unity3d.com/Manual/ManagedCodeStripping.html) technology to help reduce the package size of the il2cpp backend. If anti-cutting processing is not performed, since there are generally not many codes in the AOT main project, a large number of C# types and functions are
Clipping, resulting in the following exceptions when calling these clipped classes or functions during hot update:

```txt
     // missing type error
     Unity: TypeLoadException: Could not load type 'Xxx' from assembly 'yyy'

     // missing function error
     MissingMethodException: xxxx
```

## Solution

The standard solution is to determine which type or function is cut according to the log error log, and then keep this type or function in link.xml, or
Add calls to these classes or functions explicitly in the main project.

If you are not familiar with how to preserve this type or function in link.xml, please refer to [Code Stripping](https://docs.unity3d.com/Manual/ManagedCodeStripping.html).

But this method is very troublesome after all. There are a lot of cut types in the actual project, and you perform the operation of "package-type missing-supplement-package" over and over again,
Wasted a lot of time. [hybridclr_unity package](/hybridclr/hybridclr_unity/) provides a convenient generation script,
You can run the menu `HybridCLR/Generate/LinkXml` to generate all AOT types and function references in the hot update project with one click. see details
The documentation for the hybridclr_unity package states.

## AOT type and function reserved

Although hybridclr_unity's link generation script can intelligently scan out the AOT type you are currently referencing, it cannot predict the AOT type you will use in the future
type. Therefore, you still need to plan ahead in `Assets/link.xml` (note! Not the automatically generated link.xml) to reserve your future
types that may be used. Remember not to miss it, so as to avoid the embarrassing situation that the type used in a certain update is cut after it goes online!