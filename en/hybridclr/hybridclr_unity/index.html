<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduce hybridclr_unity Package | Code Philosophy</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.png">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <meta name="description" content="Code Philosophy是一个业内领先的专注于提供游戏行业深度技术解决方案的创新型公司。">
    <meta name="keywords" content="HybridCLR,luban,热更新,配表,配置,游戏,git,github">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.de16ca54.css" as="style"><link rel="preload" href="/assets/js/app.12d5fdbe.js" as="script"><link rel="preload" href="/assets/js/2.0771a7ec.js" as="script"><link rel="preload" href="/assets/js/112.d97b1c0a.js" as="script"><link rel="preload" href="/assets/js/3.8d0c7075.js" as="script"><link rel="prefetch" href="/assets/js/10.d15b8a0c.js"><link rel="prefetch" href="/assets/js/100.59f432fb.js"><link rel="prefetch" href="/assets/js/101.3de7bbde.js"><link rel="prefetch" href="/assets/js/102.4a0758d3.js"><link rel="prefetch" href="/assets/js/103.26383b9f.js"><link rel="prefetch" href="/assets/js/104.a1da4ecb.js"><link rel="prefetch" href="/assets/js/105.ef6a6e83.js"><link rel="prefetch" href="/assets/js/106.da96dd79.js"><link rel="prefetch" href="/assets/js/107.ec48bd70.js"><link rel="prefetch" href="/assets/js/108.0f684202.js"><link rel="prefetch" href="/assets/js/109.2a494194.js"><link rel="prefetch" href="/assets/js/11.764b6824.js"><link rel="prefetch" href="/assets/js/110.84415013.js"><link rel="prefetch" href="/assets/js/111.b2685030.js"><link rel="prefetch" href="/assets/js/113.fc2f8b72.js"><link rel="prefetch" href="/assets/js/114.389fdf76.js"><link rel="prefetch" href="/assets/js/115.d7da7753.js"><link rel="prefetch" href="/assets/js/116.7ba543d5.js"><link rel="prefetch" href="/assets/js/117.d7087ed2.js"><link rel="prefetch" href="/assets/js/118.afcabf3e.js"><link rel="prefetch" href="/assets/js/119.2bcae880.js"><link rel="prefetch" href="/assets/js/12.8d2b0d29.js"><link rel="prefetch" href="/assets/js/120.e7473c03.js"><link rel="prefetch" href="/assets/js/121.e7f1865f.js"><link rel="prefetch" href="/assets/js/122.1ee03f15.js"><link rel="prefetch" href="/assets/js/123.8c8de603.js"><link rel="prefetch" href="/assets/js/124.1c8fa702.js"><link rel="prefetch" href="/assets/js/125.92167af0.js"><link rel="prefetch" href="/assets/js/126.d729738c.js"><link rel="prefetch" href="/assets/js/127.291f69f0.js"><link rel="prefetch" href="/assets/js/128.08210df8.js"><link rel="prefetch" href="/assets/js/129.40b77886.js"><link rel="prefetch" href="/assets/js/13.e0289cd0.js"><link rel="prefetch" href="/assets/js/130.8305c052.js"><link rel="prefetch" href="/assets/js/131.5e6ae27f.js"><link rel="prefetch" href="/assets/js/132.d9c12ddc.js"><link rel="prefetch" href="/assets/js/133.82886760.js"><link rel="prefetch" href="/assets/js/134.6f64a5d9.js"><link rel="prefetch" href="/assets/js/135.b90b8356.js"><link rel="prefetch" href="/assets/js/136.24e466af.js"><link rel="prefetch" href="/assets/js/137.aaf435ae.js"><link rel="prefetch" href="/assets/js/138.00c60cde.js"><link rel="prefetch" href="/assets/js/139.14e869b2.js"><link rel="prefetch" href="/assets/js/14.81465e75.js"><link rel="prefetch" href="/assets/js/140.de231325.js"><link rel="prefetch" href="/assets/js/141.4ad5ea60.js"><link rel="prefetch" href="/assets/js/142.f36e159e.js"><link rel="prefetch" href="/assets/js/143.2e4611d8.js"><link rel="prefetch" href="/assets/js/144.e9ebb3fa.js"><link rel="prefetch" href="/assets/js/145.1a9f5fad.js"><link rel="prefetch" href="/assets/js/146.624849a0.js"><link rel="prefetch" href="/assets/js/147.461906c5.js"><link rel="prefetch" href="/assets/js/148.d28d7aaa.js"><link rel="prefetch" href="/assets/js/149.9784b5ed.js"><link rel="prefetch" href="/assets/js/15.6b1ebda0.js"><link rel="prefetch" href="/assets/js/150.240e44d2.js"><link rel="prefetch" href="/assets/js/151.604089c9.js"><link rel="prefetch" href="/assets/js/152.f73b8be0.js"><link rel="prefetch" href="/assets/js/153.e16a3cbb.js"><link rel="prefetch" href="/assets/js/16.9f462aa4.js"><link rel="prefetch" href="/assets/js/17.f6132239.js"><link rel="prefetch" href="/assets/js/18.a0728471.js"><link rel="prefetch" href="/assets/js/19.647597ef.js"><link rel="prefetch" href="/assets/js/20.113a110f.js"><link rel="prefetch" href="/assets/js/21.e8949420.js"><link rel="prefetch" href="/assets/js/22.715d702b.js"><link rel="prefetch" href="/assets/js/23.0c731f9a.js"><link rel="prefetch" href="/assets/js/24.83715717.js"><link rel="prefetch" href="/assets/js/25.a6efb8d9.js"><link rel="prefetch" href="/assets/js/26.876b7bf2.js"><link rel="prefetch" href="/assets/js/27.7e6a1fbc.js"><link rel="prefetch" href="/assets/js/28.c9603a98.js"><link rel="prefetch" href="/assets/js/29.7a6ffd69.js"><link rel="prefetch" href="/assets/js/30.bbdcda14.js"><link rel="prefetch" href="/assets/js/31.441495f6.js"><link rel="prefetch" href="/assets/js/32.516dc27e.js"><link rel="prefetch" href="/assets/js/33.796a4638.js"><link rel="prefetch" href="/assets/js/34.b844a239.js"><link rel="prefetch" href="/assets/js/35.4489eede.js"><link rel="prefetch" href="/assets/js/36.4944cc18.js"><link rel="prefetch" href="/assets/js/37.2b295b6f.js"><link rel="prefetch" href="/assets/js/38.c7f25fa6.js"><link rel="prefetch" href="/assets/js/39.f350b082.js"><link rel="prefetch" href="/assets/js/4.e8f1cdb3.js"><link rel="prefetch" href="/assets/js/40.6346e1bc.js"><link rel="prefetch" href="/assets/js/41.703948ac.js"><link rel="prefetch" href="/assets/js/42.cb158675.js"><link rel="prefetch" href="/assets/js/43.a6366a4f.js"><link rel="prefetch" href="/assets/js/44.67b267cd.js"><link rel="prefetch" href="/assets/js/45.d9ded0f6.js"><link rel="prefetch" href="/assets/js/46.dce204c1.js"><link rel="prefetch" href="/assets/js/47.f59b1714.js"><link rel="prefetch" href="/assets/js/48.e72d5a9a.js"><link rel="prefetch" href="/assets/js/49.57c226c6.js"><link rel="prefetch" href="/assets/js/5.765a6984.js"><link rel="prefetch" href="/assets/js/50.696d3556.js"><link rel="prefetch" href="/assets/js/51.f9fcee2c.js"><link rel="prefetch" href="/assets/js/52.e8d8f311.js"><link rel="prefetch" href="/assets/js/53.cb8fbe86.js"><link rel="prefetch" href="/assets/js/54.4df421a2.js"><link rel="prefetch" href="/assets/js/55.5a9cb469.js"><link rel="prefetch" href="/assets/js/56.7e073255.js"><link rel="prefetch" href="/assets/js/57.6756691b.js"><link rel="prefetch" href="/assets/js/58.9d1c4a46.js"><link rel="prefetch" href="/assets/js/59.a560b055.js"><link rel="prefetch" href="/assets/js/6.ddf0c9b8.js"><link rel="prefetch" href="/assets/js/60.a23590d0.js"><link rel="prefetch" href="/assets/js/61.5b3a43f9.js"><link rel="prefetch" href="/assets/js/62.72a56b46.js"><link rel="prefetch" href="/assets/js/63.ceded64f.js"><link rel="prefetch" href="/assets/js/64.f26c8cb9.js"><link rel="prefetch" href="/assets/js/65.fb45c073.js"><link rel="prefetch" href="/assets/js/66.83ebce20.js"><link rel="prefetch" href="/assets/js/67.eff63cf4.js"><link rel="prefetch" href="/assets/js/68.8bb955ae.js"><link rel="prefetch" href="/assets/js/69.dae7cec8.js"><link rel="prefetch" href="/assets/js/7.32660699.js"><link rel="prefetch" href="/assets/js/70.20e84c9c.js"><link rel="prefetch" href="/assets/js/71.6c135456.js"><link rel="prefetch" href="/assets/js/72.a6cef57b.js"><link rel="prefetch" href="/assets/js/73.ea109d55.js"><link rel="prefetch" href="/assets/js/74.31bd4677.js"><link rel="prefetch" href="/assets/js/75.e90da937.js"><link rel="prefetch" href="/assets/js/76.74f061bb.js"><link rel="prefetch" href="/assets/js/77.4a1bfa57.js"><link rel="prefetch" href="/assets/js/78.7847ecac.js"><link rel="prefetch" href="/assets/js/79.5fa65e36.js"><link rel="prefetch" href="/assets/js/8.62b0d450.js"><link rel="prefetch" href="/assets/js/80.008f19fa.js"><link rel="prefetch" href="/assets/js/81.e245ac7c.js"><link rel="prefetch" href="/assets/js/82.8f5a662c.js"><link rel="prefetch" href="/assets/js/83.cc9a1992.js"><link rel="prefetch" href="/assets/js/84.dcf087c6.js"><link rel="prefetch" href="/assets/js/85.be5afefb.js"><link rel="prefetch" href="/assets/js/86.97d6599a.js"><link rel="prefetch" href="/assets/js/87.1df10b08.js"><link rel="prefetch" href="/assets/js/88.f5a3d153.js"><link rel="prefetch" href="/assets/js/89.1a78c9ca.js"><link rel="prefetch" href="/assets/js/9.f51c0ef6.js"><link rel="prefetch" href="/assets/js/90.dfb15931.js"><link rel="prefetch" href="/assets/js/91.a5bdf350.js"><link rel="prefetch" href="/assets/js/92.4d4d7050.js"><link rel="prefetch" href="/assets/js/93.4ce8faaa.js"><link rel="prefetch" href="/assets/js/94.13bd2ab5.js"><link rel="prefetch" href="/assets/js/95.f941715f.js"><link rel="prefetch" href="/assets/js/96.6adeb803.js"><link rel="prefetch" href="/assets/js/97.6e1aaaf3.js"><link rel="prefetch" href="/assets/js/98.53de0dca.js"><link rel="prefetch" href="/assets/js/99.6f94e8b5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.de16ca54.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><img src="/img/logo.png" alt="Code Philosophy" class="logo"> <span class="site-name can-hide">Code Philosophy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HybridCLR" class="dropdown-title"><!----> <span class="title" style="display:;">HybridCLR</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/hybridclr/about/" class="nav-link">About</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/monobehaviour/" class="nav-link">Get Started</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/benchmark/" class="nav-link">Benchmark</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/faq/" class="nav-link">FAQ</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/common_errors/" class="nav-link">Common Mistakes</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/bug_reporter/" class="nav-link">Report Bugs</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Luban" class="dropdown-title"><a href="/en/luban/index/" class="link-title">Luban</a> <span class="title" style="display:none;">Luban</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/luban/about/" class="nav-link">About</a></li><li class="dropdown-item"><!----> <a href="/en/luban/start_up/" class="nav-link">Get Started</a></li><li class="dropdown-item"><!----> <a href="/en/luban/command_tools/" class="nav-link">Complete Features</a></li><li class="dropdown-item"><!----> <a href="/en/luban/data_source/" class="nav-link">Data Source</a></li><li class="dropdown-item"><!----> <a href="/en/luban/advanced/validator/" class="nav-link">Advanced Features</a></li><li class="dropdown-item"><!----> <a href="/en/luban/tools/" class="nav-link">Luban Tools</a></li></ul></div></div><div class="nav-item"><a href="/en/hybridclr/price/" class="nav-link">Service</a></div><div class="nav-item"><a href="/en/join/" class="nav-link">Jobs</a></div><div class="nav-item"><a href="https://www.zhihu.com/column/c_1489549396035870720" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Zhihu
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/en/about/" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><!----> <span class="title" style="display:;">切换语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hybridclr/hybridclr_unity/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/hybridclr_unity/" aria-current="page" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div> <a href="https://github.com/focus-creative-games" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/en/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HybridCLR" class="dropdown-title"><!----> <span class="title" style="display:;">HybridCLR</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/hybridclr/about/" class="nav-link">About</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/monobehaviour/" class="nav-link">Get Started</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/benchmark/" class="nav-link">Benchmark</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/faq/" class="nav-link">FAQ</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/common_errors/" class="nav-link">Common Mistakes</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/bug_reporter/" class="nav-link">Report Bugs</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Luban" class="dropdown-title"><a href="/en/luban/index/" class="link-title">Luban</a> <span class="title" style="display:none;">Luban</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/luban/about/" class="nav-link">About</a></li><li class="dropdown-item"><!----> <a href="/en/luban/start_up/" class="nav-link">Get Started</a></li><li class="dropdown-item"><!----> <a href="/en/luban/command_tools/" class="nav-link">Complete Features</a></li><li class="dropdown-item"><!----> <a href="/en/luban/data_source/" class="nav-link">Data Source</a></li><li class="dropdown-item"><!----> <a href="/en/luban/advanced/validator/" class="nav-link">Advanced Features</a></li><li class="dropdown-item"><!----> <a href="/en/luban/tools/" class="nav-link">Luban Tools</a></li></ul></div></div><div class="nav-item"><a href="/en/hybridclr/price/" class="nav-link">Service</a></div><div class="nav-item"><a href="/en/join/" class="nav-link">Jobs</a></div><div class="nav-item"><a href="https://www.zhihu.com/column/c_1489549396035870720" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Zhihu
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/en/about/" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><!----> <span class="title" style="display:;">切换语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hybridclr/hybridclr_unity/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/hybridclr_unity/" aria-current="page" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div> <a href="https://github.com/focus-creative-games" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Content</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>About</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>hybridclr</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/hybridclr/about/" class="sidebar-link">About HybridCLR</a></li><li><a href="/en/hybridclr/start_up/" class="sidebar-link">Get started quickly</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Tutorial</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Principle</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/hybridclr/build_pipeline/" class="sidebar-link">HybridCLR packaging workflow</a></li><li><a href="/en/hybridclr/monobehaviour/" class="sidebar-link">Hot update MonoBehaviour</a></li><li><a href="/en/hybridclr/build_ios_libil2cpp/" class="sidebar-link">iOS packaging</a></li><li><a href="/en/hybridclr/differential_hybrid_execution/" class="sidebar-link">Differential Hybrid Execution</a></li><li><a href="/en/hybridclr/hybridclr_unity/" aria-current="page" class="active sidebar-link">Introduce hybridclr_unity Package</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/en/hybridclr/hybridclr_unity/#install" class="sidebar-link">Install</a></li><li class="sidebar-sub-header level2"><a href="/en/hybridclr/hybridclr_unity/#hybridclr-menu-introduction" class="sidebar-link">HybridCLR menu introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#installer" class="sidebar-link">Installer...</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#compile-dll" class="sidebar-link">Compile Dll</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#generate" class="sidebar-link">Generate</a></li><li class="sidebar-sub-header level4"><a href="/en/hybridclr/hybridclr_unity/#aotgenericreference" class="sidebar-link">AOTGenericReference</a></li><li class="sidebar-sub-header level4"><a href="/en/hybridclr/hybridclr_unity/#reversepinvokewrapper" class="sidebar-link">ReversePInvokeWrapper</a></li><li class="sidebar-sub-header level4"><a href="/en/hybridclr/hybridclr_unity/#il2cppdef" class="sidebar-link">Il2CppDef</a></li><li class="sidebar-sub-header level4"><a href="/en/hybridclr/hybridclr_unity/#dheassemblylist" class="sidebar-link">DHEAssemblyList</a></li><li class="sidebar-sub-header level4"><a href="/en/hybridclr/hybridclr_unity/#dheassemblyoptiondatas" class="sidebar-link">DHEAssemblyOptionDatas</a></li><li class="sidebar-sub-header level4"><a href="/en/hybridclr/hybridclr_unity/#all" class="sidebar-link">All</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/en/hybridclr/hybridclr_unity/#hybridclr-configuration" class="sidebar-link">HybridCLR configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#enable" class="sidebar-link">enable</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#useglobalil2cpp" class="sidebar-link">useGlobalIl2cpp</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#hybridclrrepourl" class="sidebar-link">hybridclrRepoURL</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#il2cppplusrepourl" class="sidebar-link">il2cppPlusRepoURL</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#hotupdateassemblydefinitions" class="sidebar-link">hotUpdateAssemblyDefinitions</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#hotupdateassemblies" class="sidebar-link">hotUpdateAssemblies</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#preservehotupdateassemblies" class="sidebar-link">preserveHotUpdateAssemblies</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#hotupdatedllcompileoutputrootdir" class="sidebar-link">hotUpdateDllCompileOutputRootDir</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#externalhotupdateassemblydirs" class="sidebar-link">externalHotUpdateAssemblyDirs</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#strippedaotdlloutputrootdir" class="sidebar-link">strippedAOTDllOutputRootDir</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#patchaota-assemblies" class="sidebar-link">patchAOTA Assemblies</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#differentialhybridassemblies" class="sidebar-link">differentialHybridAssemblies</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#differentialhybridoptionoutputdir" class="sidebar-link">differentialHybridOptionOutputDir</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#outputlinkfile" class="sidebar-link">outputLinkFile</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#outputaotgenericreferencefile" class="sidebar-link">outputAOTGenericReferenceFile</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#maxgenericreferenceiteration" class="sidebar-link">maxGenericReferenceIteration</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#maxmethodbridgegenericiteration" class="sidebar-link">maxMethodBridgeGenericIteration</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/en/hybridclr/hybridclr_unity/#editor-related-tools" class="sidebar-link">Editor related tools</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#initialize-hybridclr" class="sidebar-link">Initialize HybridCLR</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#check-and-fix-settings" class="sidebar-link">Check and fix settings</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#automatically-exclude-hot-update-assembly-when-packaging" class="sidebar-link">Automatically exclude hot update assembly when packaging</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#maxmethodbridgegenericiteration-2" class="sidebar-link">maxMethodBridgeGenericIteration</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/en/hybridclr/hybridclr_unity/#editor-related-tools-2" class="sidebar-link">Editor related tools</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#initialize-hybridclr-2" class="sidebar-link">Initialize HybridCLR</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#check-and-fix-settings-2" class="sidebar-link">Check and fix settings</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#automatically-exclude-hot-update-assembly-when-packaging-2" class="sidebar-link">Automatically exclude hot update assembly when packaging</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#generate-some-files-and-codes-needed-for-packaging" class="sidebar-link">Generate some files and codes needed for packaging</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/en/hybridclr/hybridclr_unity/#iosbuild-script" class="sidebar-link">iOSBuild script</a></li><li class="sidebar-sub-header level2"><a href="/en/hybridclr/hybridclr_unity/#runtime-related-scripts" class="sidebar-link">Runtime related scripts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#loadimageerrorcode" class="sidebar-link">LoadImageErrorCode</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#metadata-mode-homologousimagemode" class="sidebar-link">Metadata Mode HomologousImageMode</a></li><li class="sidebar-sub-header level4"><a href="/en/hybridclr/hybridclr_unity/#homologousimagemode-consistent-mode" class="sidebar-link">HomologousImageMode::Consistent mode</a></li><li class="sidebar-sub-header level4"><a href="/en/hybridclr/hybridclr_unity/#homologousimagemode-superset-mode" class="sidebar-link">HomologousImageMode::SuperSet mode</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#runtimeapi" class="sidebar-link">RuntimeApi</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#unchangedattribute" class="sidebar-link">UnchangedAttribute</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/hybridclr_unity/#reversepinvokewrappergenerationattribute" class="sidebar-link">ReversePInvokeWrapperGenerationAttribute</a></li></ul></li></ul></li><li><a href="/en/hybridclr/modify_unity_dll/" class="sidebar-link">Modify Unity editor related dll</a></li><li><a href="/en/hybridclr/code_striping/" class="sidebar-link">Code clipping problem</a></li><li><a href="/en/hybridclr/aot_generic/" class="sidebar-link">AOT generic problem</a></li><li><a href="/en/hybridclr/method_bridge/" class="sidebar-link">AOT-interpreter bridge function</a></li><li><a href="/en/hybridclr/memory/" class="sidebar-link">Memory-related principles</a></li><li><a href="/en/hybridclr/performance/" class="sidebar-link">Execution performance</a></li><li><a href="/en/hybridclr/limit/" class="sidebar-link">Limit</a></li><li><a href="/en/hybridclr/work_with_script_language/" class="sidebar-link">HybridCLR+lua/js/python</a></li><li><a href="/en/hybridclr/monopinvokecallback/" class="sidebar-link">MonoPInvokeCallback Support</a></li><li><a href="/en/hybridclr/supported_unity_versions/" class="sidebar-link">Version Matching Rules</a></li><li><a href="/en/hybridclr/supported_platform/" class="sidebar-link">Cross-platform Support</a></li><li><a href="/en/hybridclr/source_inspect/" class="sidebar-link">HybridCLR source code structure and debugging</a></li><li><a href="/en/hybridclr/best_practices/" class="sidebar-link">Best Practices</a></li><li><a href="/en/hybridclr/129afe/" class="sidebar-link">il2cpp bugs</a></li></ul></section></li><li><a href="/en/hybridclr/faq/" class="sidebar-link">FAQ</a></li><li><a href="/en/hybridclr/benchmark/" class="sidebar-link">Testing Report</a></li><li><a href="/en/hybridclr/business_games/" class="sidebar-link">Already launched commercial projects</a></li><li><a href="/en/hybridclr/common_errors/" class="sidebar-link">Common Errors</a></li><li><a href="/en/hybridclr/bug_reporter/" class="sidebar-link">BUG Feedback Template</a></li><li><a href="/en/hybridclr/recommended-tools/" class="sidebar-link">Related Third-party Projects</a></li><li><a href="/en/hybridclr/roadmap/" class="sidebar-link">Roadmap</a></li><li><a href="/en/hybridclr/development_story/" class="sidebar-link">Development History</a></li><li><a href="/en/hybridclr/price/" class="sidebar-link">Commercial Service</a></li><li><a href="/en/hybridclr/donate/" class="sidebar-link">Acknowledgments</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>luban</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>gidb</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=en" title="分类" data-v-06225672>en</a></li><li data-v-06225672><a href="/categories/?category=hybridclr" title="分类" data-v-06225672>hybridclr</a></li><li data-v-06225672><a href="/categories/?category=Principle" title="分类" data-v-06225672>Principle</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https:://code-philosophy.com" target="_blank" title="作者" class="beLink" data-v-06225672>Code Philosophy</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-05-25</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Introduce hybridclr_unity Package<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="hybridclr-unity"><a href="#hybridclr-unity" class="header-anchor">#</a> hybridclr_unity</h1> <p>hybridclr_unity is a Unity package that provides Editor workflow tool scripts and Runtime scripts required by HybridCLR. with the help of
The workflow tool provided by hybridclr_unity makes it very easy to package an App that supports HybridCLR hot update function.</p> <p>The hybridclr_unity tool mainly includes:</p> <ul><li>Editor related scripts
-iOSBuild script</li> <li>Runtime related scripts</li></ul> <h2 id="install"><a href="#install" class="header-anchor">#</a> Install</h2> <p>Install <code>com.focus-creative-games.hybridclr_unity</code> from git url <a href="https://gitee.com/focus-creative-games/hybridclr_unity" target="_blank" rel="noopener noreferrer">gitee (recommended)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://github.com/focus-creative-games/hybridclr_unity" target="_blank" rel="noopener noreferrer">github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> package.</p> <p>If you are not familiar with installing packages from url, please see <a href="https://docs.unity3d.com/Manual/upm-ui-giturl.html" target="_blank" rel="noopener noreferrer">install from giturl<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Due to domestic network reasons, you may encounter network exceptions in Unity and fail to install. You can clone or download <code>com.focus-creative-games.hybridclr_unity</code> to local, and then <a href="https://docs.unity3d.com/Manual/upm-ui-local.html" target="_blank" rel="noopener noreferrer">install from disk<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Or a simpler way, after downloading to the local, rename the warehouse folder directory to <code>com.focus-creative-games.hybridclr_unity</code>, and copy it directly to the <code>Packages</code> directory of your project.</p> <h2 id="hybridclr-menu-introduction"><a href="#hybridclr-menu-introduction" class="header-anchor">#</a> HybridCLR menu introduction</h2> <h3 id="installer"><a href="#installer" class="header-anchor">#</a> Installer...</h3> <p>A handy installer is provided to help correctly set up the local il2cpp directory, which contains a modified version replacing the <code>HybridCLRData/LocalIl2CppData-{platform}/il2cpp/libil2cpp</code> directory with HybridCLR.</p> <p>The installer needs to copy il2cpp (similar to <code>C:\Program Files\Unity\Hub\Editor\2020.3.33f1\Editor\Data\il2cpp</code>) related files from the Unity installation directory of the matching version.</p> <ul><li>For 2019.4.40+, 2021.3.25+, 2021.3.0+ versions, copy the il2cpp file directly from the installation directory of that version.</li> <li>For 2020.3.16-2020.3.20 versions, 2020.3.26+ versions need to be installed additionally, because the il2cpp files of these versions are not compatible with HybridCLR, but il2cpp of compatible versions (ie 2020.3.26+) can be used.  <strong>Notice! From version 1.1.7, the installer no longer supports installing il2cpp related files from other versions, you can only install them manually according to the principle.</strong></li></ul> <p><code>Installation Status: Installed | Not Installed</code> in the installation interface indicates whether HybridCLR initialization is complete.</p> <p>In the installation interface, the <code>il2cpp_plus branch corresponds to the il2cpp path of the compatible version of Unity</code> (<strong>Note! Version 1.1.7 removed this setting.</strong>) Several conditions must be met:</p> <ul><li>Must be the il2cpp directory of a compatible unity version</li> <li>The path must contain the unity version number (the Installer is used to identify the Unity version, and to prevent novices from choosing the wrong directory)</li></ul> <p>If the path is legal, the interface will display normally, otherwise a red warning will appear.</p> <p>Fill in the commit id or branch or tag of the hybridclr and il2cpp_plus warehouses you want to install. If the version number of hybridclr is left blank, install the latest version from the main branch of the hybridclr repository.
If the version number of il2cpp_plus is left blank, install the latest version of the branch of the corresponding annual version (such as 2020.3.33).</p> <p>Click Install, if successful, the <code>Installation Successful</code> log will be displayed at the end, and the installation status will switch to <code>Installed</code>, otherwise please check the error log.</p> <p>If HybridCLR is already installed, clicking the Install button will install the latest HybridCLR version of libil2cpp.</p> <h3 id="compile-dll"><a href="#compile-dll" class="header-anchor">#</a> Compile Dll</h3> <p>For each target, you must use the hot update dll compiled under the compile switch of the target platform, otherwise the hot update code will not match the code information of the AOT main package or hot update resources.</p> <p>Unity will print this kind of log when there is no match: <code>A scripted object (probably XXX?) has a different serialization layout when loading. Did you #ifdef UNITY_EDITOR a section of your serialized properties in any of your scripts?</code>.</p> <p>With the help of Unity's <code>PlayerBuildInterface.CompilePlayerScripts</code> Api, hybridclr_unity provides a compilation script for compiling the hot update dll corresponding to each target. After the compilation is completed, the hot update dll is placed in the <code>{project}/HybridCLRData/HotUpdateDlls/{platform}</code> directory.</p> <p>Developers can flexibly choose the appropriate way to use these hot update dlls.</p> <h3 id="generate"><a href="#generate" class="header-anchor">#</a> Generate</h3> <p>Generate contains a variety of generation tools.</p> <p>####LinkXml</p> <p>Scan the AOT type referenced by the hot update dll, generate link.xml, and prevent the AOT type or function used by the hot update script from being clipped. The output file path is specified in the <code>OuputLinkXml</code> field in HybridCLRSettings.asset, and the default is <code>LinkGenerator/link.xml</code>.</p> <p>For a more specific introduction to clipping, please see <a href="/hybridclr/code_striping/">Code Clipping Principles and Solutions</a>.</p> <p>####MethodBridge</p> <p>Scan and generate bridge function files according to the current AOT dll set. The <code>maxGenericReferenceIteration</code> field in HybridCLRSettings.asset specifies the maximum number of iterations for generic recursive scanning. Most items take
Within 10 is enough.</p> <p>For more specific documents related to bridge functions, please see the <a href="/hybridclr/method_bridge/">bridge function</a> document.</p> <h4 id="aotgenericreference"><a href="#aotgenericreference" class="header-anchor">#</a> AOTGenericReference</h4> <p>Scan all generated AOT generic types and function instantiations according to the current hot update dll, and generate a <strong>inspired</strong> generic instantiation file.</p> <p>The <code>outputAOTGenericReferenceFile</code> field in HybridCLRSettings.asset specifies the output file path, and the <code>maxGenericReferenceIteration</code> field specifies the maximum number of iterations for the generic recursive scan.</p> <p>Since it is troublesome to convert the scanned generic types and functions into corresponding code references, all generated generic instantiation codes are <strong>comment codes</strong>, which are converted into correct instantiation references by developers themselves (<strong>This operation is optional, it can not be processed at all or only part of it</strong>), that is, instantiate the generic class or generic function in this comment in the AOT code. The method is roughly as follows:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>
    <span class="token comment">// System.Collections.Generics.List`1&lt;System.Object&gt;.ctor</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// System.Byte[] Array.Empty`1&lt;System.Byte&gt;()</span>
    Array<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Empty</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Please add instantiation references to generic types and functions in other files, as this output file will be overwritten every time it is regenerated.</p> <p>This generic instantiation documentation is only for inspiration, telling you which classes and functions can be instantiated with aot generics. After using the supplementary metadata mechanism,
<strong>Do nothing</strong> and do not affect normal operation. But if you manually instantiate aot generics, you can improve performance. The suggestion is to manually instantiate a small number of performance-sensitive classes or functions, such as <code>Dictionary&lt;int,int&gt;</code>.</p> <p>For more specific AOT generic related documents, please see <a href="/hybridclr/aot_generic/">AOT Generic Introduction</a>.</p> <h4 id="reversepinvokewrapper"><a href="#reversepinvokewrapper" class="header-anchor">#</a> ReversePInvokeWrapper</h4> <p>Generate a ReversePInvokeWrapper function for hot-updated C# static functions marked with <code>[MonoPInvokeCallback]</code> annotation. In this way, each hot update C# static function will have a unique corresponding C++ function,
It can be used to register in scripting languages such as lua and be called by scripting languages.</p> <p>The <code>reversePInvokeWrapperCount</code> field in HybridCLRSettings.asset indicates the number of generated wrapper c++ functions. Please reserve enough to ensure that it exceeds the number of C# functions marked with <code>[MonoPInvokeCallback]</code> annotations in the hot update C# code. Otherwise an exception may be thrown.</p> <p>For a more specific introduction to MonoPInvokeCallback, please see the document [MonoPInvokeCallback support] (/hybridclr/monopinvokecallback/)</p> <h4 id="il2cppdef"><a href="#il2cppdef" class="header-anchor">#</a> Il2CppDef</h4> <p>Generate macro definitions related to the current Unity version. Similar to the following:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>
<span class="token comment">// Il2CppCompatibleDefs.h</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HYBRIDCLR_UNITY_VERSION</span> <span class="token expression"><span class="token number">2020333</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HYBRIDCLR_UNITY_2020</span> <span class="token expression"><span class="token number">1</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HYBRIDCLR_UNITY_2019_OR_NEW</span> <span class="token expression"><span class="token number">1</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HYBRIDCLR_UNITY_2020_OR_NEW</span> <span class="token expression"><span class="token number">1</span></span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="dheassemblylist"><a href="#dheassemblylist" class="header-anchor">#</a> DHEAssemblyList</h4> <p><strong>Notice! Version 1.1.7 removed this field.</strong></p> <p>Generate differential hybrid assembly list code.</p> <p>Because HybridCLR needs to preprocess the differential mixed execution assembly at the stage of il2cpp initialization, it is currently provided to HybridCLR in the form of the generated assembly list code.</p> <p>Examples are as follows:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>    <span class="token comment">// Il2CppCompatibleDefs.cpp file</span>

	<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> g_differentialHybridAssemblies<span class="token punctuation">[</span><span class="token punctuation">]</span>
	<span class="token punctuation">{</span>

	<span class="token comment">//!!!{{DHE</span>
        <span class="token string">&quot;Assembly-CSharp&quot;</span><span class="token punctuation">,</span>
	<span class="token comment">//!!!}}DHE</span>
		<span class="token keyword">nullptr</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="dheassemblyoptiondatas"><a href="#dheassemblyoptiondatas" class="header-anchor">#</a> DHEAssemblyOptionDatas</h4> <p><strong>Notice! Version 1.1.7 removed this field.</strong></p> <p>Generate configuration data for differential hybrid assembly.</p> <p>Loading a differential hybrid execution assembly requires some configuration data. For example, which functions are changed are calculated offline, so that there is no need to determine whether the function has changed at runtime. The configuration data is passed in as a parameter when calling <code>RuntimeApi::LoadDifferentialHybridAssembly</code>.</p> <h4 id="all"><a href="#all" class="header-anchor">#</a> All</h4> <p>Execute the above four generation operations with one click.</p> <h2 id="hybridclr-configuration"><a href="#hybridclr-configuration" class="header-anchor">#</a> HybridCLR configuration</h2> <p>Click the menu <code>HybridCLR/Settings</code> to open the configuration interface. The fields are detailed below.</p> <h3 id="enable"><a href="#enable" class="header-anchor">#</a> enable</h3> <p>Whether to enable HyridCLR hot update. The default is true. If false, the package no longer includes HybridCLR functionality.</p> <h3 id="useglobalil2cpp"><a href="#useglobalil2cpp" class="header-anchor">#</a> useGlobalIl2cpp</h3> <p>Whether to use the global installation location, that is, the il2cpp directory under the editor installation location. The default is false. Generally, <code>useGlobalIl2cpp=true</code> is only required when packaging WebGL.</p> <p>Note that even if <code>useGlobalIl2Cpp=true</code>, il2cpp will still be copied to the HybridCLRData directory during installation.
You need to manually replace the <code>{project}/HyridCLRData/LocalIl2CppData-{platform}/il2cpp/libil2cpp</code> directory with the corresponding directory under the editor installation directory. In addition, run <code>HybridCLR/Generate/*</code> to execute the generation operation. The output directory is still a local directory. You need to manually copy and replace the libil2cpp directory in the global installation location.</p> <h3 id="hybridclrrepourl"><a href="#hybridclrrepourl" class="header-anchor">#</a> hybridclrRepoURL</h3> <p>The address of the hybridclr warehouse, the default value is <code>https://gitee.com/focus-creative-games/hybridclr</code>.</p> <h3 id="il2cppplusrepourl"><a href="#il2cppplusrepourl" class="header-anchor">#</a> il2cppPlusRepoURL</h3> <p>The address of the il2cpp_plus warehouse, the default value is <code>https://gitee.com/focus-creative-games/il2cpp_plus</code>.</p> <h3 id="hotupdateassemblydefinitions"><a href="#hotupdateassemblydefinitions" class="header-anchor">#</a> hotUpdateAssemblyDefinitions</h3> <p>The list of hot update modules defined in the form of assembly definition (asmdef) is equivalent to <code>hotUpdateAssemblies</code> below, but it is more convenient to drag and drop asmdef modules in the editor, and it is not easy to make mistakes and write wrong names.</p> <p><code>hotUpdateAssemblyDefinitions</code> and <code>hotUpdateAssemblies</code> are combined to form the final hot update dll list. The same assembly should not appear in two lists at the same time, an error will be reported!</p> <h3 id="hotupdateassemblies"><a href="#hotupdateassemblies" class="header-anchor">#</a> hotUpdateAssemblies</h3> <p>Some assemblies exist in the form of dll, such as the hot update dll you created in an external project, or you directly use Assembly-CSharp as your hot update dll. Since there is no corresponding asmdef file, it can only be manually configured in the form of dll name.</p> <p>Do not include the '.dll' suffix when filling in the assembly name, just like <code>Main</code>, <code>Assembly-CSharp</code>.</p> <p>Assembly in asmdef form, you can also choose not to add it to <code>hotUpdateAssemblyDefinitions</code>, but add it to <code>hotUpdateAssemblies</code>. But this is not as convenient as directly dragging into the list, you can choose at your own discretion.</p> <p><code>hotUpdateAssemblyDefinitions</code> and <code>hotUpdateAssemblies</code> are combined to form the final hot update dll list. The same assembly should not appear in two lists at the same time, an error will be reported!</p> <h3 id="preservehotupdateassemblies"><a href="#preservehotupdateassemblies" class="header-anchor">#</a> preserveHotUpdateAssemblies</h3> <p>A list of reserved hot update dll names. Sometimes I want to add some hot update dlls in the future, and expect the scripts of these new hot update dlls to be mounted on resources. If you directly add the hot update dll name to hotUpdateAssemblies, an error that the assembly does not exist will be reported. The preserveHotUpdateAssemblies field is used to meet this requirement. These dlls are not checked for validity when packaging and will be added to an assembly list file like scriptingassemblies.json.</p> <p>Do not include the '.dll' suffix when filling in the assembly name, just like <code>Abc</code>.</p> <h3 id="hotupdatedllcompileoutputrootdir"><a href="#hotupdatedllcompileoutputrootdir" class="header-anchor">#</a> hotUpdateDllCompileOutputRootDir</h3> <p>The output root directory of the compiled hot update dll. The final output directory is under the platform subdirectory of this directory, namely <code>${hotUpdateDllCompileOutputRootDir}/{platform}</code>.</p> <h3 id="externalhotupdateassemblydirs"><a href="#externalhotupdateassemblydirs" class="header-anchor">#</a> externalHotUpdateAssemblyDirs</h3> <p>Customize the search path for external hot update dlls. Some hot update projects of frameworks or projects are placed outside Unity, and the compiled dll is also outside. This parameter provides a hot update dll
The search path, so that there is no need to copy the external dll to the project or to the hotUpdateAssemblies directory every time.</p> <ul><li>Search in the order of the search path, the higher the priority, the higher the priority.</li> <li>Search paths must be relative locations, relative to the project root. That is, fill in <code>mydir</code> and search for <code>{proj}/mydir</code>.</li> <li>For each path <code>dir</code>, it will first try to search <code>{dir}/{platform}</code>, and then try to search <code>{dir}</code>. This is done in order to take into account the specificity and versatility of the platform.</li></ul> <h3 id="strippedaotdlloutputrootdir"><a href="#strippedaotdlloutputrootdir" class="header-anchor">#</a> strippedAOTDllOutputRootDir</h3> <p>Staging directory for trimmed AOT dlls. The final directory is under the platform subdirectory of this directory, namely <code>${strippedAOTDllOutputRootDir}/{platform}</code>.</p> <h3 id="patchaota-assemblies"><a href="#patchaota-assemblies" class="header-anchor">#</a> patchAOTA Assemblies</h3> <p>Supplementary metadata AOT dll list. The package itself does not use this configuration item. But it provides a place to configure the AOT dll list, which is convenient for developers to use in their own packaging process, so that developers do not need to define a separate AOT dll configuration script.</p> <p>Do not include the '.dll' suffix when filling in the assembly name, just like <code>Main</code>, <code>Assembly-CSharp</code>.</p> <h3 id="differentialhybridassemblies"><a href="#differentialhybridassemblies" class="header-anchor">#</a> differentialHybridAssemblies</h3> <p><strong>Notice! Version 1.1.7 removed this field.</strong></p> <p>A list of assemblies for differential mix execution. The assembly executed by differential hybrid and the assembly of pure hot update are not the same type of assembly, and cannot appear in the list of hotUpdateAssemblies at the same time.</p> <h3 id="differentialhybridoptionoutputdir"><a href="#differentialhybridoptionoutputdir" class="header-anchor">#</a> differentialHybridOptionOutputDir</h3> <p><strong>Notice! Version 1.1.7 removed this field.</strong></p> <p>Runtime configuration parameters for assemblies executed by differential hybrids.</p> <p>Some configuration parameters need to be passed to the assembly of differential mixed execution, such as which functions have changed. These configuration data are the optionBytes parameter of <code>LoadImageErrorCode RuntimeApi::LoadDifferentialHybridAssembly(byte[] dllBytes, byte[] optionBytes)</code>.</p> <h3 id="outputlinkfile"><a href="#outputlinkfile" class="header-anchor">#</a> outputLinkFile</h3> <p>When running the menu <code>HybridCLR/Generate/LinkXml</code> command, the output link.xml file path.</p> <p>Do not point to <code>Assets/link.xml</code>, that link.xml is generally used to manually reserve the AOT type, and this automatically output link.xml will be overwritten every time.</p> <h3 id="outputaotgenericreferencefile"><a href="#outputaotgenericreferencefile" class="header-anchor">#</a> outputAOTGenericReferenceFile</h3> <p>The path of the AOT generic instantiation assembly file output when running the menu <code>HybridCLR/Generate/AOTGenericReference</code>.</p> <h3 id="maxgenericreferenceiteration"><a href="#maxgenericreferenceiteration" class="header-anchor">#</a> maxGenericReferenceIteration</h3> <p>When running the menu <code>HybridCLR/Generate/AOTGenericReference</code>, the generation tool recursively analyzes the number of iterations of AOT generic instantiation.</p> <p>Because new generic classes and generic functions may be used indirectly in generic functions, multiple rounds of iterations are required to analyze all generic instantiations. The <code>maxGenericReferenceIteration</code> parameter is used to control the number of iterations. This parameter is generally within 10 enough, you can observe the log
It can be seen that the calculation terminates after several rounds of iterations. If there are still a large number of uncalculated iterations of generic types when the iteration terminates, this value can be increased appropriately.</p> <p>Why not iterate until all generic instantiations are computed? Because there may be situations that can never be calculated. The following code, AOT.Show()
Due to recursive generic instantiation, it can never be calculated.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>
    <span class="token keyword">struct</span> <span class="token class-name">AOT<span class="token punctuation">&lt;</span>A<span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">{</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AOT<span class="token punctuation">&lt;</span>AOT<span class="token punctuation">&lt;</span>A<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            a<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="maxmethodbridgegenericiteration"><a href="#maxmethodbridgegenericiteration" class="header-anchor">#</a> maxMethodBridgeGenericIteration</h3> <p>When running the menu <code>HybridCLR/Generate/MethodBridge</code>, the generation tool recursively analyzes the number of iterations of AOT generic instantiation. The meaning is similar to <code>maxGenericReferenceIteration</code>.</p> <h2 id="editor-related-tools"><a href="#editor-related-tools" class="header-anchor">#</a> Editor related tools</h2> <p>It mainly includes the following functions:</p> <ul><li>Initialize HybridCLR</li> <li>Check and fix settings</li> <li>Automatically exclude hot update assembly when packaging</li> <li>Add the hot update dll name to the assembly list when packaging</li> <li>backup trimmed AOT dll</li> <li>Generate some files and codes needed for packaging</li> <li>Compile the hot update dll for the target platform</li></ul> <h3 id="initialize-hybridclr"><a href="#initialize-hybridclr" class="header-anchor">#</a> Initialize HybridCLR</h3> <p>Run the <code>HybridCLR/Installer...</code> menu command to complete the initialization. See the menu command introduction above for details.</p> <h3 id="check-and-fix-settings"><a href="#check-and-fix-settings" class="header-anchor">#</a> Check and fix settings</h3> <p>It is part of the packaging workflow, and the relevant code is in <code>Editor/BuildProcessors/CheckSettings.cs</code>.</p> <p>Contains the following actions:</p> <ul><li>Set or clear the UNITY_IL2CPP_PATH environment variable according to whether HybridCLR is enabled. The UNITY_IL2CPP_PATH environment variable modified in the script is the environment variable of this process, so don't worry about interfering with other projects.</li> <li>Automatically turn off this option if it detects that incremental GC has been accidentally turned on.</li> <li>If no hot update assembly is set in HybridCLRSettings, an error will be displayed.</li></ul> <h3 id="automatically-exclude-hot-update-assembly-when-packaging"><a href="#automatically-exclude-hot-update-assembly-when-packaging" class="header-anchor">#</a> Automatically exclude hot update assembly when packaging</h3> <p>It is part of the packaging workflow, and the relevant code is in <code>Editor/BuildProcessors/FilterHotFixAssemblies.cs</code>.</p> <p>Obviously, the hot update assembly should not be processed by il2cpp and compiled into the final package body. We handle the <code>IFilterBuildAssemblies</code> callback,
Remove the hot update dll from the list of build assemblies.</p> <p>The script will additionally check whether the name of the assembly is wrongly written, and whether there is a duplicate assembly configured by mistake.</p> <h3 id="maxmethodbridgegenericiteration-2"><a href="#maxmethodbridgegenericiteration-2" class="header-anchor">#</a> maxMethodBridgeGenericIteration</h3> <p>When running the menu <code>HybridCLR/Generate/MethodBridge</code>, the generation tool recursively analyzes the number of iterations of AOT generic instantiation. The meaning is similar to <code>maxGenericReferenceIteration</code>.</p> <h2 id="editor-related-tools-2"><a href="#editor-related-tools-2" class="header-anchor">#</a> Editor related tools</h2> <p>It mainly includes the following functions:</p> <ul><li>Initialize HybridCLR</li> <li>Check and fix settings</li> <li>Automatically exclude hot update assembly when packaging</li> <li>Add the hot update dll name to the assembly list when packaging</li> <li>backup trimmed AOT dll</li> <li>Generate some files and codes needed for packaging</li> <li>Compile the hot update dll for the target platform</li></ul> <h3 id="initialize-hybridclr-2"><a href="#initialize-hybridclr-2" class="header-anchor">#</a> Initialize HybridCLR</h3> <p>Run the <code>HybridCLR/Installer...</code> menu command to complete the initialization. See the menu command introduction above for details.</p> <h3 id="check-and-fix-settings-2"><a href="#check-and-fix-settings-2" class="header-anchor">#</a> Check and fix settings</h3> <p>It is part of the packaging workflow, and the relevant code is in <code>Editor/BuildProcessors/CheckSettings.cs</code>.</p> <p>Contains the following actions:</p> <ul><li>Set or clear the UNITY_IL2CPP_PATH environment variable according to whether HybridCLR is enabled. The UNITY_IL2CPP_PATH environment variable modified in the script is the environment variable of this process, so don't worry about interfering with other projects.</li> <li>Automatically turn off this option if it detects that incremental GC has been accidentally turned on.</li> <li>If no hot update assembly is set in HybridCLRSettings, an error will be displayed.</li></ul> <h3 id="automatically-exclude-hot-update-assembly-when-packaging-2"><a href="#automatically-exclude-hot-update-assembly-when-packaging-2" class="header-anchor">#</a> Automatically exclude hot update assembly when packaging</h3> <p>It is part of the packaging workflow, and the relevant code is in <code>Editor/BuildProcessors/FilterHotFixAssemblies.cs</code>.</p> <p>Obviously, the hot update assembly should not be processed by il2cpp and compiled into the final package body. We handle the <code>IFilterBuildAssemblies</code> callback,
Remove the hot update dll from the list of build assemblies.</p> <p>The script will additionally check whether the name of the assembly is wrongly written, and whether there is a duplicate assembly configured by mistake.</p> <h3 id="generate-some-files-and-codes-needed-for-packaging"><a href="#generate-some-files-and-codes-needed-for-packaging" class="header-anchor">#</a> Generate some files and codes needed for packaging</h3> <p>Contains the following generation functions:</p> <ul><li>Scan to generate link.xml</li> <li>generate bridge function</li> <li>Generate AOT generic instantiation code</li> <li>Generate ReversePInvokeCallback related wrapper files</li></ul> <p>These generation commands are included in the menu <code>HybridCLR/Generate/*</code>, please see the introduction document above.</p> <h2 id="iosbuild-script"><a href="#iosbuild-script" class="header-anchor">#</a> iOSBuild script</h2> <p><code>Editor/Data~/iOSBuild</code> in the package contains the scripts needed to compile the iOS version libil2cpp.a. After running the <code>HybridCLR/Installer...</code> menu command to successfully initialize HybridCLR, it will be automatically copied to the <code>{project}/HybridCLRData/iOSBuild</code> directory. <strong>Subsequent operations must be performed in the <code>{project}/HybridCLRData/iOSBuild</code> directory.</strong></p> <p>For the specific operation of build libil2cpp.a, please refer to the document <a href="/hybridclr/build_ios_libil2cpp/">iOS Platform Packaging</a>.</p> <h2 id="runtime-related-scripts"><a href="#runtime-related-scripts" class="header-anchor">#</a> Runtime related scripts</h2> <p>Contains classes used at runtime. Currently relatively simple.</p> <h3 id="loadimageerrorcode"><a href="#loadimageerrorcode" class="header-anchor">#</a> LoadImageErrorCode</h3> <p>Error code of loading hot update dll.</p> <h3 id="metadata-mode-homologousimagemode"><a href="#metadata-mode-homologousimagemode" class="header-anchor">#</a> Metadata Mode HomologousImageMode</h3> <p>Two metadata schemas are currently supported:</p> <h4 id="homologousimagemode-consistent-mode"><a href="#homologousimagemode-consistent-mode" class="header-anchor">#</a> <code>HomologousImageMode::Consistent</code> mode</h4> <p>That is, the supplementary dll is exactly the same as the trimmed dll when packaging. Therefore, the clipped dll generated during the build process must be used, and the original dll cannot be copied directly. We added processing code in <code>HybridCLR.BuildProcessors.CopyStrippedAOTAssemblies</code> to automatically copy these clipped dlls to the <code>{project}/HybridCLRData/AssembliesPostIl2CppStrip/{target}</code> directory when packaging.</p> <h4 id="homologousimagemode-superset-mode"><a href="#homologousimagemode-superset-mode" class="header-anchor">#</a> <code>HomologousImageMode::SuperSet</code> mode</h4> <p>That is, the supplementary dll is a superset of the trimmed dll when packaging, and contains all the metadata of the trimmed dll. One of the easiest superset dlls to get is the original aot dll, which is also the recommended superset dll.</p> <ul><li>The original UnityEngine-related AOT dll is in the PlayBackEngines subdirectory of the Unity installation directory</li> <li>The original .net core AOT dll such as mscorlib.dll is in the <code>unityaot{xxx}</code> directory of the Unity installation directory. 2019-2020 will be unified into the unityaot directory, and will be split into multiple directories starting from 2021. If you package android, take unityaot-linux, and if you package iOS, take unityaot-macos.</li> <li>The AOT dll of the plug-in is the original dll of the corresponding platform in the project directory. If it is in the form of source code, it is a compiled dll, just take the corresponding dll in the <code>HybridCLR/HotUpdateDlls/{platform}</code> directory</li></ul> <p>Take the Win64 target under Win of Unity 2020.3.33 version as an example:</p> <ul><li>mscorlib.dll in <code>{editor}/Editor/Data/MonoBleedingEdge/lib/mono/unityaot</code></li> <li>UnityEngine.CoreModule.dll in <code>{editor}/Editor/Data/Playbackengines/windowsstandalonesupport/Variations/il2cpp/Managed</code></li> <li>protobuf-net.dll is the original <code>protobuf-net.dll</code> in your project</li> <li>The AOT dll corresponding to your AOT module Main is <code>HybridCLR/HotUpdateDlls/{platform}/Main.dll</code></li></ul> <p>The <code>SuerSet</code> mode can also use the trimmed dll of the <code>Consistent</code> mode, since it obviously contains all the metadata for itself. However, the <code>SuperSet</code> mode is mainly to simplify the workflow and avoid the <code>metadata not match</code> problem that often occurs in the <code>Consistent</code> mode, so unless you want to optimize the memory, it is strongly recommended to use the original AOT dll.</p> <h3 id="runtimeapi"><a href="#runtimeapi" class="header-anchor">#</a> RuntimeApi</h3> <p>The underlying tool class for operating HybridCLR. There are a few more commonly used</p> <ul><li><code>LoadImageErrorCode LoadMetadataForAOTAssembly(byte[] dllBytes, HomologousImageMode mode)</code> is used to load supplementary metadata assembly.</li> <li><code>LoadImageErrorCode UseDifferentialHybridAOTAssembly(string assemblyName)</code> When the differential hybrid execution assembly has not changed, you can choose to use the original AOT assembly completely. <strong>Notice! Version 1.1.7 removed this function.</strong></li> <li><code>LoadImageErrorCode LoadDifferentialHybridAssembly(byte[] dllBytes, byte[] optionBytes)</code> Load differential hybrid execution assembly. <strong>Notice! Version 1.1.7 removed this function.</strong></li></ul> <h3 id="unchangedattribute"><a href="#unchangedattribute" class="header-anchor">#</a> UnchangedAttribute</h3> <p>For differential mixed execution assembly, it is used to manually specify which functions are changed or not. The changed function is executed in interpreter mode, and the unchanged function is executed in native AOT mode.</p> <p>Currently, for demonstration purposes, unchanged functions need to be manually marked, and later official versions will be automatically calculated, and this feature is basically not used.</p> <h3 id="reversepinvokewrappergenerationattribute"><a href="#reversepinvokewrappergenerationattribute" class="header-anchor">#</a> ReversePInvokeWrapperGenerationAttribute</h3> <p>Each function with the <code>[MonoPInvokeCallback]</code> attribute requires a unique corresponding wrapper function. These wrapper functions must be pre-generated during packaging and cannot be changed.
Therefore, if a function with the <code>[MonoPInvokeCallback]</code> feature is added in subsequent hot updates, there will be insufficient wrapper functions.</p> <p>ReversePInvokeWrapperGenerationAttribute is used to reserve a specified number of wrapper functions for the current function added with the <code>[MonoPInvokeCallback]</code> attribute.</p> <p>In the following example, 10 wrapper functions are reserved for functions signed by LuaFunction.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>    <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">LuaFunction</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> luaState<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MonoPInvokeWrapperPreserves</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ReversePInvokeWrapperGeneration</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MonoPInvokeCallback</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">LuaFunction</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">LuaCallback</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> luaState<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MonoPInvokeCallback</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Func<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">Sum</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MonoPInvokeCallback</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Func<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">Sum2</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MonoPInvokeCallback</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Func<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">Sum3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2023/05/04, 11:48:51</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/en/hybridclr/differential_hybrid_execution/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Differential Hybrid Execution</div></a> <a href="/en/hybridclr/modify_unity_dll/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Modify Unity editor related dll</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/en/hybridclr/differential_hybrid_execution/" class="prev">Differential Hybrid Execution</a></span> <span class="next"><a href="/en/hybridclr/modify_unity_dll/">Modify Unity editor related dll</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/hybridclr/project_settings/"><div>
            项目设置
            <!----></div></a> <span class="date">09-29</span></dt></dl><dl><dd>02</dd> <dt><a href="/hybridclr/load_assembly/"><div>
            加载和使用热更新代码
            <!----></div></a> <span class="date">09-29</span></dt></dl><dl><dd>03</dd> <dt><a href="/hybridclr/build_game/"><div>
            打包
            <!----></div></a> <span class="date">09-29</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:hybridclr@code-philosophy.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/focus-creative-games" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>focus-creative-games</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.12d5fdbe.js" defer></script><script src="/assets/js/2.0771a7ec.js" defer></script><script src="/assets/js/112.d97b1c0a.js" defer></script><script src="/assets/js/3.8d0c7075.js" defer></script>
  </body>
</html>
