<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AOT-interpreter bridge function | Code Philosophy</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.png">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <meta name="description" content="Code Philosophy是一个业内领先的专注于提供游戏行业深度技术解决方案的创新型公司。">
    <meta name="keywords" content="HybridCLR,luban,热更新,配表,配置,游戏,git,github">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.de16ca54.css" as="style"><link rel="preload" href="/assets/js/app.12d5fdbe.js" as="script"><link rel="preload" href="/assets/js/2.0771a7ec.js" as="script"><link rel="preload" href="/assets/js/116.7ba543d5.js" as="script"><link rel="preload" href="/assets/js/3.8d0c7075.js" as="script"><link rel="prefetch" href="/assets/js/10.d15b8a0c.js"><link rel="prefetch" href="/assets/js/100.59f432fb.js"><link rel="prefetch" href="/assets/js/101.3de7bbde.js"><link rel="prefetch" href="/assets/js/102.4a0758d3.js"><link rel="prefetch" href="/assets/js/103.26383b9f.js"><link rel="prefetch" href="/assets/js/104.a1da4ecb.js"><link rel="prefetch" href="/assets/js/105.ef6a6e83.js"><link rel="prefetch" href="/assets/js/106.da96dd79.js"><link rel="prefetch" href="/assets/js/107.ec48bd70.js"><link rel="prefetch" href="/assets/js/108.0f684202.js"><link rel="prefetch" href="/assets/js/109.2a494194.js"><link rel="prefetch" href="/assets/js/11.764b6824.js"><link rel="prefetch" href="/assets/js/110.84415013.js"><link rel="prefetch" href="/assets/js/111.b2685030.js"><link rel="prefetch" href="/assets/js/112.d97b1c0a.js"><link rel="prefetch" href="/assets/js/113.fc2f8b72.js"><link rel="prefetch" href="/assets/js/114.389fdf76.js"><link rel="prefetch" href="/assets/js/115.d7da7753.js"><link rel="prefetch" href="/assets/js/117.d7087ed2.js"><link rel="prefetch" href="/assets/js/118.afcabf3e.js"><link rel="prefetch" href="/assets/js/119.2bcae880.js"><link rel="prefetch" href="/assets/js/12.8d2b0d29.js"><link rel="prefetch" href="/assets/js/120.e7473c03.js"><link rel="prefetch" href="/assets/js/121.e7f1865f.js"><link rel="prefetch" href="/assets/js/122.1ee03f15.js"><link rel="prefetch" href="/assets/js/123.8c8de603.js"><link rel="prefetch" href="/assets/js/124.1c8fa702.js"><link rel="prefetch" href="/assets/js/125.92167af0.js"><link rel="prefetch" href="/assets/js/126.d729738c.js"><link rel="prefetch" href="/assets/js/127.291f69f0.js"><link rel="prefetch" href="/assets/js/128.08210df8.js"><link rel="prefetch" href="/assets/js/129.40b77886.js"><link rel="prefetch" href="/assets/js/13.e0289cd0.js"><link rel="prefetch" href="/assets/js/130.8305c052.js"><link rel="prefetch" href="/assets/js/131.5e6ae27f.js"><link rel="prefetch" href="/assets/js/132.d9c12ddc.js"><link rel="prefetch" href="/assets/js/133.82886760.js"><link rel="prefetch" href="/assets/js/134.6f64a5d9.js"><link rel="prefetch" href="/assets/js/135.b90b8356.js"><link rel="prefetch" href="/assets/js/136.24e466af.js"><link rel="prefetch" href="/assets/js/137.aaf435ae.js"><link rel="prefetch" href="/assets/js/138.00c60cde.js"><link rel="prefetch" href="/assets/js/139.14e869b2.js"><link rel="prefetch" href="/assets/js/14.81465e75.js"><link rel="prefetch" href="/assets/js/140.de231325.js"><link rel="prefetch" href="/assets/js/141.4ad5ea60.js"><link rel="prefetch" href="/assets/js/142.f36e159e.js"><link rel="prefetch" href="/assets/js/143.2e4611d8.js"><link rel="prefetch" href="/assets/js/144.e9ebb3fa.js"><link rel="prefetch" href="/assets/js/145.1a9f5fad.js"><link rel="prefetch" href="/assets/js/146.624849a0.js"><link rel="prefetch" href="/assets/js/147.461906c5.js"><link rel="prefetch" href="/assets/js/148.d28d7aaa.js"><link rel="prefetch" href="/assets/js/149.9784b5ed.js"><link rel="prefetch" href="/assets/js/15.6b1ebda0.js"><link rel="prefetch" href="/assets/js/150.240e44d2.js"><link rel="prefetch" href="/assets/js/151.604089c9.js"><link rel="prefetch" href="/assets/js/152.f73b8be0.js"><link rel="prefetch" href="/assets/js/153.e16a3cbb.js"><link rel="prefetch" href="/assets/js/16.9f462aa4.js"><link rel="prefetch" href="/assets/js/17.f6132239.js"><link rel="prefetch" href="/assets/js/18.a0728471.js"><link rel="prefetch" href="/assets/js/19.647597ef.js"><link rel="prefetch" href="/assets/js/20.113a110f.js"><link rel="prefetch" href="/assets/js/21.e8949420.js"><link rel="prefetch" href="/assets/js/22.715d702b.js"><link rel="prefetch" href="/assets/js/23.0c731f9a.js"><link rel="prefetch" href="/assets/js/24.83715717.js"><link rel="prefetch" href="/assets/js/25.a6efb8d9.js"><link rel="prefetch" href="/assets/js/26.876b7bf2.js"><link rel="prefetch" href="/assets/js/27.7e6a1fbc.js"><link rel="prefetch" href="/assets/js/28.c9603a98.js"><link rel="prefetch" href="/assets/js/29.7a6ffd69.js"><link rel="prefetch" href="/assets/js/30.bbdcda14.js"><link rel="prefetch" href="/assets/js/31.441495f6.js"><link rel="prefetch" href="/assets/js/32.516dc27e.js"><link rel="prefetch" href="/assets/js/33.796a4638.js"><link rel="prefetch" href="/assets/js/34.b844a239.js"><link rel="prefetch" href="/assets/js/35.4489eede.js"><link rel="prefetch" href="/assets/js/36.4944cc18.js"><link rel="prefetch" href="/assets/js/37.2b295b6f.js"><link rel="prefetch" href="/assets/js/38.c7f25fa6.js"><link rel="prefetch" href="/assets/js/39.f350b082.js"><link rel="prefetch" href="/assets/js/4.e8f1cdb3.js"><link rel="prefetch" href="/assets/js/40.6346e1bc.js"><link rel="prefetch" href="/assets/js/41.703948ac.js"><link rel="prefetch" href="/assets/js/42.cb158675.js"><link rel="prefetch" href="/assets/js/43.a6366a4f.js"><link rel="prefetch" href="/assets/js/44.67b267cd.js"><link rel="prefetch" href="/assets/js/45.d9ded0f6.js"><link rel="prefetch" href="/assets/js/46.dce204c1.js"><link rel="prefetch" href="/assets/js/47.f59b1714.js"><link rel="prefetch" href="/assets/js/48.e72d5a9a.js"><link rel="prefetch" href="/assets/js/49.57c226c6.js"><link rel="prefetch" href="/assets/js/5.765a6984.js"><link rel="prefetch" href="/assets/js/50.696d3556.js"><link rel="prefetch" href="/assets/js/51.f9fcee2c.js"><link rel="prefetch" href="/assets/js/52.e8d8f311.js"><link rel="prefetch" href="/assets/js/53.cb8fbe86.js"><link rel="prefetch" href="/assets/js/54.4df421a2.js"><link rel="prefetch" href="/assets/js/55.5a9cb469.js"><link rel="prefetch" href="/assets/js/56.7e073255.js"><link rel="prefetch" href="/assets/js/57.6756691b.js"><link rel="prefetch" href="/assets/js/58.9d1c4a46.js"><link rel="prefetch" href="/assets/js/59.a560b055.js"><link rel="prefetch" href="/assets/js/6.ddf0c9b8.js"><link rel="prefetch" href="/assets/js/60.a23590d0.js"><link rel="prefetch" href="/assets/js/61.5b3a43f9.js"><link rel="prefetch" href="/assets/js/62.72a56b46.js"><link rel="prefetch" href="/assets/js/63.ceded64f.js"><link rel="prefetch" href="/assets/js/64.f26c8cb9.js"><link rel="prefetch" href="/assets/js/65.fb45c073.js"><link rel="prefetch" href="/assets/js/66.83ebce20.js"><link rel="prefetch" href="/assets/js/67.eff63cf4.js"><link rel="prefetch" href="/assets/js/68.8bb955ae.js"><link rel="prefetch" href="/assets/js/69.dae7cec8.js"><link rel="prefetch" href="/assets/js/7.32660699.js"><link rel="prefetch" href="/assets/js/70.20e84c9c.js"><link rel="prefetch" href="/assets/js/71.6c135456.js"><link rel="prefetch" href="/assets/js/72.a6cef57b.js"><link rel="prefetch" href="/assets/js/73.ea109d55.js"><link rel="prefetch" href="/assets/js/74.31bd4677.js"><link rel="prefetch" href="/assets/js/75.e90da937.js"><link rel="prefetch" href="/assets/js/76.74f061bb.js"><link rel="prefetch" href="/assets/js/77.4a1bfa57.js"><link rel="prefetch" href="/assets/js/78.7847ecac.js"><link rel="prefetch" href="/assets/js/79.5fa65e36.js"><link rel="prefetch" href="/assets/js/8.62b0d450.js"><link rel="prefetch" href="/assets/js/80.008f19fa.js"><link rel="prefetch" href="/assets/js/81.e245ac7c.js"><link rel="prefetch" href="/assets/js/82.8f5a662c.js"><link rel="prefetch" href="/assets/js/83.cc9a1992.js"><link rel="prefetch" href="/assets/js/84.dcf087c6.js"><link rel="prefetch" href="/assets/js/85.be5afefb.js"><link rel="prefetch" href="/assets/js/86.97d6599a.js"><link rel="prefetch" href="/assets/js/87.1df10b08.js"><link rel="prefetch" href="/assets/js/88.f5a3d153.js"><link rel="prefetch" href="/assets/js/89.1a78c9ca.js"><link rel="prefetch" href="/assets/js/9.f51c0ef6.js"><link rel="prefetch" href="/assets/js/90.dfb15931.js"><link rel="prefetch" href="/assets/js/91.a5bdf350.js"><link rel="prefetch" href="/assets/js/92.4d4d7050.js"><link rel="prefetch" href="/assets/js/93.4ce8faaa.js"><link rel="prefetch" href="/assets/js/94.13bd2ab5.js"><link rel="prefetch" href="/assets/js/95.f941715f.js"><link rel="prefetch" href="/assets/js/96.6adeb803.js"><link rel="prefetch" href="/assets/js/97.6e1aaaf3.js"><link rel="prefetch" href="/assets/js/98.53de0dca.js"><link rel="prefetch" href="/assets/js/99.6f94e8b5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.de16ca54.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><img src="/img/logo.png" alt="Code Philosophy" class="logo"> <span class="site-name can-hide">Code Philosophy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HybridCLR" class="dropdown-title"><!----> <span class="title" style="display:;">HybridCLR</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/hybridclr/about/" class="nav-link">About</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/monobehaviour/" class="nav-link">Get Started</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/benchmark/" class="nav-link">Benchmark</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/faq/" class="nav-link">FAQ</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/common_errors/" class="nav-link">Common Mistakes</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/bug_reporter/" class="nav-link">Report Bugs</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Luban" class="dropdown-title"><a href="/en/luban/index/" class="link-title">Luban</a> <span class="title" style="display:none;">Luban</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/luban/about/" class="nav-link">About</a></li><li class="dropdown-item"><!----> <a href="/en/luban/start_up/" class="nav-link">Get Started</a></li><li class="dropdown-item"><!----> <a href="/en/luban/command_tools/" class="nav-link">Complete Features</a></li><li class="dropdown-item"><!----> <a href="/en/luban/data_source/" class="nav-link">Data Source</a></li><li class="dropdown-item"><!----> <a href="/en/luban/advanced/validator/" class="nav-link">Advanced Features</a></li><li class="dropdown-item"><!----> <a href="/en/luban/tools/" class="nav-link">Luban Tools</a></li></ul></div></div><div class="nav-item"><a href="/en/hybridclr/price/" class="nav-link">Service</a></div><div class="nav-item"><a href="/en/join/" class="nav-link">Jobs</a></div><div class="nav-item"><a href="https://www.zhihu.com/column/c_1489549396035870720" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Zhihu
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/en/about/" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><!----> <span class="title" style="display:;">切换语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hybridclr/method_bridge/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/method_bridge/" aria-current="page" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div> <a href="https://github.com/focus-creative-games" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/en/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HybridCLR" class="dropdown-title"><!----> <span class="title" style="display:;">HybridCLR</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/hybridclr/about/" class="nav-link">About</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/monobehaviour/" class="nav-link">Get Started</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/benchmark/" class="nav-link">Benchmark</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/faq/" class="nav-link">FAQ</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/common_errors/" class="nav-link">Common Mistakes</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/bug_reporter/" class="nav-link">Report Bugs</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Luban" class="dropdown-title"><a href="/en/luban/index/" class="link-title">Luban</a> <span class="title" style="display:none;">Luban</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/luban/about/" class="nav-link">About</a></li><li class="dropdown-item"><!----> <a href="/en/luban/start_up/" class="nav-link">Get Started</a></li><li class="dropdown-item"><!----> <a href="/en/luban/command_tools/" class="nav-link">Complete Features</a></li><li class="dropdown-item"><!----> <a href="/en/luban/data_source/" class="nav-link">Data Source</a></li><li class="dropdown-item"><!----> <a href="/en/luban/advanced/validator/" class="nav-link">Advanced Features</a></li><li class="dropdown-item"><!----> <a href="/en/luban/tools/" class="nav-link">Luban Tools</a></li></ul></div></div><div class="nav-item"><a href="/en/hybridclr/price/" class="nav-link">Service</a></div><div class="nav-item"><a href="/en/join/" class="nav-link">Jobs</a></div><div class="nav-item"><a href="https://www.zhihu.com/column/c_1489549396035870720" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Zhihu
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/en/about/" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><!----> <span class="title" style="display:;">切换语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hybridclr/method_bridge/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/hybridclr/method_bridge/" aria-current="page" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div> <a href="https://github.com/focus-creative-games" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Content</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>About</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>hybridclr</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/hybridclr/about/" class="sidebar-link">About HybridCLR</a></li><li><a href="/en/hybridclr/start_up/" class="sidebar-link">Get started quickly</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Tutorial</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Principle</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/hybridclr/build_pipeline/" class="sidebar-link">HybridCLR packaging workflow</a></li><li><a href="/en/hybridclr/monobehaviour/" class="sidebar-link">Hot update MonoBehaviour</a></li><li><a href="/en/hybridclr/build_ios_libil2cpp/" class="sidebar-link">iOS packaging</a></li><li><a href="/en/hybridclr/differential_hybrid_execution/" class="sidebar-link">Differential Hybrid Execution</a></li><li><a href="/en/hybridclr/hybridclr_unity/" class="sidebar-link">Introduce hybridclr_unity Package</a></li><li><a href="/en/hybridclr/modify_unity_dll/" class="sidebar-link">Modify Unity editor related dll</a></li><li><a href="/en/hybridclr/code_striping/" class="sidebar-link">Code clipping problem</a></li><li><a href="/en/hybridclr/aot_generic/" class="sidebar-link">AOT generic problem</a></li><li><a href="/en/hybridclr/method_bridge/" aria-current="page" class="active sidebar-link">AOT-interpreter bridge function</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/en/hybridclr/method_bridge/#bridge-function-signature" class="sidebar-link">Bridge function signature</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/en/hybridclr/method_bridge/#signature-rules-for-universal32" class="sidebar-link">Signature rules for Universal32</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/method_bridge/#sharing-rules-for-universal64" class="sidebar-link">Sharing Rules for Universal64</a></li><li class="sidebar-sub-header level3"><a href="/en/hybridclr/method_bridge/#sharing-rules-for-arm64" class="sidebar-link">Sharing Rules for Arm64</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/en/hybridclr/method_bridge/#hybridclr-default-bridge-function-set" class="sidebar-link">HybridCLR default bridge function set</a></li><li class="sidebar-sub-header level2"><a href="/en/hybridclr/method_bridge/#custom-bridge-function-set" class="sidebar-link">Custom bridge function set</a></li></ul></li><li><a href="/en/hybridclr/memory/" class="sidebar-link">Memory-related principles</a></li><li><a href="/en/hybridclr/performance/" class="sidebar-link">Execution performance</a></li><li><a href="/en/hybridclr/limit/" class="sidebar-link">Limit</a></li><li><a href="/en/hybridclr/work_with_script_language/" class="sidebar-link">HybridCLR+lua/js/python</a></li><li><a href="/en/hybridclr/monopinvokecallback/" class="sidebar-link">MonoPInvokeCallback Support</a></li><li><a href="/en/hybridclr/supported_unity_versions/" class="sidebar-link">Version Matching Rules</a></li><li><a href="/en/hybridclr/supported_platform/" class="sidebar-link">Cross-platform Support</a></li><li><a href="/en/hybridclr/source_inspect/" class="sidebar-link">HybridCLR source code structure and debugging</a></li><li><a href="/en/hybridclr/best_practices/" class="sidebar-link">Best Practices</a></li><li><a href="/en/hybridclr/129afe/" class="sidebar-link">il2cpp bugs</a></li></ul></section></li><li><a href="/en/hybridclr/faq/" class="sidebar-link">FAQ</a></li><li><a href="/en/hybridclr/benchmark/" class="sidebar-link">Testing Report</a></li><li><a href="/en/hybridclr/business_games/" class="sidebar-link">Already launched commercial projects</a></li><li><a href="/en/hybridclr/common_errors/" class="sidebar-link">Common Errors</a></li><li><a href="/en/hybridclr/bug_reporter/" class="sidebar-link">BUG Feedback Template</a></li><li><a href="/en/hybridclr/recommended-tools/" class="sidebar-link">Related Third-party Projects</a></li><li><a href="/en/hybridclr/roadmap/" class="sidebar-link">Roadmap</a></li><li><a href="/en/hybridclr/development_story/" class="sidebar-link">Development History</a></li><li><a href="/en/hybridclr/price/" class="sidebar-link">Commercial Service</a></li><li><a href="/en/hybridclr/donate/" class="sidebar-link">Acknowledgments</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>luban</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>gidb</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=en" title="分类" data-v-06225672>en</a></li><li data-v-06225672><a href="/categories/?category=hybridclr" title="分类" data-v-06225672>hybridclr</a></li><li data-v-06225672><a href="/categories/?category=Principle" title="分类" data-v-06225672>Principle</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https:://code-philosophy.com" target="_blank" title="作者" class="beLink" data-v-06225672>Code Philosophy</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-05-25</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">AOT-interpreter bridge function<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="aot-interpreter-bridge-function"><a href="#aot-interpreter-bridge-function" class="header-anchor">#</a> AOT-interpreter bridge function</h1> <p>Two-way function calls are required between the interpreter of the bridge function HybridCLR and AOT. For example, the interpreter calls the AOT function, or the AOT part has a callback function that calls the interpreter part.</p> <p>The parameter passing and storage methods of the AOT part and the interpreter part are different. For example, the interpreter part calls the AOT function, and the parameters of the interpreter are all on the interpreter stack, and the function parameters of the interpreter must be passed to the AOT function by means of a suitable method. Similarly, the interpreter cannot directly obtain the parameters of the AOT callback function. Corresponding bridge functions must be generated for each type of signature function to realize the two-way function parameter transfer between the interpreter and the aot part.</p> <p>Calling in the direction of <code>interpreter -&gt; AOT</code> can be done through libraries like ffi, but the cost of function calls is too high. The most reasonable way is to generate this bidirectional bridge function in advance.</p> <p>The internal calls of the interpreter go directly to the interpreter stack, no bridge function is needed.</p> <p>According to the principle of the bridge function, for the fixed AOT part, the bridge function set is determined, and no new additional bridge function will be needed no matter any subsequent hot updates. <strong>Therefore, there is no need to worry about the problem that the bridge function is missing suddenly after the hot update goes online.</strong></p> <h2 id="bridge-function-signature"><a href="#bridge-function-signature" class="header-anchor">#</a> Bridge function signature</h2> <p>The bridge function must be generated in the AOT part in advance, which is similar to the principle of lua's wrapper function.</p> <p>In order to find the corresponding bridge function for each function called between <code>AOT &lt;-&gt; interpreter</code>, there must be a way to calculate the function signature. In addition, functions with completely equivalent parameter types and return value types can share the same bridge function, which greatly reduces the number of bridge functions. For the following example, for x64 and arm64 platforms, long and class types share the same signature. So they can all share a bridge function with <code>long (long, long)</code> signature.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Fun1</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">long</span></span> <span class="token function">Fun2</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">long</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Fun3</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>There are some differences in how the ABIs of different operating systems and architectures handle function parameter passing and return values. Considering that both Android v8 and iOS are arm64, in order to maximize the performance of these two common platforms and balance the cost of maintaining too many platforms, we simply designed the most stringent signature calculation rules for 32 and 64 bits respectively, called Universal32 and Universal64, as well as the Arm64 family bridge signature calculation rules are designed for the mobile game arm 64-bit platform.</p> <ul><li>Arm64</li> <li>Universal32 uses the abi intersection of all 32-bit platforms to calculate the signature</li> <li>Universal64 calculates the signature using the abi intersection method other than the arm64 platform</li></ul> <h3 id="signature-rules-for-universal32"><a href="#signature-rules-for-universal32" class="header-anchor">#</a> Signature rules for Universal32</h3> <table><thead><tr><th>type</th> <th>signature</th></tr></thead> <tbody><tr><td>bool、byte</td> <td>u1</td></tr> <tr><td>sbyte</td> <td>i1</td></tr> <tr><td>short</td> <td>i2</td></tr> <tr><td>ushort、char</td> <td>u2</td></tr> <tr><td>int</td> <td>i4</td></tr> <tr><td>uint</td> <td>u4</td></tr> <tr><td>long</td> <td>i8</td></tr> <tr><td>ulong</td> <td>u8</td></tr> <tr><td>float</td> <td>r4</td></tr> <tr><td>double</td> <td>r8</td></tr> <tr><td>IntPtr</td> <td>i4</td></tr> <tr><td>UintPtr</td> <td>u4</td></tr> <tr><td>enum</td> <td>The Universal32 signature corresponding to the underlying type</td></tr> <tr><td>Value type reference and class type</td> <td>i4</td></tr> <tr><td>Value type</td> <td>{S,C}{size}</td></tr></tbody></table> <p>S and C correspond to the value types of aligment=1 and 8 respectively. For example, the signature of UnityEngine.Vector3 is S12.</p> <h3 id="sharing-rules-for-universal64"><a href="#sharing-rules-for-universal64" class="header-anchor">#</a> Sharing Rules for Universal64</h3> <table><thead><tr><th>type</th> <th>signature</th></tr></thead> <tbody><tr><td>bool、byte</td> <td>u1</td></tr> <tr><td>sbyte</td> <td>i1</td></tr> <tr><td>short</td> <td>i2</td></tr> <tr><td>ushort、char</td> <td>u2</td></tr> <tr><td>int</td> <td>i4</td></tr> <tr><td>uint</td> <td>u4</td></tr> <tr><td>long</td> <td>i8</td></tr> <tr><td>ulong</td> <td>u8</td></tr> <tr><td>float</td> <td>r4</td></tr> <tr><td>double</td> <td>r8</td></tr> <tr><td>IntPtr</td> <td>i4</td></tr> <tr><td>UintPtr</td> <td>u4</td></tr> <tr><td>enum</td> <td>The Universal32 signature corresponding to the underlying type</td></tr> <tr><td>value type</td> <td>S{size)}</td></tr> <tr><td>Vector2f</td> <td>v2f</td></tr> <tr><td>Vector3f</td> <td>v3f</td></tr> <tr><td>Vector4f</td> <td>v4f</td></tr> <tr><td>Vector2d</td> <td>v2d</td></tr> <tr><td>Vector3d</td> <td>v3d</td></tr> <tr><td>Vector4d</td> <td>v4d</td></tr></tbody></table> <p>Compared with Univeral32, the value type does not distinguish alignment, all use S.</p> <h3 id="sharing-rules-for-arm64"><a href="#sharing-rules-for-arm64" class="header-anchor">#</a> Sharing Rules for Arm64</h3> <table><thead><tr><th>type</th> <th>signature</th></tr></thead> <tbody><tr><td>bool、byte</td> <td>u1</td></tr> <tr><td>sbyte</td> <td>i1</td></tr> <tr><td>short</td> <td>i2</td></tr> <tr><td>ushort、char</td> <td>u2</td></tr> <tr><td>int</td> <td>i4</td></tr> <tr><td>uint</td> <td>u4</td></tr> <tr><td>long</td> <td>i8</td></tr> <tr><td>ulong</td> <td>u8</td></tr> <tr><td>float</td> <td>r4</td></tr> <tr><td>double</td> <td>r8</td></tr> <tr><td>IntPtr</td> <td>i4</td></tr> <tr><td>UintPtr</td> <td>u4</td></tr> <tr><td>enum</td> <td>The Universal32 signature corresponding to the underlying type</td></tr> <tr><td>Value type reference and class type</td> <td>i8</td></tr> <tr><td>Value type as parameter(size&lt;=16)</td> <td>S16</td></tr> <tr><td>Value type as parameter(size&gt;16)</td> <td>sr</td></tr> <tr><td>Value type as return value</td> <td>S{size)}</td></tr> <tr><td>Vector2f</td> <td>v2f</td></tr> <tr><td>Vector3f</td> <td>v3f</td></tr> <tr><td>Vector4f</td> <td>v4f</td></tr> <tr><td>Vector2d</td> <td>v2d</td></tr> <tr><td>Vector3d</td> <td>v3d</td></tr> <tr><td>Vector4d</td> <td>v4d</td></tr></tbody></table> <h2 id="hybridclr-default-bridge-function-set"><a href="#hybridclr-default-bridge-function-set" class="header-anchor">#</a> HybridCLR default bridge function set</h2> <p>HybridCLR has scanned the Unity core library and common third-party libraries to generate a default bridge function set. The relevant code file is libil2cpp/hybridclr/interpreter/MethodBridge_{abi}.cpp, where {abi} is Arm64, Universal32 or Universal64.</p> <h2 id="custom-bridge-function-set"><a href="#custom-bridge-function-set" class="header-anchor">#</a> Custom bridge function set</h2> <p>In practical projects, there will always be some shared bridge functions of aot functions that are not in the default bridge function set. Therefore, tool scripts are provided in <a href="/en/hybridclr/hybridclr_unity/">hybridclr_unity package</a>, using the menu command <code>HybridCLR/Generate/MethodBridge</code> to automatically generate all bridge functions according to the assembly.</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2023/05/04, 11:48:51</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/en/hybridclr/aot_generic/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">AOT generic problem</div></a> <a href="/en/hybridclr/memory/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Memory-related principles</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/en/hybridclr/aot_generic/" class="prev">AOT generic problem</a></span> <span class="next"><a href="/en/hybridclr/memory/">Memory-related principles</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/hybridclr/project_settings/"><div>
            项目设置
            <!----></div></a> <span class="date">09-29</span></dt></dl><dl><dd>02</dd> <dt><a href="/hybridclr/load_assembly/"><div>
            加载和使用热更新代码
            <!----></div></a> <span class="date">09-29</span></dt></dl><dl><dd>03</dd> <dt><a href="/hybridclr/build_game/"><div>
            打包
            <!----></div></a> <span class="date">09-29</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:hybridclr@code-philosophy.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/focus-creative-games" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>focus-creative-games</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.12d5fdbe.js" defer></script><script src="/assets/js/2.0771a7ec.js" defer></script><script src="/assets/js/116.7ba543d5.js" defer></script><script src="/assets/js/3.8d0c7075.js" defer></script>
  </body>
</html>
