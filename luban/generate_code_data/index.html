<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>代码与数据生成 | Code Philosophy</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.png">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <meta name="description" content="Code Philosophy是一个业内领先的专注于提供游戏行业深度技术解决方案的创新型公司。">
    <meta name="keywords" content="HybridCLR,luban,热更新,配表,配置,游戏,git,github">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.de16ca54.css" as="style"><link rel="preload" href="/assets/js/app.12d5fdbe.js" as="script"><link rel="preload" href="/assets/js/2.0771a7ec.js" as="script"><link rel="preload" href="/assets/js/57.6756691b.js" as="script"><link rel="preload" href="/assets/js/3.8d0c7075.js" as="script"><link rel="prefetch" href="/assets/js/10.d15b8a0c.js"><link rel="prefetch" href="/assets/js/100.59f432fb.js"><link rel="prefetch" href="/assets/js/101.3de7bbde.js"><link rel="prefetch" href="/assets/js/102.4a0758d3.js"><link rel="prefetch" href="/assets/js/103.26383b9f.js"><link rel="prefetch" href="/assets/js/104.a1da4ecb.js"><link rel="prefetch" href="/assets/js/105.ef6a6e83.js"><link rel="prefetch" href="/assets/js/106.da96dd79.js"><link rel="prefetch" href="/assets/js/107.ec48bd70.js"><link rel="prefetch" href="/assets/js/108.0f684202.js"><link rel="prefetch" href="/assets/js/109.2a494194.js"><link rel="prefetch" href="/assets/js/11.764b6824.js"><link rel="prefetch" href="/assets/js/110.84415013.js"><link rel="prefetch" href="/assets/js/111.b2685030.js"><link rel="prefetch" href="/assets/js/112.d97b1c0a.js"><link rel="prefetch" href="/assets/js/113.fc2f8b72.js"><link rel="prefetch" href="/assets/js/114.389fdf76.js"><link rel="prefetch" href="/assets/js/115.d7da7753.js"><link rel="prefetch" href="/assets/js/116.7ba543d5.js"><link rel="prefetch" href="/assets/js/117.d7087ed2.js"><link rel="prefetch" href="/assets/js/118.afcabf3e.js"><link rel="prefetch" href="/assets/js/119.2bcae880.js"><link rel="prefetch" href="/assets/js/12.8d2b0d29.js"><link rel="prefetch" href="/assets/js/120.e7473c03.js"><link rel="prefetch" href="/assets/js/121.e7f1865f.js"><link rel="prefetch" href="/assets/js/122.1ee03f15.js"><link rel="prefetch" href="/assets/js/123.8c8de603.js"><link rel="prefetch" href="/assets/js/124.1c8fa702.js"><link rel="prefetch" href="/assets/js/125.92167af0.js"><link rel="prefetch" href="/assets/js/126.d729738c.js"><link rel="prefetch" href="/assets/js/127.291f69f0.js"><link rel="prefetch" href="/assets/js/128.08210df8.js"><link rel="prefetch" href="/assets/js/129.40b77886.js"><link rel="prefetch" href="/assets/js/13.e0289cd0.js"><link rel="prefetch" href="/assets/js/130.8305c052.js"><link rel="prefetch" href="/assets/js/131.5e6ae27f.js"><link rel="prefetch" href="/assets/js/132.d9c12ddc.js"><link rel="prefetch" href="/assets/js/133.82886760.js"><link rel="prefetch" href="/assets/js/134.6f64a5d9.js"><link rel="prefetch" href="/assets/js/135.b90b8356.js"><link rel="prefetch" href="/assets/js/136.24e466af.js"><link rel="prefetch" href="/assets/js/137.aaf435ae.js"><link rel="prefetch" href="/assets/js/138.00c60cde.js"><link rel="prefetch" href="/assets/js/139.14e869b2.js"><link rel="prefetch" href="/assets/js/14.81465e75.js"><link rel="prefetch" href="/assets/js/140.de231325.js"><link rel="prefetch" href="/assets/js/141.4ad5ea60.js"><link rel="prefetch" href="/assets/js/142.f36e159e.js"><link rel="prefetch" href="/assets/js/143.2e4611d8.js"><link rel="prefetch" href="/assets/js/144.e9ebb3fa.js"><link rel="prefetch" href="/assets/js/145.1a9f5fad.js"><link rel="prefetch" href="/assets/js/146.624849a0.js"><link rel="prefetch" href="/assets/js/147.461906c5.js"><link rel="prefetch" href="/assets/js/148.d28d7aaa.js"><link rel="prefetch" href="/assets/js/149.9784b5ed.js"><link rel="prefetch" href="/assets/js/15.6b1ebda0.js"><link rel="prefetch" href="/assets/js/150.240e44d2.js"><link rel="prefetch" href="/assets/js/151.604089c9.js"><link rel="prefetch" href="/assets/js/152.f73b8be0.js"><link rel="prefetch" href="/assets/js/153.e16a3cbb.js"><link rel="prefetch" href="/assets/js/16.9f462aa4.js"><link rel="prefetch" href="/assets/js/17.f6132239.js"><link rel="prefetch" href="/assets/js/18.a0728471.js"><link rel="prefetch" href="/assets/js/19.647597ef.js"><link rel="prefetch" href="/assets/js/20.113a110f.js"><link rel="prefetch" href="/assets/js/21.e8949420.js"><link rel="prefetch" href="/assets/js/22.715d702b.js"><link rel="prefetch" href="/assets/js/23.0c731f9a.js"><link rel="prefetch" href="/assets/js/24.83715717.js"><link rel="prefetch" href="/assets/js/25.a6efb8d9.js"><link rel="prefetch" href="/assets/js/26.876b7bf2.js"><link rel="prefetch" href="/assets/js/27.7e6a1fbc.js"><link rel="prefetch" href="/assets/js/28.c9603a98.js"><link rel="prefetch" href="/assets/js/29.7a6ffd69.js"><link rel="prefetch" href="/assets/js/30.bbdcda14.js"><link rel="prefetch" href="/assets/js/31.441495f6.js"><link rel="prefetch" href="/assets/js/32.516dc27e.js"><link rel="prefetch" href="/assets/js/33.796a4638.js"><link rel="prefetch" href="/assets/js/34.b844a239.js"><link rel="prefetch" href="/assets/js/35.4489eede.js"><link rel="prefetch" href="/assets/js/36.4944cc18.js"><link rel="prefetch" href="/assets/js/37.2b295b6f.js"><link rel="prefetch" href="/assets/js/38.c7f25fa6.js"><link rel="prefetch" href="/assets/js/39.f350b082.js"><link rel="prefetch" href="/assets/js/4.e8f1cdb3.js"><link rel="prefetch" href="/assets/js/40.6346e1bc.js"><link rel="prefetch" href="/assets/js/41.703948ac.js"><link rel="prefetch" href="/assets/js/42.cb158675.js"><link rel="prefetch" href="/assets/js/43.a6366a4f.js"><link rel="prefetch" href="/assets/js/44.67b267cd.js"><link rel="prefetch" href="/assets/js/45.d9ded0f6.js"><link rel="prefetch" href="/assets/js/46.dce204c1.js"><link rel="prefetch" href="/assets/js/47.f59b1714.js"><link rel="prefetch" href="/assets/js/48.e72d5a9a.js"><link rel="prefetch" href="/assets/js/49.57c226c6.js"><link rel="prefetch" href="/assets/js/5.765a6984.js"><link rel="prefetch" href="/assets/js/50.696d3556.js"><link rel="prefetch" href="/assets/js/51.f9fcee2c.js"><link rel="prefetch" href="/assets/js/52.e8d8f311.js"><link rel="prefetch" href="/assets/js/53.cb8fbe86.js"><link rel="prefetch" href="/assets/js/54.4df421a2.js"><link rel="prefetch" href="/assets/js/55.5a9cb469.js"><link rel="prefetch" href="/assets/js/56.7e073255.js"><link rel="prefetch" href="/assets/js/58.9d1c4a46.js"><link rel="prefetch" href="/assets/js/59.a560b055.js"><link rel="prefetch" href="/assets/js/6.ddf0c9b8.js"><link rel="prefetch" href="/assets/js/60.a23590d0.js"><link rel="prefetch" href="/assets/js/61.5b3a43f9.js"><link rel="prefetch" href="/assets/js/62.72a56b46.js"><link rel="prefetch" href="/assets/js/63.ceded64f.js"><link rel="prefetch" href="/assets/js/64.f26c8cb9.js"><link rel="prefetch" href="/assets/js/65.fb45c073.js"><link rel="prefetch" href="/assets/js/66.83ebce20.js"><link rel="prefetch" href="/assets/js/67.eff63cf4.js"><link rel="prefetch" href="/assets/js/68.8bb955ae.js"><link rel="prefetch" href="/assets/js/69.dae7cec8.js"><link rel="prefetch" href="/assets/js/7.32660699.js"><link rel="prefetch" href="/assets/js/70.20e84c9c.js"><link rel="prefetch" href="/assets/js/71.6c135456.js"><link rel="prefetch" href="/assets/js/72.a6cef57b.js"><link rel="prefetch" href="/assets/js/73.ea109d55.js"><link rel="prefetch" href="/assets/js/74.31bd4677.js"><link rel="prefetch" href="/assets/js/75.e90da937.js"><link rel="prefetch" href="/assets/js/76.74f061bb.js"><link rel="prefetch" href="/assets/js/77.4a1bfa57.js"><link rel="prefetch" href="/assets/js/78.7847ecac.js"><link rel="prefetch" href="/assets/js/79.5fa65e36.js"><link rel="prefetch" href="/assets/js/8.62b0d450.js"><link rel="prefetch" href="/assets/js/80.008f19fa.js"><link rel="prefetch" href="/assets/js/81.e245ac7c.js"><link rel="prefetch" href="/assets/js/82.8f5a662c.js"><link rel="prefetch" href="/assets/js/83.cc9a1992.js"><link rel="prefetch" href="/assets/js/84.dcf087c6.js"><link rel="prefetch" href="/assets/js/85.be5afefb.js"><link rel="prefetch" href="/assets/js/86.97d6599a.js"><link rel="prefetch" href="/assets/js/87.1df10b08.js"><link rel="prefetch" href="/assets/js/88.f5a3d153.js"><link rel="prefetch" href="/assets/js/89.1a78c9ca.js"><link rel="prefetch" href="/assets/js/9.f51c0ef6.js"><link rel="prefetch" href="/assets/js/90.dfb15931.js"><link rel="prefetch" href="/assets/js/91.a5bdf350.js"><link rel="prefetch" href="/assets/js/92.4d4d7050.js"><link rel="prefetch" href="/assets/js/93.4ce8faaa.js"><link rel="prefetch" href="/assets/js/94.13bd2ab5.js"><link rel="prefetch" href="/assets/js/95.f941715f.js"><link rel="prefetch" href="/assets/js/96.6adeb803.js"><link rel="prefetch" href="/assets/js/97.6e1aaaf3.js"><link rel="prefetch" href="/assets/js/98.53de0dca.js"><link rel="prefetch" href="/assets/js/99.6f94e8b5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.de16ca54.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Code Philosophy" class="logo"> <span class="site-name can-hide">Code Philosophy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HybridCLR文档" class="dropdown-title"><a href="/hybridclr/index/" class="link-title">HybridCLR文档</a> <span class="title" style="display:none;">HybridCLR文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hybridclr/about/" class="nav-link">关于HybridCLR</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/start_up/" class="nav-link">快速开始</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/install/" class="nav-link">安装</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/benchmark/" class="nav-link">性能报告</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/faq/" class="nav-link">FAQ</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/common_errors/" class="nav-link">常见错误处理</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/bug_reporter/" class="nav-link">bug反馈</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Luban文档" class="dropdown-title"><a href="/luban/index/" class="link-title">Luban文档</a> <span class="title" style="display:none;">Luban文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/luban/about/" class="nav-link">关于luban</a></li><li class="dropdown-item"><!----> <a href="/luban/start_up/" class="nav-link">快速开始</a></li><li class="dropdown-item"><!----> <a href="/luban/command_tools/" class="nav-link">完整特性</a></li><li class="dropdown-item"><!----> <a href="/luban/data_source/" class="nav-link">多数据源</a></li><li class="dropdown-item"><!----> <a href="/luban/advanced/validator/" class="nav-link">高级特性</a></li><li class="dropdown-item"><!----> <a href="/luban/tools/" class="nav-link">Luban工具</a></li></ul></div></div><div class="nav-item"><a href="/hybridclr/price/" class="nav-link">商业化支持</a></div><div class="nav-item"><a href="/join/" class="nav-link">招聘</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><!----> <span class="title" style="display:;">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/luban/generate_code_data/" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/luban/generate_code_data/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/focus-creative-games" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HybridCLR文档" class="dropdown-title"><a href="/hybridclr/index/" class="link-title">HybridCLR文档</a> <span class="title" style="display:none;">HybridCLR文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hybridclr/about/" class="nav-link">关于HybridCLR</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/start_up/" class="nav-link">快速开始</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/install/" class="nav-link">安装</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/benchmark/" class="nav-link">性能报告</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/faq/" class="nav-link">FAQ</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/common_errors/" class="nav-link">常见错误处理</a></li><li class="dropdown-item"><!----> <a href="/hybridclr/bug_reporter/" class="nav-link">bug反馈</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Luban文档" class="dropdown-title"><a href="/luban/index/" class="link-title">Luban文档</a> <span class="title" style="display:none;">Luban文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/luban/about/" class="nav-link">关于luban</a></li><li class="dropdown-item"><!----> <a href="/luban/start_up/" class="nav-link">快速开始</a></li><li class="dropdown-item"><!----> <a href="/luban/command_tools/" class="nav-link">完整特性</a></li><li class="dropdown-item"><!----> <a href="/luban/data_source/" class="nav-link">多数据源</a></li><li class="dropdown-item"><!----> <a href="/luban/advanced/validator/" class="nav-link">高级特性</a></li><li class="dropdown-item"><!----> <a href="/luban/tools/" class="nav-link">Luban工具</a></li></ul></div></div><div class="nav-item"><a href="/hybridclr/price/" class="nav-link">商业化支持</a></div><div class="nav-item"><a href="/join/" class="nav-link">招聘</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><!----> <span class="title" style="display:;">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/luban/generate_code_data/" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/luban/generate_code_data/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/focus-creative-games" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/luban/about/" class="sidebar-link">关于Luban</a></li><li><a href="/luban/traits/" class="sidebar-link">特性</a></li><li><a href="/luban/start_up/" class="sidebar-link">快速开始</a></li><li><a href="/luban/generate_code_data/" aria-current="page" class="active sidebar-link">代码与数据生成</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#支持的平台、引擎和语言" class="sidebar-link">支持的平台、引擎和语言</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#可以导出哪些数据格式" class="sidebar-link">可以导出哪些数据格式</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#luban命令行工具的详细文档" class="sidebar-link">luban命令行工具的详细文档？</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#如何生成代码和数据" class="sidebar-link">如何生成代码和数据</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#为unity项目生成c-代码并导出json数据" class="sidebar-link">为unity项目生成c#代码并导出json数据</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#为-unity-puerts-项目生成-ts代码-并生成json数据" class="sidebar-link">为 unity + puerts 项目生成 ts代码，并生成json数据</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#为-ue4项目-生成c-代码-非蓝图-和binary数据" class="sidebar-link">为 UE4项目，生成c++代码（非蓝图）和binary数据</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#其他类型项目类型-如何生成代码和数据" class="sidebar-link">其他类型项目类型，如何生成代码和数据</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#生成protobuf的定义文件及protobuf数据格式" class="sidebar-link">生成protobuf的定义文件及protobuf数据格式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/luban/generate_code_data/#protobuf2" class="sidebar-link">protobuf2</a></li><li class="sidebar-sub-header level3"><a href="/luban/generate_code_data/#protobuf3" class="sidebar-link">protobuf3</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#生成msgpack的数据" class="sidebar-link">生成msgpack的数据</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#生成flatbuffers的定义文件及flatbuffers数据格式" class="sidebar-link">生成flatbuffers的定义文件及flatbuffers数据格式</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#只生成代码或者数据吗" class="sidebar-link">只生成代码或者数据吗</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#配置中有些string字段是资源地址-统一导出这些资源地址" class="sidebar-link">配置中有些string字段是资源地址，统一导出这些资源地址</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#生成的c-代码中-vector的类型由system-numerics-vector-2-3-4-改成-unityengine-vector-2-3-4" class="sidebar-link">生成的c#代码中,vector的类型由System.Numerics.Vector{2,3,4}，改成 UnityEngine.Vector{2,3,4}</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#自定义代码命名风格" class="sidebar-link">自定义代码命名风格</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#gen-types中-code-cs-json和code-cs-unity-json-有什么区别" class="sidebar-link">gentypes中 codecsjson和codecsunityjson 有什么区别</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#命令行参数中的-j-cfg-的含义" class="sidebar-link">命令行参数中的 -j cfg 的含义</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#生成的配置代码顶层命名空间是cfg-可以不加这个命名空间或者使用其他值吗" class="sidebar-link">生成的配置代码顶层命名空间是cfg，可以不加这个命名空间或者使用其他值吗？</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#生成的数据文件的后缀" class="sidebar-link">生成的数据文件的后缀</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#enum、bean-类型代码导出规则" class="sidebar-link">enum、bean 类型代码导出规则</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#不同导出格式-性能测试结果" class="sidebar-link">不同导出格式 性能测试结果</a></li><li class="sidebar-sub-header level2"><a href="/luban/generate_code_data/#binary与json格式加载性能对比" class="sidebar-link">binary与json格式加载性能对比？</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高级特性</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/luban/tools/" class="sidebar-link">Luban工具</a></li><li><a href="/luban/faq/" class="sidebar-link">FAQ</a></li><li><a href="/luban/changelog/" class="sidebar-link">Changelog</a></li><li><a href="/pages/b36ae9/" class="sidebar-link">后续开发规划</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/luban/#luban" data-v-06225672>luban</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https:://code-philosophy.com" target="_blank" title="作者" class="beLink" data-v-06225672>Code Philosophy</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-05-25</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">代码与数据生成<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="代码与数据生成"><a href="#代码与数据生成" class="header-anchor">#</a> 代码与数据生成</h1> <h2 id="支持的平台、引擎和语言"><a href="#支持的平台、引擎和语言" class="header-anchor">#</a> 支持的平台、引擎和语言</h2> <ul><li>跨平台
<ul><li>Win</li> <li>Mac</li> <li>Linux (包括WSL)</li></ul></li> <li>支持主流的游戏开发语言
<ul><li>c++ (11+)</li> <li>c# (.net framework 4+. dotnet core 3+)</li> <li>java (1.6+)</li> <li>go (1.10+)</li> <li>lua (5.1+)</li> <li>js 和 typescript (3.0+)</li> <li>python (3.0+)</li> <li>erlang (18+)</li> <li>rust (1.5+)</li> <li>其他<strong>protobuf</strong>支持语言</li></ul></li> <li>支持主流的引擎
<ul><li>unity</li> <li>unreal</li> <li>cocos2d-x</li> <li>微信小游戏平台</li> <li>其他家支持js的小游戏平台</li></ul></li> <li>支持主流的热更新方案
<ul><li>xlua</li> <li>tolua</li> <li>slua</li> <li>ILRuntime</li> <li>sluaunreal</li> <li>puerts</li> <li>XIL</li></ul></li> <li>支持主流的开源框架
<ul><li>skynet</li> <li>ET</li> <li>GameFramework</li> <li>xlua-framework</li></ul></li></ul> <h2 id="可以导出哪些数据格式"><a href="#可以导出哪些数据格式" class="header-anchor">#</a> 可以导出哪些数据格式</h2> <ul><li>binary 格式。 格式紧凑，加载高效，但基本不具体可读性。推荐只用于正式发布。</li> <li>json 格式。 可读性佳。支持优雅对齐格式，也支持紧凑格式。 推荐用于服务器端，以及用于客户端开发期。</li> <li><strong>protobuf</strong> 格式。适用于熟悉pb的开发者。</li> <li><strong>msgpack</strong> 格式。</li> <li>lua 格式。 可读性佳。 推荐仅用于客户端脚本语言为lua的情形。</li> <li>xml 格式。</li> <li>erlang格式。 仅用于 erlang语言。</li> <li>yaml格式。</li> <li>其他格式。很容易扩展支持。</li></ul> <p><strong>同一种格式，为不同语言生成的数据是完全相同的</strong>。</p> <p>不同语言支持的格式如下：</p> <table><thead><tr><th style="text-align:left;">language</th> <th style="text-align:center;">binary</th> <th style="text-align:center;">json</th> <th style="text-align:center;">lua</th></tr></thead> <tbody><tr><td style="text-align:left;">c#</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:left;">java</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:left;">go</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:left;">c++</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;">❌</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:left;">go</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:left;">python</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;">❌</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:left;">typescript</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:left;">rust</td> <td style="text-align:center;">❌</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:left;">lua</td> <td style="text-align:center;">✔️</td> <td style="text-align:center;">❌</td> <td style="text-align:center;">✔️</td></tr> <tr><td style="text-align:left;">erlang</td> <td style="text-align:center;">erlang</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:left;">protobuf</td> <td style="text-align:center;">所有</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr></tbody></table> <h2 id="luban命令行工具的详细文档"><a href="#luban命令行工具的详细文档" class="header-anchor">#</a> luban命令行工具的详细文档？</h2> <p>参见 <a href="/luban/command_tools/">luban命令行</a></p> <h2 id="如何生成代码和数据"><a href="#如何生成代码和数据" class="header-anchor">#</a> 如何生成代码和数据</h2> <p>详细文档参见上面的链接。代码生成相关的工具有三个,都在luban_examples/Tools目录下。</p> <ul><li>Luban.Client。 Luban工具客户端</li> <li>Luban.Server。 Luban工具服务器端</li> <li>Luban.ClientServer。 Luban工具前后端一体。</li></ul> <p>对于新手简单起见，我们介绍Luban.ClientServer的用法，命令如下：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>dotnet %LUBAN_CLIENT_SERVER_DLL% <span class="token parameter variable">-j</span> cfg -- ^
 <span class="token parameter variable">-d</span> %ROOT_FILE% ^
 <span class="token parameter variable">--input_data_dir</span> %INPUT_DATA_DIR% ^
 <span class="token parameter variable">--output_code_dir</span> %OUTPUT_CODE_DIR%
 <span class="token parameter variable">--output_data_dir</span> %OUTPUT_DIR% ^
 <span class="token parameter variable">--gen_types</span> %GEN_TYPE% ^
 <span class="token parameter variable">-s</span> %GROUP%
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>其中：</p> <ul><li>LUBAN_CLIENT_SERVER_DLL为 Luban.ClientServer.dll的路径， 可以指向 luban_examples/Tools/Luban.ClientServer/Luban.ClientServer.dll</li> <li>ROOT_FILE 为根定义文件，指向 MyConfigs/Define/__root__.xml</li> <li>INPUT_DATA_DIR 为配置数据的根目录，指向 MyConfigs/Datas</li> <li>OUTPUT_CODE_DIR 为生成代码的目录</li> <li>GEN_TYPE 为生成类型。 如果你使用unity,想生成c#代码，导出json数据，则使用 &quot;code_cs_unity_json,data_json&quot;</li> <li>GROUP 为导出分组。客户端则取client，服务器取server，所有则取all</li></ul> <p>更多项目类型，参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects" target="_blank" rel="noopener noreferrer">示例项目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="为unity项目生成c-代码并导出json数据"><a href="#为unity项目生成c-代码并导出json数据" class="header-anchor">#</a> 为unity项目生成c#代码并导出json数据</h2> <p>对于命令行的介绍参见 上面。 你的生成命令大略如下</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>dotnet %LUBAN_CLIENT_SERVER_DLL% <span class="token parameter variable">-j</span> cfg -- ^
 <span class="token parameter variable">-d</span> %ROOT_FILE% ^
 <span class="token parameter variable">--input_data_dir</span> %INPUT_DATA_DIR% ^
 <span class="token parameter variable">--output_code_dir</span> %OUTPUT_CODE_DIR%
 <span class="token parameter variable">--output_data_dir</span> %OUTPUT_DIR% ^
 <span class="token parameter variable">--gen_types</span> <span class="token string">&quot;code_cs_unity_json,data_json&quot;</span> ^
 <span class="token parameter variable">-s</span> client
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>也即 --gen_types参数取 &quot;code_cs_unity_json,data_json&quot;, -s 参数取 client</p> <p>具体项目，可参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_json" target="_blank" rel="noopener noreferrer">Csharp_Unity_Json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>更多项目类型，参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects" target="_blank" rel="noopener noreferrer">示例项目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="为-unity-puerts-项目生成-ts代码-并生成json数据"><a href="#为-unity-puerts-项目生成-ts代码-并生成json数据" class="header-anchor">#</a> 为 unity + puerts 项目生成 ts代码，并生成json数据</h2> <p>--gen_types 参数取 &quot;code_typescript_json,data_json&quot;，-s 参数取 client</p> <p>具体项目，可参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/TypeScript_Unity_Puerts_Json" target="_blank" rel="noopener noreferrer">Typescript_Unity_Puerts_Json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="为-ue4项目-生成c-代码-非蓝图-和binary数据"><a href="#为-ue4项目-生成c-代码-非蓝图-和binary数据" class="header-anchor">#</a> 为 UE4项目，生成c++代码（非蓝图）和binary数据</h2> <p>基准的参考项目为 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Cpp_Unreal_bin" target="_blank" rel="noopener noreferrer">Cpp_Unreal_bin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>由于生成的代码依赖于一些头文件，你需要先从该项目 拷备Source\Cpp_Unreal\Private\bright 到你们项目合适的位置。必须保证bright目录在include目录路径内，如生成的代码中 #include &quot;bright/serialization/ByteBuf.h&quot; 可以找到这个文件。</p> <p>接着命令行参数取 --gen_types &quot;code_cpp_bin,data_bin&quot;</p> <h2 id="其他类型项目类型-如何生成代码和数据"><a href="#其他类型项目类型-如何生成代码和数据" class="header-anchor">#</a> 其他类型项目类型，如何生成代码和数据</h2> <p>不同项目之间，仅仅是 --gen_types 不一样， 请从<a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects" target="_blank" rel="noopener noreferrer">示例项目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中找到与你项目匹配的项目，参考相应目录下的 gen_code.bat 即可。</p> <h2 id="生成protobuf的定义文件及protobuf数据格式"><a href="#生成protobuf的定义文件及protobuf数据格式" class="header-anchor">#</a> 生成protobuf的定义文件及protobuf数据格式</h2> <p>目前支持proto2和proto3语法</p> <h3 id="protobuf2"><a href="#protobuf2" class="header-anchor">#</a> protobuf2</h3> <p>只支持bin格式导出。</p> <p>取 --gen_types code_protobuf2,data_protobuf_bin 即可，参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Protobuf2_bin" target="_blank" rel="noopener noreferrer">Protobuf2_bin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。 每个导出的数据文件对应Table类序列化后的内容，加载即可，以item.TbItem表为例。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> tbItem <span class="token operator">=</span> ItemTbItem<span class="token punctuation">.</span>Parser<span class="token punctuation">.</span><span class="token function">ParseFrom</span><span class="token punctuation">(</span>File<span class="token punctuation">.</span><span class="token function">OpenRead</span><span class="token punctuation">(</span><span class="token string">&quot;pb_datas/item_tbitem.bytes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="protobuf3"><a href="#protobuf3" class="header-anchor">#</a> protobuf3</h3> <p>既支持bin格式，也支持json格式导出。</p> <ul><li>binary格式导出。 --gen_types code_protobuf3,data_protobuf_bin</li> <li>json格式导出。 --gen_types code_protobuf3,data_protobuf_json</li></ul> <h2 id="生成msgpack的数据"><a href="#生成msgpack的数据" class="header-anchor">#</a> 生成msgpack的数据</h2> <p>取 --gen_types data_msgpack 即可。 参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/MsgPack_bin" target="_blank" rel="noopener noreferrer">MsgPack_bin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="生成flatbuffers的定义文件及flatbuffers数据格式"><a href="#生成flatbuffers的定义文件及flatbuffers数据格式" class="header-anchor">#</a> 生成flatbuffers的定义文件及flatbuffers数据格式</h2> <p>取 --gen_types code_flatbuffers,data_flatbuffers_json 即可，参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Flatbuffers_json" target="_blank" rel="noopener noreferrer">Flatbuffers_json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>由于binary格式过于复杂，现在只支持导出json格式，但是使用者可以使用flatc工具将数据转成binary！特地生成了 convert_json_2_binary.bat
和convert_json_2_binary.sh这两个批处理文件，方便自动一键转换。</p> <p>目前由于flat_buffers不支持容器的元素类型为union，因此略微有一些兼容性问题，但在项目中可以通过使用一个bean来包含这个union字段来迂回解决。</p> <p>data_flatbuffers_json 和 data_json的输出格式有一些区别</p> <ul><li>data_flatbuffers_json 顶层为 包含data_list字段的 table,而 data_json顶层直接对应 data_list的内容</li> <li>flatbuffers不支持本地化。 所以它的text类型导出格式为string，而data_json为 {&quot;key&quot;:&quot;xxx&quot;, &quot;text&quot;:&quot;text}</li> <li>data_flatbuffers_json序列化bean类型字段时，如果遇到多态类型，会多序列化一个string类型的xxx_type字段，用于指示union的类型。也正是如此 data_flatbuffers_json不支持容器中出现union</li> <li>data_flatbuffers_json 输出的数据中，如果包含容器类型数据，并且元素类型为union，则无法被正确解析。</li></ul> <h2 id="只生成代码或者数据吗"><a href="#只生成代码或者数据吗" class="header-anchor">#</a> 只生成代码或者数据吗</h2> <p>以 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_json" target="_blank" rel="noopener noreferrer">Csharp_Unity_Json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 为例。</p> <ul><li>--gen_types code_cs_unity_json 则只生成代码</li> <li>--gen_types data_json 则只生成数据</li></ul> <h2 id="配置中有些string字段是资源地址-统一导出这些资源地址"><a href="#配置中有些string字段是资源地址-统一导出这些资源地址" class="header-anchor">#</a> 配置中有些string字段是资源地址，统一导出这些资源地址</h2> <p>首先定义类型时，添加上'#res=xxx' 这种标签，xxx可以取任意值。如下所示。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TestRes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string#res=item<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>取 '--gen_types data_resources'，并且新增参数'--output:data:resource_list_file resources.txt'。 运行即可将所有带res标签的数据导出到resources.text文件中。</p> <p>假设配置表中包含icon=&quot;/ui/icon1.jpg&quot; 和 icon=&quot;/ui/icon1/jpg&quot; 这两个数据，则导出的资源列表内容为</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>item,/ui/icon1.jpg
item,/ui/icon2.jpg
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>参见示例 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/GenerateDatas" target="_blank" rel="noopener noreferrer">GenerateDatas<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>/gen_resource_list.bat 文件。</p> <h2 id="生成的c-代码中-vector的类型由system-numerics-vector-2-3-4-改成-unityengine-vector-2-3-4"><a href="#生成的c-代码中-vector的类型由system-numerics-vector-2-3-4-改成-unityengine-vector-2-3-4" class="header-anchor">#</a> 生成的c#代码中,vector的类型由System.Numerics.Vector{2,3,4}，改成 UnityEngine.Vector{2,3,4}</h2> <p>命令行参数中添加  --cs:use_unity_vector 选项即可。 参见示例 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_bin" target="_blank" rel="noopener noreferrer">Csharp_Unity_bin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="自定义代码命名风格"><a href="#自定义代码命名风格" class="header-anchor">#</a> 自定义代码命名风格</h2> <p>可以。 添加选项 --naming_convention_bean_member none 即可。使生成的代码中的字段名与定义名相同。</p> <p>支持以下代码命名风格：</p> <ul><li>none。 无命名风格，生成的字段名和定义的名称一样</li> <li>language_recommend。即根据生成的语言不同，自动设置该语言推荐的风格。比如c#为PascalCase,java为 camelCase,python为under_scores。</li> <li>camelCalse。 即驼峰形式，生成 xxxYyyy这种风格的字段名。</li> <li>PascalCase。 即Pascal形式。生成XxxYyy这种风格的字段名。</li> <li>under_scores。 下划线形式。即生成xxx_yyy这种风格的字段名。</li></ul> <p>默认使用 language_recommend。</p> <h2 id="gen-types中-code-cs-json和code-cs-unity-json-有什么区别"><a href="#gen-types中-code-cs-json和code-cs-unity-json-有什么区别" class="header-anchor">#</a> gen_types中 code_cs_json和code_cs_unity_json 有什么区别</h2> <p>code_cs_json生成代码中使用了 System.Text.Json库，这个只有.net core 3以后的版本才有，unity目前的.net版本不支持，所以这是给基于.net coer的服务器项目使用的。
code_cs_unity_json使用了第三方的SimpleJson库，兼容unity的.net版本，给unity生成加载json数据的c#代码时，可以（当前也只有这个选择）选择这个。</p> <h2 id="命令行参数中的-j-cfg-的含义"><a href="#命令行参数中的-j-cfg-的含义" class="header-anchor">#</a> 命令行参数中的 -j cfg 的含义</h2> <p>-j选项相应的长选项名为--job，表示生成类型。由于luban目前支持消息(proto)、数据库(db)、配置(cfg) 三种类型的生成任务，这些生成任务的功能完全不同，参数
相差较大，需要用-j 来区分不同的生成任务。</p> <h2 id="生成的配置代码顶层命名空间是cfg-可以不加这个命名空间或者使用其他值吗"><a href="#生成的配置代码顶层命名空间是cfg-可以不加这个命名空间或者使用其他值吗" class="header-anchor">#</a> 生成的配置代码顶层命名空间是cfg，可以不加这个命名空间或者使用其他值吗？</h2> <p>可以。 __root__.xml中 topmodule 配置项对应的值即为顶层命名空间，可以调整为空或者为其他值。</p> <h2 id="生成的数据文件的后缀"><a href="#生成的数据文件的后缀" class="header-anchor">#</a> 生成的数据文件的后缀</h2> <p>数据格式的默认文件后缀如下</p> <table><thead><tr><th>data</th> <th>extension</th></tr></thead> <tbody><tr><td>data_bin</td> <td>bin</td></tr> <tr><td>data_json</td> <td>json</td></tr> <tr><td>data_json2</td> <td>json</td></tr> <tr><td>data_lua</td> <td>lua</td></tr> <tr><td>data_xml</td> <td>xml</td></tr> <tr><td>data_yaml</td> <td>yml</td></tr> <tr><td>data_protobuf</td> <td>bp</td></tr></tbody></table> <p>可以通过命令行选项&quot;--data_file_extension xxx&quot;手动指定输出文件的后缀。</p> <h2 id="enum、bean-类型代码导出规则"><a href="#enum、bean-类型代码导出规则" class="header-anchor">#</a> enum、bean 类型代码导出规则</h2> <p>并非所有定义的类型都会生成代码，必须满足以下规则之一：</p> <ul><li>被导出的table直接或者间接引用的类型</li> <li>root.xml 的 service的 ref项指定的类型。如下图，即使没有任何表直接或者间接引用到test.DemoEnum和test.DemoBean类型，它们也会在server目标时生成代码。</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>server<span class="token punctuation">&quot;</span></span> <span class="token attr-name">managers</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tables<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>s<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.DemoEnum<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.DemoBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>service</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="不同导出格式-性能测试结果"><a href="#不同导出格式-性能测试结果" class="header-anchor">#</a> 不同导出格式 性能测试结果</h2> <p>硬件：</p> <p>Intel(R) Core i7-10700 @ 2.9G 16核</p> <p>32G 内存</p> <p>数据集</p> <p>500个excel表
每个表有1000行比较大的记录
每个表文件大小 132k</p> <p>测试结果：</p> <table><thead><tr><th>格式</th> <th>首次耗时</th> <th>累积耗时</th> <th>单个输出文件大小</th> <th>输出文件总大小</th></tr></thead> <tbody><tr><td>bin</td> <td>15.652 s</td> <td>797 ms</td> <td>164 K</td> <td>59.5 M</td></tr> <tr><td>json</td> <td>17.746 s</td> <td>796 ms</td> <td>1.11 M</td> <td>555 M</td></tr> <tr><td>lua</td> <td>17.323 s</td> <td>739 ms</td> <td>433 K</td> <td>212 M</td></tr></tbody></table> <h2 id="binary与json格式加载性能对比"><a href="#binary与json格式加载性能对比" class="header-anchor">#</a> binary与json格式加载性能对比？</h2> <p>以luban_examples的DesignerConfigs配置为测试数据，以Projects下的csharp_Unity_bin和csharp_Unity_json项目为测试对比，
加载100遍cfg.Table。</p> <p>binary格式耗时28ms，json格式耗时112ms。</p> <p>加载性能大约为 4:1。</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/05/04, 11:48:51</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/luban/start_up/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">快速开始</div></a> <a href="/luban/command_tools/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">命令行</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/luban/start_up/" class="prev">快速开始</a></span> <span class="next"><a href="/luban/command_tools/">命令行</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/hybridclr/project_settings/"><div>
            项目设置
            <!----></div></a> <span class="date">09-29</span></dt></dl><dl><dd>02</dd> <dt><a href="/hybridclr/load_assembly/"><div>
            加载和使用热更新代码
            <!----></div></a> <span class="date">09-29</span></dt></dl><dl><dd>03</dd> <dt><a href="/hybridclr/build_game/"><div>
            打包
            <!----></div></a> <span class="date">09-29</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:hybridclr@code-philosophy.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/focus-creative-games" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>focus-creative-games</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.12d5fdbe.js" defer></script><script src="/assets/js/2.0771a7ec.js" defer></script><script src="/assets/js/57.6756691b.js" defer></script><script src="/assets/js/3.8d0c7075.js" defer></script>
  </body>
</html>
